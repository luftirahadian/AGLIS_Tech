{"version":3,"file":"InvoiceDetailPage-CqWOy8Pn.js","sources":["../../src/pages/billing/InvoiceDetailPage.jsx"],"sourcesContent":["// ═══════════════════════════════════════════════════════════════\n// 💰 INVOICE DETAIL PAGE\n// ═══════════════════════════════════════════════════════════════\n\nimport React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  FileText, ArrowLeft, Send, Edit, Trash2, Download, Plus,\n  Calendar, User, CreditCard, DollarSign, Clock, AlertCircle,\n  CheckCircle, Printer, Mail\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport invoiceService from '../../services/invoiceService';\nimport paymentService from '../../services/paymentService';\n\nconst InvoiceDetailPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  // State\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [paymentData, setPaymentData] = useState({\n    amount: '',\n    payment_method: 'bank_transfer',\n    payment_channel: '',\n    payment_date: new Date().toISOString().split('T')[0],\n    reference_number: '',\n    notes: ''\n  });\n\n  // Fetch invoice\n  const { data, isLoading } = useQuery(\n    ['invoice', id],\n    () => invoiceService.getById(id),\n    {\n      enabled: !!id\n    }\n  );\n\n  const invoice = data?.data || null;\n\n  // Send mutation\n  const sendMutation = useMutation(\n    () => invoiceService.markAsSent(id),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries(['invoice', id]);\n        toast.success('Invoice sent successfully');\n      },\n      onError: (error) => {\n        toast.error(error.response?.data?.message || 'Failed to send invoice');\n      }\n    }\n  );\n\n  // Delete mutation\n  const deleteMutation = useMutation(\n    () => invoiceService.delete(id),\n    {\n      onSuccess: () => {\n        toast.success('Invoice deleted successfully');\n        navigate('/invoices');\n      },\n      onError: (error) => {\n        toast.error(error.response?.data?.message || 'Failed to delete invoice');\n      }\n    }\n  );\n\n  // Record payment mutation\n  const recordPaymentMutation = useMutation(\n    (data) => paymentService.create({\n      ...data,\n      invoice_id: parseInt(id),\n      customer_id: invoice.customer_id,\n      auto_verify: true\n    }),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries(['invoice', id]);\n        setShowPaymentModal(false);\n        setPaymentData({\n          amount: '',\n          payment_method: 'bank_transfer',\n          payment_channel: '',\n          payment_date: new Date().toISOString().split('T')[0],\n          reference_number: '',\n          notes: ''\n        });\n        toast.success('Payment recorded successfully');\n      },\n      onError: (error) => {\n        toast.error(error.response?.data?.message || 'Failed to record payment');\n      }\n    }\n  );\n\n  // Format currency\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('id-ID', {\n      style: 'currency',\n      currency: 'IDR',\n      minimumFractionDigits: 0\n    }).format(amount);\n  };\n\n  // Format date\n  const formatDate = (date) => {\n    if (!date) return '-';\n    return new Date(date).toLocaleDateString('id-ID', {\n      day: '2-digit',\n      month: 'long',\n      year: 'numeric'\n    });\n  };\n\n  // Status badge\n  const getStatusBadge = (status) => {\n    const badges = {\n      draft: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'Draft' },\n      sent: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Sent' },\n      viewed: { bg: 'bg-purple-100', text: 'text-purple-800', label: 'Viewed' },\n      paid: { bg: 'bg-green-100', text: 'text-green-800', label: 'Paid' },\n      partial: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'Partially Paid' },\n      overdue: { bg: 'bg-red-100', text: 'text-red-800', label: 'Overdue' },\n      cancelled: { bg: 'bg-gray-100', text: 'text-gray-600', label: 'Cancelled' }\n    };\n\n    const badge = badges[status] || badges.draft;\n\n    return (\n      <span className={`px-4 py-2 rounded-full text-sm font-semibold ${badge.bg} ${badge.text}`}>\n        {badge.label}\n      </span>\n    );\n  };\n\n  // Handle record payment\n  const handleRecordPayment = (e) => {\n    e.preventDefault();\n    \n    if (!paymentData.amount || parseFloat(paymentData.amount) <= 0) {\n      toast.error('Please enter a valid amount');\n      return;\n    }\n\n    if (parseFloat(paymentData.amount) > invoice.outstanding_amount) {\n      toast.error('Payment amount cannot exceed outstanding amount');\n      return;\n    }\n\n    recordPaymentMutation.mutate({\n      ...paymentData,\n      amount: parseFloat(paymentData.amount)\n    });\n  };\n\n  // Handle delete\n  const handleDelete = () => {\n    if (window.confirm(`Are you sure you want to delete invoice ${invoice.invoice_number}?`)) {\n      deleteMutation.mutate();\n    }\n  };\n\n  // Handle send\n  const handleSend = () => {\n    if (window.confirm(`Send invoice ${invoice.invoice_number} to customer?`)) {\n      sendMutation.mutate();\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading invoice...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!invoice) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <FileText className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n          <p className=\"text-gray-600 text-lg\">Invoice not found</p>\n          <button\n            onClick={() => navigate('/invoices')}\n            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n          >\n            Back to Invoices\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const isOverdue = new Date(invoice.due_date) < new Date() && invoice.status !== 'paid';\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <button\n          onClick={() => navigate('/invoices')}\n          className=\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 mb-4\"\n        >\n          <ArrowLeft className=\"h-5 w-5\" />\n          <span>Back to Invoices</span>\n        </button>\n\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">{invoice.invoice_number}</h1>\n            <p className=\"text-gray-600 mt-1\">\n              Created on {formatDate(invoice.created_at)}\n            </p>\n          </div>\n\n          <div className=\"flex items-center space-x-3\">\n            {getStatusBadge(invoice.status)}\n            \n            <div className=\"flex space-x-2\">\n              {invoice.status === 'draft' && (\n                <>\n                  <button\n                    onClick={() => navigate(`/invoices/${id}/edit`)}\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center space-x-2\"\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                    <span>Edit</span>\n                  </button>\n                  <button\n                    onClick={handleSend}\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n                  >\n                    <Send className=\"h-4 w-4\" />\n                    <span>Send</span>\n                  </button>\n                </>\n              )}\n              \n              {invoice.status !== 'paid' && invoice.outstanding_amount > 0 && (\n                <button\n                  onClick={() => setShowPaymentModal(true)}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                  <span>Record Payment</span>\n                </button>\n              )}\n\n              <button\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                title=\"Print\"\n              >\n                <Printer className=\"h-4 w-4\" />\n              </button>\n\n              <button\n                onClick={handleDelete}\n                className=\"px-4 py-2 border border-red-300 rounded-lg text-red-700 hover:bg-red-50\"\n                title=\"Delete\"\n              >\n                <Trash2 className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Column - Invoice Details */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Customer & Dates Card */}\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\n            <div className=\"grid grid-cols-2 gap-6\">\n              {/* Customer Info */}\n              <div>\n                <h3 className=\"text-sm font-semibold text-gray-700 mb-3\">Bill To:</h3>\n                <div className=\"space-y-2\">\n                  <p className=\"font-semibold text-gray-900\">{invoice.customer_name}</p>\n                  {invoice.customer_email && (\n                    <p className=\"text-sm text-gray-600\">{invoice.customer_email}</p>\n                  )}\n                  {invoice.customer_phone && (\n                    <p className=\"text-sm text-gray-600\">{invoice.customer_phone}</p>\n                  )}\n                  {invoice.customer_address && (\n                    <p className=\"text-sm text-gray-600\">{invoice.customer_address}</p>\n                  )}\n                </div>\n              </div>\n\n              {/* Invoice Dates */}\n              <div>\n                <h3 className=\"text-sm font-semibold text-gray-700 mb-3\">Invoice Details:</h3>\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-gray-600\">Invoice Date:</span>\n                    <span className=\"font-medium\">{formatDate(invoice.invoice_date)}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-gray-600\">Due Date:</span>\n                    <span className={`font-medium ${isOverdue ? 'text-red-600' : ''}`}>\n                      {formatDate(invoice.due_date)}\n                    </span>\n                  </div>\n                  {invoice.billing_period_start && invoice.billing_period_end && (\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-gray-600\">Billing Period:</span>\n                      <span className=\"font-medium\">\n                        {formatDate(invoice.billing_period_start)} - {formatDate(invoice.billing_period_end)}\n                      </span>\n                    </div>\n                  )}\n                  {invoice.sent_at && (\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-gray-600\">Sent:</span>\n                      <span className=\"font-medium\">{formatDate(invoice.sent_at)}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {isOverdue && (\n              <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-2\">\n                <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-semibold text-red-900\">Invoice Overdue</p>\n                  <p className=\"text-sm text-red-700\">\n                    This invoice is {Math.floor((new Date() - new Date(invoice.due_date)) / (1000 * 60 * 60 * 24))} days overdue\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Line Items */}\n          <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Line Items</h3>\n            </div>\n            \n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">Description</th>\n                    <th className=\"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase\">Qty</th>\n                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Unit Price</th>\n                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Discount</th>\n                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Total</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-200\">\n                  {invoice.line_items?.map((item, index) => (\n                    <tr key={index}>\n                      <td className=\"px-6 py-4\">\n                        <div>\n                          <p className=\"font-medium text-gray-900\">{item.description}</p>\n                          {item.item_type && (\n                            <p className=\"text-xs text-gray-500 mt-1 capitalize\">\n                              {item.item_type.replace('_', ' ')}\n                            </p>\n                          )}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 text-center text-sm text-gray-900\">\n                        {item.quantity}\n                      </td>\n                      <td className=\"px-6 py-4 text-right text-sm text-gray-900\">\n                        {formatCurrency(item.unit_price)}\n                      </td>\n                      <td className=\"px-6 py-4 text-right text-sm text-gray-900\">\n                        {item.discount_amount > 0 ? formatCurrency(item.discount_amount) : '-'}\n                      </td>\n                      <td className=\"px-6 py-4 text-right font-semibold text-gray-900\">\n                        {formatCurrency(item.line_total)}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            {/* Totals */}\n            <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200\">\n              <div className=\"space-y-2 max-w-sm ml-auto\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600\">Subtotal:</span>\n                  <span className=\"font-medium\">{formatCurrency(invoice.subtotal)}</span>\n                </div>\n                \n                {invoice.discount_amount > 0 && (\n                  <div className=\"flex justify-between text-sm text-green-600\">\n                    <span>Discount:</span>\n                    <span className=\"font-medium\">-{formatCurrency(invoice.discount_amount)}</span>\n                  </div>\n                )}\n                \n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600\">Tax ({invoice.tax_percentage}%):</span>\n                  <span className=\"font-medium\">{formatCurrency(invoice.tax_amount)}</span>\n                </div>\n                \n                <div className=\"flex justify-between text-lg font-bold border-t border-gray-300 pt-2\">\n                  <span>Total:</span>\n                  <span>{formatCurrency(invoice.total_amount)}</span>\n                </div>\n\n                {invoice.paid_amount > 0 && (\n                  <>\n                    <div className=\"flex justify-between text-sm text-green-600\">\n                      <span>Paid:</span>\n                      <span className=\"font-medium\">-{formatCurrency(invoice.paid_amount)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-lg font-bold text-orange-600 border-t border-gray-300 pt-2\">\n                      <span>Outstanding:</span>\n                      <span>{formatCurrency(invoice.outstanding_amount)}</span>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Notes */}\n          {(invoice.notes || invoice.payment_terms) && (\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Additional Information</h3>\n              \n              {invoice.notes && (\n                <div className=\"mb-4\">\n                  <p className=\"text-sm font-medium text-gray-700 mb-1\">Notes:</p>\n                  <p className=\"text-sm text-gray-600\">{invoice.notes}</p>\n                </div>\n              )}\n              \n              {invoice.payment_terms && (\n                <div>\n                  <p className=\"text-sm font-medium text-gray-700 mb-1\">Payment Terms:</p>\n                  <p className=\"text-sm text-gray-600\">{invoice.payment_terms}</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Right Column - Summary & Payments */}\n        <div className=\"space-y-6\">\n          {/* Summary Card */}\n          <div className=\"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg shadow-lg p-6 text-white\">\n            <h3 className=\"text-lg font-semibold mb-4\">Invoice Summary</h3>\n            \n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-blue-100\">Total Amount:</span>\n                <span className=\"text-2xl font-bold\">{formatCurrency(invoice.total_amount)}</span>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-blue-100\">Paid:</span>\n                <span className=\"text-xl font-semibold\">{formatCurrency(invoice.paid_amount)}</span>\n              </div>\n              \n              <div className=\"flex items-center justify-between pt-3 border-t border-blue-500\">\n                <span className=\"text-blue-100\">Outstanding:</span>\n                <span className=\"text-2xl font-bold\">{formatCurrency(invoice.outstanding_amount)}</span>\n              </div>\n            </div>\n\n            {invoice.status === 'paid' && (\n              <div className=\"mt-4 p-3 bg-green-500 bg-opacity-30 rounded-lg flex items-center space-x-2\">\n                <CheckCircle className=\"h-5 w-5\" />\n                <span className=\"font-medium\">Fully Paid</span>\n              </div>\n            )}\n          </div>\n\n          {/* Payment History */}\n          <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Payment History</h3>\n            </div>\n            \n            {invoice.payments && invoice.payments.length > 0 ? (\n              <div className=\"divide-y divide-gray-200\">\n                {invoice.payments.map((payment) => (\n                  <div key={payment.id} className=\"px-6 py-4 hover:bg-gray-50\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-900\">{formatCurrency(payment.amount)}</p>\n                        <p className=\"text-sm text-gray-600 mt-1\">\n                          {payment.payment_method.replace('_', ' ').toUpperCase()}\n                          {payment.payment_channel && ` - ${payment.payment_channel}`}\n                        </p>\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          {formatDate(payment.payment_date)}\n                        </p>\n                        {payment.reference_number && (\n                          <p className=\"text-xs text-gray-500\">\n                            Ref: {payment.reference_number}\n                          </p>\n                        )}\n                      </div>\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\n                        payment.status === 'completed' ? 'bg-green-100 text-green-800' :\n                        payment.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-gray-100 text-gray-800'\n                      }`}>\n                        {payment.status}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"px-6 py-8 text-center text-gray-500\">\n                <CreditCard className=\"h-8 w-8 mx-auto mb-2 text-gray-400\" />\n                <p className=\"text-sm\">No payments recorded</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Payment Recording Modal */}\n      {showPaymentModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Record Payment</h3>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                Outstanding: {formatCurrency(invoice.outstanding_amount)}\n              </p>\n            </div>\n\n            <form onSubmit={handleRecordPayment} className=\"px-6 py-4 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Payment Amount *\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={paymentData.amount}\n                  onChange={(e) => setPaymentData({ ...paymentData, amount: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"0.00\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Payment Method *\n                </label>\n                <select\n                  value={paymentData.payment_method}\n                  onChange={(e) => setPaymentData({ ...paymentData, payment_method: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                >\n                  <option value=\"cash\">Cash</option>\n                  <option value=\"bank_transfer\">Bank Transfer</option>\n                  <option value=\"credit_card\">Credit Card</option>\n                  <option value=\"debit_card\">Debit Card</option>\n                  <option value=\"e_wallet\">E-Wallet</option>\n                  <option value=\"virtual_account\">Virtual Account</option>\n                  <option value=\"qris\">QRIS</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Payment Channel\n                </label>\n                <input\n                  type=\"text\"\n                  value={paymentData.payment_channel}\n                  onChange={(e) => setPaymentData({ ...paymentData, payment_channel: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"e.g., BCA, Mandiri, GoPay\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Payment Date *\n                </label>\n                <input\n                  type=\"date\"\n                  value={paymentData.payment_date}\n                  onChange={(e) => setPaymentData({ ...paymentData, payment_date: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Reference Number\n                </label>\n                <input\n                  type=\"text\"\n                  value={paymentData.reference_number}\n                  onChange={(e) => setPaymentData({ ...paymentData, reference_number: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Transaction/Receipt number\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Notes\n                </label>\n                <textarea\n                  value={paymentData.notes}\n                  onChange={(e) => setPaymentData({ ...paymentData, notes: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  rows=\"3\"\n                  placeholder=\"Additional payment notes...\"\n                ></textarea>\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPaymentModal(false)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                  disabled={recordPaymentMutation.isLoading}\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50\"\n                  disabled={recordPaymentMutation.isLoading}\n                >\n                  {recordPaymentMutation.isLoading ? 'Recording...' : 'Record Payment'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default InvoiceDetailPage;\n\n"],"names":["InvoiceDetailPage","id","useParams","navigate","useNavigate","queryClient","useQueryClient","showPaymentModal","setShowPaymentModal","useState","paymentData","setPaymentData","data","isLoading","useQuery","invoiceService","invoice","sendMutation","useMutation","toast","error","_b","_a","deleteMutation","recordPaymentMutation","paymentService","__spreadProps","__spreadValues","formatCurrency","amount","formatDate","date","getStatusBadge","status","badges","badge","jsx","handleRecordPayment","e","handleDelete","handleSend","jsxs","FileText","isOverdue","ArrowLeft","Fragment","Edit","Send","Plus","Printer","Trash2","AlertCircle","item","index","CheckCircle","payment","CreditCard"],"mappings":"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"}
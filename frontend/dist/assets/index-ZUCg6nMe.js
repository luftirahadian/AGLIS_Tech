const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnalyticsDashboard-XhUFohpt.js","assets/notifications-C-A1jlty.js","assets/react-vendor-BQ7pSkNi.js","assets/react-query-B7OIdD7u.js","assets/ui-vendor-ng1X_mIA.js","assets/charts-CREYXqqm.js","assets/customers-Bkp7alR1.js","assets/socket-BFcXWKeu.js","assets/forms-Dmkgx8TD.js","assets/PerformanceDashboard-BrTp0gtc.js","assets/tickets-vvnhrHMz.js","assets/TechniciansPage-BUsIYOjJ.js","assets/TechnicianDetailPage-FX57sZM3.js","assets/masterDataService-BXxRmj2m.js","assets/InventoryPage-Dbq5kuZw.js","assets/InventoryStockPage-CBgkPTh3.js","assets/PackagesPage-CFR6PFEY.js","assets/PriceListPage-C7hK4zoF.js","assets/EquipmentPage-BV9V-OsR.js","assets/ODPPage-irxGGDma.js","assets/ServiceTypesPage-BMv6PC03.js","assets/ServiceCategoriesPage-BMiFhct1.js","assets/UsersPage-BQfkVadn.js","assets/PermissionsPage-Do04Wumf.js","assets/SkillLevelsPage-FiQI02GA.js","assets/SpecializationsPage-DxWBIbyA.js","assets/WhatsAppGroupsPage-B3hNFCog.js","assets/WhatsAppTemplatesPage-DMEyUx0i.js","assets/ProfilePage-DQRz3DMS.js","assets/RegisterPage-CpGZ1QKp.js","assets/registrationService-DfHnWxZz.js","assets/TrackingPage-BtddMjT8.js","assets/RegistrationsPage-C5dT6cCG.js","assets/RegistrationDetailPage-R0Koqua6.js","assets/RegistrationAnalyticsPage-Wf4siHMX.js","assets/InvoicesPage-BI33BioE.js","assets/InvoiceDetailPage-Bwjimpe3.js","assets/InvoiceCreatePage-D5lb8jj0.js","assets/PaymentsPage-8nQQx5fJ.js","assets/CustomerLoginPage-BsK21tVe.js","assets/CustomerDashboardPage-BItEywHB.js","assets/CustomerPortalLayout-2HedmDZt.js","assets/CustomerInvoicesPage-p3R6DxhL.js","assets/CustomerTicketsPage-jBBTsQvE.js","assets/CustomerTicketDetailPage-C52o-hsE.js","assets/CustomerProfilePage-DcC5RoeA.js","assets/CustomerFAQPage-D4-y2hpS.js"])))=>i.map(i=>d[i]);
var yt=Object.defineProperty,bt=Object.defineProperties;var jt=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var wt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var Ie=(a,t,s)=>t in a?yt(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,C=(a,t)=>{for(var s in t||(t={}))wt.call(t,s)&&Ie(a,s,t[s]);if(Le)for(var s of Le(t))_t.call(t,s)&&Ie(a,s,t[s]);return a},R=(a,t)=>bt(a,jt(t));var w=(a,t,s)=>new Promise((r,n)=>{var i=c=>{try{p(s.next(c))}catch(h){n(h)}},l=c=>{try{p(s.throw(c))}catch(h){n(h)}},p=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,l);p((s=s.apply(a,t)).next())});import{a as A,j as e}from"./notifications-C-A1jlty.js";import{b as kt,r as o,f as Nt,N as $e,a as tt,L as St,O as Pt,g as at,u as Tt,h as Ct,i as j,j as me,B as At}from"./react-vendor-BQ7pSkNi.js";import{a as xe,b as Z,u as oe,Q as Et,c as Ot}from"./react-query-B7OIdD7u.js";import{z as I,am as Fe,ag as ce,K as pe,O as Rt,F as Dt,a2 as Mt,$ as Lt,ab as ge,r as st,B as We,a9 as rt,e as It,an as $t,j as Y,ao as Ft,a7 as ze,X as Ae,ap as je,W as we,aq as F,l as Wt,ar as zt,as as qt,T as nt,A as qe,C as le,I as Ve,a as Vt,t as Ee,m as Ut,at as Ht,au as Qt,v as Bt,k as Xt,ak as Kt,av as Jt,U as Gt,aw as Yt,ax as Ue,V as Zt,ay as ea,E as ta,ah as aa,ai as sa,az as ra,b as na,N as ia,aA as oa}from"./ui-vendor-ng1X_mIA.js";import{u as te,s as T,L as de,K as ee,A as ca}from"./customers-Bkp7alR1.js";import{u as la}from"./forms-Dmkgx8TD.js";import{r as da}from"./charts-CREYXqqm.js";import"./socket-BFcXWKeu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var _e={},He=kt;_e.createRoot=He.createRoot,_e.hydrateRoot=He.hydrateRoot;var it={exports:{}};it.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var ua=it.exports;const ma="modulepreload",ha=function(a){return"/"+a},Qe={},_=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),p=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(s.map(c=>{if(c=ha(c),c in Qe)return;Qe[c]=!0;const h=c.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${y}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":ma,h||(x.as="script"),x.crossOrigin="",x.href=c,p&&x.setAttribute("nonce",p),document.head.appendChild(x),h)return new Promise((d,u)=>{x.addEventListener("load",d),x.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=l,window.dispatchEvent(p),!p.defaultPrevented)throw l}return n.then(l=>{for(const p of l||[])p.status==="rejected"&&i(p.reason);return t().catch(i)})},V={getNotifications:(...t)=>w(void 0,[...t],function*(a={}){const s=new URLSearchParams;a.page&&s.append("page",a.page),a.limit&&s.append("limit",a.limit),a.type&&s.append("type",a.type),a.is_read!==void 0&&s.append("is_read",a.is_read),a.priority&&s.append("priority",a.priority),a.include_archived&&s.append("include_archived",a.include_archived);const r=s.toString(),n=`/notifications${r?`?${r}`:""}`;return A.get(n)}),getNotification:a=>w(void 0,null,function*(){return A.get(`/notifications/${a}`)}),markAsRead:a=>w(void 0,null,function*(){return A.patch(`/notifications/${a}/read`)}),markAllAsRead:()=>w(void 0,null,function*(){return A.patch("/notifications/read-all")}),archive:a=>w(void 0,null,function*(){return A.patch(`/notifications/${a}/archive`)}),delete:a=>w(void 0,null,function*(){return A.delete(`/notifications/${a}`)}),getSettings:()=>w(void 0,null,function*(){return A.get("/notifications/settings/preferences")}),updateSettings:a=>w(void 0,null,function*(){return A.put("/notifications/settings/preferences",a)}),cleanupExpired:()=>w(void 0,null,function*(){return A.delete("/notifications/cleanup/expired")}),create:a=>w(void 0,null,function*(){return A.post("/notifications",a)})};class fa{constructor(){this.permission="default",this.enabled=!1,this.checkPermission()}checkPermission(){return"Notification"in window?(this.permission=Notification.permission,this.enabled=this.permission==="granted",this.enabled):(console.warn("⚠️ Browser does not support desktop notifications"),!1)}requestPermission(){return w(this,null,function*(){if(!("Notification"in window))return console.warn("⚠️ Browser does not support desktop notifications"),!1;if(Notification.permission==="granted")return this.enabled=!0,!0;try{const t=yield Notification.requestPermission();return this.permission=t,this.enabled=t==="granted",this.enabled?(console.log("✅ Desktop notifications enabled"),this.show({title:"Notifikasi Aktif!",body:"Anda akan menerima notifikasi desktop untuk update penting",icon:"/aglis-logo.svg",tag:"welcome"})):console.log("❌ Desktop notifications denied"),this.enabled}catch(t){return console.error("Error requesting notification permission:",t),!1}})}show(t){if(!this.enabled)return console.log("Desktop notifications not enabled"),null;try{const{title:s,body:r,icon:n="/aglis-logo.svg",tag:i,requireInteraction:l=!1,onClick:p,data:c={}}=t,h=new Notification(s,{body:r,icon:n,tag:i,requireInteraction:l,badge:"/aglis-logo.svg",vibrate:[200,100,200],data:c,silent:!1});return p?h.onclick=y=>{y.preventDefault(),window.focus(),p(y,c),h.close()}:h.onclick=y=>{y.preventDefault(),window.focus(),h.close()},l||setTimeout(()=>{h.close()},1e4),h}catch(s){return console.error("Error showing desktop notification:",s),null}}showNewTicket(t){return this.show({title:"🎫 Tiket Baru",body:`${t.ticket_number}: ${t.title||"No title"}`,tag:`ticket-${t.id}`,requireInteraction:!0,onClick:()=>{window.location.href=`/tickets/${t.id}`},data:{type:"ticket",id:t.id}})}showTicketAssignment(t){return this.show({title:"🔔 Tiket Ditugaskan",body:`${t.ticket_number} telah ditugaskan kepada Anda`,tag:`assignment-${t.id}`,requireInteraction:!0,onClick:()=>{window.location.href=`/tickets/${t.id}`},data:{type:"assignment",id:t.id}})}showNewRegistration(t){return this.show({title:"🎉 Pendaftar Baru!",body:`${t.full_name} - ${t.phone}`,tag:`registration-${t.id}`,onClick:()=>{window.location.href="/registrations"},data:{type:"registration",id:t.id}})}showSLAWarning(t){return this.show({title:"⚠️ SLA Warning!",body:`Tiket ${t.ticket_number} mendekati deadline SLA`,tag:`sla-${t.id}`,requireInteraction:!0,onClick:()=>{window.location.href=`/tickets/${t.id}`},data:{type:"sla_warning",id:t.id}})}showPaymentReceived(t){return this.show({title:"💵 Pembayaran Diterima",body:`Rp ${(t.amount||0).toLocaleString("id-ID")} - ${t.invoice_number||"Unknown"}`,tag:`payment-${t.id}`,onClick:()=>{t.invoice_id&&(window.location.href=`/invoices/${t.invoice_id}`)},data:{type:"payment",id:t.id}})}showSystemAlert(t){return this.show({title:"🚨 System Alert",body:t.message||"System alert detected",tag:`alert-${t.id||Date.now()}`,requireInteraction:!0,data:C({type:"system_alert"},t)})}showCustom(t,s,r={}){return this.show(C({title:t,body:s},r))}clearByTag(t){console.log(`Notification tag "${t}" will auto-close`)}isSupported(){return"Notification"in window}getPermission(){return this.permission}isEnabled(){return this.enabled}}const H=new fa,ot=o.createContext(),pa=()=>{const a=o.useContext(ot);if(!a)throw new Error("useNotifications must be used within a NotificationProvider");return a},ga=({children:a})=>{const{user:t}=te(),s=xe(),r=o.useRef(!1),n=o.useRef(new Set),[i,l]=o.useState([]),[p,c]=o.useState(0),[h,y]=o.useState(!1),[x,d]=o.useState(!1),[u,m]=o.useState({email_notifications:!0,push_notifications:!0,sound_notifications:!0,desktop_notifications:!0,notification_types:{ticket_assigned:!0,ticket_updated:!0,ticket_completed:!0,system_alert:!0,technician_status:!0,new_ticket:!0,new_registration:!0,payment_received:!0,sla_warning:!0}}),{data:k,isLoading:D,refetch:N}=Z(["notifications",{page:1,limit:50,is_read:!1}],()=>V.getNotifications({page:1,limit:50,is_read:!1}),{enabled:!!t,refetchInterval:3e4,onSuccess:g=>{var v;(v=g==null?void 0:g.data)!=null&&v.notifications&&(l(g.data.notifications),c(g.data.unreadCount||0))}}),{data:O}=Z(["notification-settings"],V.getSettings,{enabled:!!t,onSuccess:g=>{var v;(v=g==null?void 0:g.data)!=null&&v.settings&&m(g.data.settings)}}),P=o.useCallback(g=>{const v=`${g.id||g.type}-${g.timestamp||Date.now()}`;if(n.current.has(v)){console.log("⚠️ Duplicate notification ignored:",v);return}if(n.current.add(v),setTimeout(()=>{n.current.delete(v)},1e4),console.log("🔔 Received notification:",g),l(E=>[g,...E]),c(E=>E+1),u.push_notifications&&U(g.type)&&X(g),u.sound_notifications&&U(g.type)){let E="default";g.type==="system_alert"||g.type==="sla_warning"?E="urgent":g.type==="ticket_completed"||g.type==="payment_received"?E="success":(g.type==="ticket_assigned"||g.type==="new_ticket")&&(E="warning"),S(E)}u.desktop_notifications&&x&&U(g.type)&&f(g),s.invalidateQueries(["notifications"])},[u,s]),M=o.useCallback(g=>{console.log("🎫 Ticket updated:",g),s.invalidateQueries(["tickets"]),s.invalidateQueries(["ticket",g.ticketId]),(g.assignedTo===(t==null?void 0:t.id)||g.updatedBy===(t==null?void 0:t.id))&&I.success(`Ticket #${g.ticketId} updated`)},[s,t]),$=o.useCallback(g=>{console.log("👷 Technician status changed:",g),s.invalidateQueries(["technicians"]),s.invalidateQueries(["technician-stats"]),((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="supervisor")&&I.info(`Technician status updated: ${g.status}`)},[s,t]),G=o.useCallback(g=>{var v,E;console.log("👷 New technician created:",g),s.invalidateQueries(["technicians"]),s.invalidateQueries(["technician-stats"]),window.dispatchEvent(new CustomEvent("technician-created",{detail:g})),((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="supervisor")&&I.success(`New technician added: ${((v=g.technician)==null?void 0:v.employee_id)||((E=g.technician)==null?void 0:E.full_name)}`)},[s,t]),L=o.useCallback(g=>{console.log("👤 New user created:",g),g.technician&&(s.invalidateQueries(["technicians"]),s.invalidateQueries(["technician-stats"]),window.dispatchEvent(new CustomEvent("technician-created",{detail:g}))),s.invalidateQueries(["users"])},[s]),z=o.useCallback(g=>{console.log("⚠️ System alert:",g);const v={duration:g.priority==="urgent"?1e4:5e3,style:{background:g.priority==="urgent"?"#ef4444":"#f59e0b",color:"white"}};I(g.message,v)},[]),U=g=>{var v;return((v=u.notification_types)==null?void 0:v[g])!==!1},X=g=>{const v={duration:5e3,style:{background:g.priority==="high"?"#ef4444":"#3b82f6",color:"white"}};I(g.message,v)},f=g=>{try{const{type:v,title:E,message:re,data:b}=g;switch(v){case"new_ticket":H.showNewTicket({id:b==null?void 0:b.ticket_id,ticket_number:(b==null?void 0:b.ticket_number)||"N/A",title:re});break;case"ticket_assigned":H.showTicketAssignment({id:b==null?void 0:b.ticket_id,ticket_number:(b==null?void 0:b.ticket_number)||"N/A"});break;case"new_registration":H.showNewRegistration({id:b==null?void 0:b.registration_id,full_name:(b==null?void 0:b.full_name)||"New Customer",phone:(b==null?void 0:b.phone)||""});break;case"sla_warning":H.showSLAWarning({id:b==null?void 0:b.ticket_id,ticket_number:(b==null?void 0:b.ticket_number)||"N/A"});break;case"payment_received":H.showPaymentReceived({id:b==null?void 0:b.payment_id,invoice_id:b==null?void 0:b.invoice_id,invoice_number:b==null?void 0:b.invoice_number,amount:b==null?void 0:b.amount});break;case"system_alert":H.showSystemAlert({id:b==null?void 0:b.alert_id,message:re});break;default:H.showCustom(E,re,{tag:`notif-${g.id||Date.now()}`,data:b})}}catch(v){console.warn("Could not show desktop notification:",v)}},S=(g="default")=>{try{const v=new(window.AudioContext||window.webkitAudioContext),E={urgent:[{freq:880,duration:.1},{freq:1046,duration:.15}],success:[{freq:523,duration:.1},{freq:659,duration:.1},{freq:784,duration:.15}],warning:[{freq:659,duration:.15},{freq:523,duration:.15}],default:[{freq:659,duration:.12},{freq:784,duration:.18}]},re=E[g]||E.default;let b=v.currentTime;re.forEach(({freq:vt,duration:ye})=>{const ne=v.createOscillator(),ie=v.createGain();ne.connect(ie),ie.connect(v.destination),ne.frequency.value=vt,ne.type="sine",ie.gain.setValueAtTime(0,b),ie.gain.linearRampToValueAtTime(.2,b+.01),ie.gain.exponentialRampToValueAtTime(.01,b+ye),ne.start(b),ne.stop(b+ye),b+=ye+.05})}catch(v){console.warn("Could not play notification sound:",v)}};o.useEffect(()=>{if(!t)return;w(void 0,null,function*(){if(H.isSupported()){const v=H.getPermission();v==="default"?setTimeout(()=>w(void 0,null,function*(){console.log("🔔 Requesting desktop notification permission...");const E=yield H.requestPermission();d(E),console.log(E?"✅ Desktop notifications enabled":"❌ Desktop notifications denied by user")}),2e3):v==="granted"?(d(!0),console.log("✅ Desktop notifications already granted")):console.log("❌ Desktop notifications not permitted")}else console.log("⚠️ Desktop notifications not supported by browser")})},[t]),o.useEffect(()=>{if(!t)return;console.log("🔗 Initializing Socket.IO connection..."),T.connect(t);const v=setInterval(()=>{const E=T.getConnectionStatus();y(E.isConnected)},1e3);return()=>{clearInterval(v)}},[t]),o.useEffect(()=>{if(!(!h||r.current))return console.log("📡 Setting up socket event listeners..."),r.current=!0,T.on("notification",P),T.on("ticket_updated",M),T.on("technician_status_changed",$),T.on("technician-created",G),T.on("user-created",L),T.on("system_alert",z),()=>{console.log("🔌 Cleaning up socket event listeners..."),r.current=!1,T.off("notification",P),T.off("ticket_updated",M),T.off("technician_status_changed",$),T.off("technician-created",G),T.off("user-created",L),T.off("system_alert",z)}},[h,P,M,$,G,L,z]),o.useEffect(()=>()=>{console.log("🛑 Disconnecting socket on unmount..."),T.disconnect()},[]);const xt={notifications:i,unreadCount:p,isSocketConnected:h,settings:u,isLoading:D,desktopNotificationsEnabled:x,requestDesktopPermission:()=>H.requestPermission().then(d),markAsRead:g=>w(void 0,null,function*(){try{yield V.markAsRead(g),l(v=>v.map(E=>E.id===g?R(C({},E),{is_read:!0,read_at:new Date().toISOString()}):E)),c(v=>Math.max(0,v-1)),s.invalidateQueries(["notifications"])}catch(v){console.error("Error marking notification as read:",v),I.error("Failed to mark notification as read")}}),markAllAsRead:()=>w(void 0,null,function*(){try{yield V.markAllAsRead(),l(g=>g.map(v=>R(C({},v),{is_read:!0,read_at:new Date().toISOString()}))),c(0),s.invalidateQueries(["notifications"]),I.success("All notifications marked as read")}catch(g){console.error("Error marking all notifications as read:",g),I.error("Failed to mark all notifications as read")}}),archiveNotification:g=>w(void 0,null,function*(){try{yield V.archiveNotification(g),l(v=>v.filter(E=>E.id!==g)),s.invalidateQueries(["notifications"]),I.success("Notification archived")}catch(v){console.error("Error archiving notification:",v),I.error("Failed to archive notification")}}),updateSettings:g=>w(void 0,null,function*(){try{yield V.updateSettings(g),m(v=>C(C({},v),g)),s.invalidateQueries(["notification-settings"]),I.success("Notification settings updated")}catch(v){console.error("Error updating notification settings:",v),I.error("Failed to update notification settings")}}),refetchNotifications:N,joinRoom:g=>{h&&T.joinRoom(g)},leaveRoom:g=>{h&&T.leaveRoom(g)},emitTicketUpdate:g=>{h&&T.emitTicketUpdate(g)},emitTechnicianStatusUpdate:g=>{h&&T.emitTechnicianStatusUpdate(g)},reconnect:()=>T.reconnect(t),disconnect:()=>T.disconnect()};return e.jsx(ot.Provider,{value:xt,children:a})},xa={getAllPermissions:()=>w(void 0,null,function*(){return yield A.get("/permissions/all")}),getRolePermissions:a=>w(void 0,null,function*(){return yield A.get(`/permissions/role/${a}`)}),getPermissionMatrix:()=>w(void 0,null,function*(){return yield A.get("/permissions/matrix")}),updateRolePermissions:(a,t)=>w(void 0,null,function*(){return yield A.put(`/permissions/role/${a}`,{permissions:t})}),getMyPermissions:()=>w(void 0,null,function*(){return yield A.get("/permissions/me")})},va=o.createContext(),ya=({children:a})=>{const{user:t}=te(),[s,r]=o.useState([]),{data:n,isLoading:i}=Z(["permissions",t==null?void 0:t.role],()=>xa.getMyPermissions(),{enabled:!!t,onSuccess:d=>{var k;const u=((k=d.data)==null?void 0:k.permissions)||[],m=Array.isArray(u)?u.map(D=>typeof D=="string"?D:D.name):[];r(m)},onError:d=>{console.error("Failed to load permissions:",d),r([])}}),l=d=>(t==null?void 0:t.role)==="admin"?!0:s.includes(d),p=(...d)=>(t==null?void 0:t.role)==="admin"?!0:d.some(u=>s.includes(u)),x={permissions:s,isLoading:i,hasPermission:l,hasAnyPermission:p,hasAllPermissions:(...d)=>(t==null?void 0:t.role)==="admin"?!0:d.every(u=>s.includes(u)),can:(d,u)=>{const m=`${d}.${u}`;return l(m)},canAccessPage:d=>{const m={dashboard:["dashboard.view"],analytics:["analytics.view"],tickets:["tickets.view"],customers:["customers.view"],registrations:["registrations.view"],technicians:["technicians.view"],inventory:["inventory.view"],users:["users.view"],permissions:["permissions.view"]}[d];return m?p(...m):!0}};return e.jsx(va.Provider,{value:x,children:a})},ba=({isOpen:a,onClose:t,collapsed:s})=>{var z,U,X;const{user:r}=te();Nt();const[n,i]=o.useState(null),[l,p]=o.useState(!0),[c,h]=o.useState(!1),[y,x]=o.useState(!1),[d,u]=o.useState(!1),[m,k]=o.useState(!1),[D,N]=o.useState(!1),[O,P]=o.useState(!1),[M,$]=o.useState(!1),L=[{id:"core-operations",section:"Core Operations",icon:Fe,roles:["admin","supervisor","manager","noc","technician","customer_service"],isOpen:l,setIsOpen:p,items:[{name:"Dashboard",href:"/dashboard",icon:Fe,roles:["admin","supervisor","manager","noc","technician","customer_service"]},{name:"Tickets",href:"/tickets",icon:ce,roles:["admin","supervisor","manager","noc","technician","customer_service"]}]},{id:"customer-management",section:"Customer Management",icon:pe,roles:["admin","supervisor","manager","noc","customer_service"],isOpen:c,setIsOpen:h,items:[{name:"Customers",href:"/customers",icon:pe,roles:["admin","supervisor","manager","noc","customer_service"]},{name:"Registrations",href:"/registrations",icon:Rt,roles:["admin","supervisor","manager","customer_service"]}]},{id:"financial-management",section:"Financial",icon:Lt,roles:["admin","supervisor","customer_service"],isOpen:y,setIsOpen:x,items:[{name:"Invoices",href:"/invoices",icon:Dt,roles:["admin","supervisor","customer_service"]},{name:"Payments",href:"/payments",icon:Mt,roles:["admin","supervisor","customer_service"]}]},{id:"operations",section:"Operations",icon:ge,roles:["admin","supervisor","manager","noc","technician"],isOpen:d,setIsOpen:u,items:[{name:"Technicians",href:"/technicians",icon:ge,roles:["admin","supervisor","manager","noc"]},{name:"Inventory",href:"/inventory-stock",icon:st,roles:["admin","supervisor","manager","noc","technician"]}]},{id:"analytics-reports",section:"Analytics & Reports",icon:It,roles:["admin","supervisor","manager","noc"],isOpen:m,setIsOpen:k,items:[{name:"Analytics",href:"/analytics",icon:We,roles:["admin","supervisor","manager","noc"]},{name:"Reg Analytics",href:"/registration-analytics",icon:We,roles:["admin","supervisor","manager"]},{name:"Performance",href:"/performance",icon:rt,roles:["admin","manager"]}]},{id:"system-admin",section:"System & Admin",icon:ze,roles:["admin","supervisor"],isOpen:D,setIsOpen:N,items:[{name:"Master Data",icon:$t,roles:["admin","supervisor"],hasSubmenu:!0,submenu:[{name:"Service Types",href:"/master-data/service-types"},{name:"Service Categories",href:"/master-data/service-categories"},{name:"Paket Langganan",href:"/master-data/packages"},{name:"Price List",href:"/master-data/price-list"},{name:"Equipment",href:"/master-data/equipment"},{name:"ODP",href:"/master-data/odp"},{name:"Skill Levels",href:"/master-data/skill-levels"},{name:"Specializations",href:"/master-data/specializations"},{name:"WhatsApp Groups",href:"/master-data/whatsapp-groups"},{name:"WhatsApp Templates",href:"/master-data/whatsapp-templates"}]},{name:"Notifications",icon:Y,roles:["admin","supervisor"],hasSubmenu:!0,submenu:[{name:"Templates",href:"/notifications/templates"},{name:"Analytics",href:"/notifications/analytics"},{name:"Settings",href:"/notifications/settings"}]},{name:"Users",href:"/users",icon:Ft,roles:["admin","supervisor"]},{name:"Permissions",href:"/permissions",icon:ze,roles:["admin"]}]}].map(f=>R(C({},f),{items:f.items.filter(S=>S.roles.includes(r==null?void 0:r.role))})).filter(f=>f.roles.includes(r==null?void 0:r.role)&&f.items.length>0);return e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-20 lg:hidden",onClick:t}),e.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-30 bg-white shadow-lg transform transition-all duration-300 ease-in-out
        lg:translate-x-0 lg:static lg:inset-0
        ${a?"translate-x-0":"-translate-x-full"}
        ${s?"lg:w-20":"lg:w-64"}
        w-64
      `,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:"/aglis-logo.svg",alt:"AGLIS Net",className:"h-8 w-8"})}),!s&&e.jsx("h2",{className:"ml-3 text-lg font-semibold text-gray-800 whitespace-nowrap",children:"AGLIS"})]}),e.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:e.jsx(Ae,{className:"h-5 w-5"})})]}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto h-[calc(100vh-8rem)]",children:L.map(f=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>f.setIsOpen(!f.isOpen),className:`
                  w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md
                  transition-colors duration-150
                  ${s?"justify-center":""}
                  text-gray-600 hover:bg-gray-100 hover:text-gray-900
                `,onMouseEnter:()=>!s&&i(f.id),onMouseLeave:()=>i(null),children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(f.icon,{className:`flex-shrink-0 h-5 w-5 ${s?"":"mr-3"}`}),!s&&e.jsx("span",{className:"truncate font-semibold text-xs uppercase tracking-wide",children:f.section})]}),!s&&(f.isOpen?e.jsx(je,{className:"h-4 w-4 flex-shrink-0"}):e.jsx(we,{className:"h-4 w-4 flex-shrink-0"}))]}),f.isOpen&&!s&&e.jsx("div",{className:"mt-1 space-y-1 ml-2",children:f.items.map(S=>{if(S.hasSubmenu){const ae=S.name==="Master Data"?O:M,De=S.name==="Master Data"?P:$;return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>De(!ae),className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S.icon,{className:"mr-3 flex-shrink-0 h-4 w-4"}),e.jsx("span",{children:S.name})]}),ae?e.jsx(je,{className:"h-4 w-4"}):e.jsx(we,{className:"h-4 w-4"})]}),ae&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:S.submenu.map(ue=>e.jsx($e,{to:ue.href,className:({isActive:Me})=>`
                                    flex items-center px-3 py-2 text-sm rounded-md transition-colors
                                    ${Me?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                                  `,children:e.jsx("span",{className:"truncate",children:ue.name})},ue.href))})]},S.name)}return e.jsxs($e,{to:S.href,className:({isActive:ae})=>`
                          flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors
                          ${ae?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                        `,children:[e.jsx(S.icon,{className:"mr-3 flex-shrink-0 h-4 w-4"}),e.jsx("span",{className:"truncate",children:S.name})]},S.href)})}),s&&n===f.id&&e.jsx("div",{className:"absolute left-20 bg-gray-900 text-white px-2 py-1 rounded text-xs whitespace-nowrap z-50",children:f.section})]},f.id))}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 ${s?"mx-auto":""}`,children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold",children:((z=r==null?void 0:r.full_name)==null?void 0:z.charAt(0))||((U=r==null?void 0:r.username)==null?void 0:U.charAt(0))||"U"})}),!s&&e.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:(r==null?void 0:r.full_name)||(r==null?void 0:r.username)}),e.jsx("p",{className:"text-xs text-gray-500 truncate capitalize",children:(X=r==null?void 0:r.role)==null?void 0:X.replace("_"," ")})]})]})})]})]})},ja=(a={})=>{const t=xe(),[s,r]=o.useState(0),{data:n,isLoading:i,error:l,refetch:p}=Z(["notifications",a],()=>V.getNotifications(a),{refetchOnWindowFocus:!1,staleTime:3e4,select:d=>d.data});o.useEffect(()=>{(n==null?void 0:n.unreadCount)!==void 0&&r(n.unreadCount)},[n==null?void 0:n.unreadCount]),o.useEffect(()=>{T.isConnected||T.connect();const d=m=>{console.log("🔔 [useNotifications] New notification received:",m),t.setQueryData(["notifications",a],k=>k&&R(C({},k),{notifications:[m,...k.notifications||[]],unreadCount:(k.unreadCount||0)+1})),r(k=>k+1),(m.priority==="high"||m.priority==="urgent")&&F(m.title,{icon:"🔔",duration:5e3})},u=m=>{console.log("🔄 [useNotifications] Notification update received:",m),p()};return T.on("notification",d),T.on("notification_updated",u),()=>{T.off("notification",d),T.off("notification_updated",u)}},[t,a,p]);const c=oe(d=>V.markAsRead(d),{onSuccess:(d,u)=>{t.setQueryData(["notifications",a],m=>m&&R(C({},m),{notifications:(m.notifications||[]).map(k=>k.id===u?R(C({},k),{is_read:!0,read_at:new Date().toISOString()}):k),unreadCount:Math.max(0,(m.unreadCount||0)-1)})),r(m=>Math.max(0,m-1))},onError:d=>{console.error("Failed to mark notification as read:",d),F.error("Gagal menandai notifikasi sebagai dibaca")}}),h=oe(()=>V.markAllAsRead(),{onSuccess:()=>{t.setQueryData(["notifications",a],d=>d&&R(C({},d),{notifications:(d.notifications||[]).map(u=>R(C({},u),{is_read:!0,read_at:new Date().toISOString()})),unreadCount:0})),r(0),F.success("Semua notifikasi ditandai sebagai dibaca")},onError:d=>{console.error("Failed to mark all notifications as read:",d),F.error("Gagal menandai semua notifikasi sebagai dibaca")}}),y=oe(d=>V.archive(d),{onSuccess:(d,u)=>{t.setQueryData(["notifications",a],m=>m&&R(C({},m),{notifications:(m.notifications||[]).filter(k=>k.id!==u),unreadCount:Math.max(0,(m.unreadCount||0)-1)})),r(m=>Math.max(0,m-1)),F.success("Notifikasi diarsipkan")},onError:d=>{console.error("Failed to archive notification:",d),F.error("Gagal mengarsipkan notifikasi")}}),x=oe(d=>V.delete(d),{onSuccess:(d,u)=>{t.setQueryData(["notifications",a],m=>m&&R(C({},m),{notifications:(m.notifications||[]).filter(k=>k.id!==u),unreadCount:Math.max(0,(m.unreadCount||0)-1)})),r(m=>Math.max(0,m-1)),F.success("Notifikasi dihapus")},onError:d=>{console.error("Failed to delete notification:",d),F.error("Gagal menghapus notifikasi")}});return{notifications:(n==null?void 0:n.notifications)||[],pagination:n==null?void 0:n.pagination,unreadCount:s,isLoading:i,error:l,refetch:p,markAsRead:c.mutate,markAllAsRead:h.mutate,archive:y.mutate,delete:x.mutate,isMarkingAsRead:c.isLoading,isMarkingAllAsRead:h.isLoading,isArchiving:y.isLoading,isDeleting:x.isLoading}},wa=()=>{const a=xe(),{data:t,isLoading:s,error:r}=Z(["notification-settings"],()=>V.getSettings(),{select:i=>{var l;return(l=i.data)==null?void 0:l.settings}}),n=oe(i=>V.updateSettings(i),{onSuccess:i=>{a.setQueryData(["notification-settings"],{data:{settings:i.data.settings}}),F.success("Pengaturan notifikasi berhasil diperbarui")},onError:i=>{console.error("Failed to update notification settings:",i),F.error("Gagal memperbarui pengaturan notifikasi")}});return{settings:t,isLoading:s,error:r,updateSettings:n.mutate,isUpdating:n.isLoading}},_a=()=>{const[a,t]=o.useState(0),{data:s}=Z(["notifications","unread-count"],()=>V.getNotifications({limit:1,is_read:!1}),{refetchInterval:3e4,select:r=>{var n;return((n=r.data)==null?void 0:n.unreadCount)||0}});return o.useEffect(()=>{s!==void 0&&t(s)},[s]),o.useEffect(()=>{T.isConnected||T.connect();const r=()=>{t(i=>i+1)},n=()=>{t(s||0)};return T.on("notification",r),T.on("notification_updated",n),()=>{T.off("notification",r),T.off("notification_updated",n)}},[s]),a};function ke(a){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(a)}function B(a,t){if(t.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+t.length+" present")}function W(a){B(1,arguments);var t=Object.prototype.toString.call(a);return a instanceof Date||ke(a)==="object"&&t==="[object Date]"?new Date(a.getTime()):typeof a=="number"||t==="[object Number]"?new Date(a):((typeof a=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var ka={};function Na(){return ka}function Be(a){var t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),a.getTime()-t.getTime()}function fe(a,t){B(2,arguments);var s=W(a),r=W(t),n=s.getTime()-r.getTime();return n<0?-1:n>0?1:n}function Sa(a,t){B(2,arguments);var s=W(a),r=W(t),n=s.getFullYear()-r.getFullYear(),i=s.getMonth()-r.getMonth();return n*12+i}function Pa(a,t){return B(2,arguments),W(a).getTime()-W(t).getTime()}var Ta={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Ca="trunc";function Aa(a){return Ta[Ca]}function Ea(a){B(1,arguments);var t=W(a);return t.setHours(23,59,59,999),t}function Oa(a){B(1,arguments);var t=W(a),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function Ra(a){B(1,arguments);var t=W(a);return Ea(t).getTime()===Oa(t).getTime()}function Da(a,t){B(2,arguments);var s=W(a),r=W(t),n=fe(s,r),i=Math.abs(Sa(s,r)),l;if(i<1)l=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-n*i);var p=fe(s,r)===-n;Ra(W(a))&&i===1&&fe(a,r)===1&&(p=!1),l=n*(i-Number(p))}return l===0?0:l}function Ma(a,t,s){B(2,arguments);var r=Pa(a,t)/1e3;return Aa()(r)}var La={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ia=function(t,s,r){var n,i=La[t];return typeof i=="string"?n=i:s===1?n=i.one:n=i.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function se(a){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.width?String(t.width):a.defaultWidth,r=a.formats[s]||a.formats[a.defaultWidth];return r}}var $a={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fa={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Wa={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},za={date:se({formats:$a,defaultWidth:"full"}),time:se({formats:Fa,defaultWidth:"full"}),dateTime:se({formats:Wa,defaultWidth:"full"})},qa={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Va=function(t,s,r,n){return qa[t]};function K(a){return function(t,s){var r=s!=null&&s.context?String(s.context):"standalone",n;if(r==="formatting"&&a.formattingValues){var i=a.defaultFormattingWidth||a.defaultWidth,l=s!=null&&s.width?String(s.width):i;n=a.formattingValues[l]||a.formattingValues[i]}else{var p=a.defaultWidth,c=s!=null&&s.width?String(s.width):a.defaultWidth;n=a.values[c]||a.values[p]}var h=a.argumentCallback?a.argumentCallback(t):t;return n[h]}}var Ua={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ha={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qa={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ba={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ka={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ja=function(t,s){var r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ga={ordinalNumber:Ja,era:K({values:Ua,defaultWidth:"wide"}),quarter:K({values:Ha,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:K({values:Qa,defaultWidth:"wide"}),day:K({values:Ba,defaultWidth:"wide"}),dayPeriod:K({values:Xa,defaultWidth:"wide",formattingValues:Ka,defaultFormattingWidth:"wide"})};function J(a){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=s.width,n=r&&a.matchPatterns[r]||a.matchPatterns[a.defaultMatchWidth],i=t.match(n);if(!i)return null;var l=i[0],p=r&&a.parsePatterns[r]||a.parsePatterns[a.defaultParseWidth],c=Array.isArray(p)?Za(p,function(x){return x.test(l)}):Ya(p,function(x){return x.test(l)}),h;h=a.valueCallback?a.valueCallback(c):c,h=s.valueCallback?s.valueCallback(h):h;var y=t.slice(l.length);return{value:h,rest:y}}}function Ya(a,t){for(var s in a)if(a.hasOwnProperty(s)&&t(a[s]))return s}function Za(a,t){for(var s=0;s<a.length;s++)if(t(a[s]))return s}function ct(a){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(a.matchPattern);if(!r)return null;var n=r[0],i=t.match(a.parsePattern);if(!i)return null;var l=a.valueCallback?a.valueCallback(i[0]):i[0];l=s.valueCallback?s.valueCallback(l):l;var p=t.slice(n.length);return{value:l,rest:p}}}var es=/^(\d+)(th|st|nd|rd)?/i,ts=/\d+/i,as={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ss={any:[/^b/i,/^(a|c)/i]},rs={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ns={any:[/1/i,/2/i,/3/i,/4/i]},is={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},os={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cs={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ls={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ds={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},us={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ms={ordinalNumber:ct({matchPattern:es,parsePattern:ts,valueCallback:function(t){return parseInt(t,10)}}),era:J({matchPatterns:as,defaultMatchWidth:"wide",parsePatterns:ss,defaultParseWidth:"any"}),quarter:J({matchPatterns:rs,defaultMatchWidth:"wide",parsePatterns:ns,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:J({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any"}),day:J({matchPatterns:cs,defaultMatchWidth:"wide",parsePatterns:ls,defaultParseWidth:"any"}),dayPeriod:J({matchPatterns:ds,defaultMatchWidth:"any",parsePatterns:us,defaultParseWidth:"any"})},hs={code:"en-US",formatDistance:Ia,formatLong:za,formatRelative:Va,localize:Ga,match:ms,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lt(a,t){if(a==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=t[s]);return a}function fs(a){return lt({},a)}var Xe=1440,ps=2520,be=43200,gs=86400;function xs(a,t,s){var r,n;B(2,arguments);var i=Na(),l=(r=(n=s==null?void 0:s.locale)!==null&&n!==void 0?n:i.locale)!==null&&r!==void 0?r:hs;if(!l.formatDistance)throw new RangeError("locale must contain formatDistance property");var p=fe(a,t);if(isNaN(p))throw new RangeError("Invalid time value");var c=lt(fs(s),{addSuffix:!!(s!=null&&s.addSuffix),comparison:p}),h,y;p>0?(h=W(t),y=W(a)):(h=W(a),y=W(t));var x=Ma(y,h),d=(Be(y)-Be(h))/1e3,u=Math.round((x-d)/60),m;if(u<2)return s!=null&&s.includeSeconds?x<5?l.formatDistance("lessThanXSeconds",5,c):x<10?l.formatDistance("lessThanXSeconds",10,c):x<20?l.formatDistance("lessThanXSeconds",20,c):x<40?l.formatDistance("halfAMinute",0,c):x<60?l.formatDistance("lessThanXMinutes",1,c):l.formatDistance("xMinutes",1,c):u===0?l.formatDistance("lessThanXMinutes",1,c):l.formatDistance("xMinutes",u,c);if(u<45)return l.formatDistance("xMinutes",u,c);if(u<90)return l.formatDistance("aboutXHours",1,c);if(u<Xe){var k=Math.round(u/60);return l.formatDistance("aboutXHours",k,c)}else{if(u<ps)return l.formatDistance("xDays",1,c);if(u<be){var D=Math.round(u/Xe);return l.formatDistance("xDays",D,c)}else if(u<gs)return m=Math.round(u/be),l.formatDistance("aboutXMonths",m,c)}if(m=Da(y,h),m<12){var N=Math.round(u/be);return l.formatDistance("xMonths",N,c)}else{var O=m%12,P=Math.floor(m/12);return O<3?l.formatDistance("aboutXYears",P,c):O<9?l.formatDistance("overXYears",P,c):l.formatDistance("almostXYears",P+1,c)}}function dt(a,t){return B(1,arguments),xs(a,Date.now(),t)}var vs={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},ys=function(t,s,r){var n,i=vs[t];return typeof i=="string"?n=i:s===1?n=i.one:n=i.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dalam waktu "+n:n+" yang lalu":n},bs={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},js={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},ws={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_s={date:se({formats:bs,defaultWidth:"full"}),time:se({formats:js,defaultWidth:"full"}),dateTime:se({formats:ws,defaultWidth:"full"})},ks={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},Ns=function(t,s,r,n){return ks[t]},Ss={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},Ps={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},Ts={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},Cs={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},As={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},Es={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},Os=function(t,s){var r=Number(t);return"ke-"+r},Rs={ordinalNumber:Os,era:K({values:Ss,defaultWidth:"wide"}),quarter:K({values:Ps,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:K({values:Ts,defaultWidth:"wide"}),day:K({values:Cs,defaultWidth:"wide"}),dayPeriod:K({values:As,defaultWidth:"wide",formattingValues:Es,defaultFormattingWidth:"wide"})},Ds=/^ke-(\d+)?/i,Ms=/\d+/i,Ls={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},Is={any:[/^s/i,/^(m|e)/i]},$s={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},Fs={any:[/1/i,/2/i,/3/i,/4/i]},Ws={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},zs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},qs={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},Vs={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},Us={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},Hs={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},Qs={ordinalNumber:ct({matchPattern:Ds,parsePattern:Ms,valueCallback:function(t){return parseInt(t,10)}}),era:J({matchPatterns:Ls,defaultMatchWidth:"wide",parsePatterns:Is,defaultParseWidth:"any"}),quarter:J({matchPatterns:$s,defaultMatchWidth:"wide",parsePatterns:Fs,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:J({matchPatterns:Ws,defaultMatchWidth:"wide",parsePatterns:zs,defaultParseWidth:"any"}),day:J({matchPatterns:qs,defaultMatchWidth:"wide",parsePatterns:Vs,defaultParseWidth:"any"}),dayPeriod:J({matchPatterns:Us,defaultMatchWidth:"any",parsePatterns:Hs,defaultParseWidth:"any"})},ut={code:"id",formatDistance:ys,formatLong:_s,formatRelative:Ns,localize:Rs,match:Qs,options:{weekStartsOn:1,firstWeekContainsDate:1}};const Bs=({isOpen:a,onClose:t})=>{const[s,r]=o.useState("all"),[n,i]=o.useState(new Set),[l,p]=o.useState(!1),[c,h]=o.useState({type:"",priority:"",is_read:void 0}),{notifications:y,pagination:x,unreadCount:d,isLoading:u,markAsRead:m,markAllAsRead:k,archive:D,delete:N,isMarkingAllAsRead:O}=ja({type:c.type||void 0,priority:c.priority||void 0,is_read:c.is_read});o.useEffect(()=>{const f=S=>{S.key==="Escape"&&t()};if(a)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[a,t]);const P=y.filter(f=>{switch(s){case"unread":return!f.is_read;case"archived":return f.is_archived;case"high":return f.priority==="high"||f.priority==="urgent";default:return!f.is_archived}}),M=f=>{switch(f){case"urgent":return e.jsx(qe,{className:"h-4 w-4 text-red-500"});case"high":return e.jsx(Vt,{className:"h-4 w-4 text-orange-500"});case"normal":return e.jsx(Ve,{className:"h-4 w-4 text-blue-500"});case"low":return e.jsx(le,{className:"h-4 w-4 text-green-500"});default:return e.jsx(Ve,{className:"h-4 w-4 text-gray-500"})}},$=f=>{switch(f){case"ticket_assigned":case"ticket_updated":case"ticket_completed":return e.jsx(le,{className:"h-5 w-5 text-blue-600"});case"system_alert":return e.jsx(qe,{className:"h-5 w-5 text-red-600"});case"technician_status":return e.jsx(rt,{className:"h-5 w-5 text-yellow-600"});case"new_ticket":return e.jsx(Y,{className:"h-5 w-5 text-green-600"});default:return e.jsx(Y,{className:"h-5 w-5 text-gray-600"})}},G=f=>({ticket_assigned:"Tiket Ditugaskan",ticket_updated:"Tiket Diperbarui",ticket_completed:"Tiket Selesai",system_alert:"Peringatan Sistem",technician_status:"Status Teknisi",new_ticket:"Tiket Baru"})[f]||f,L=f=>{const S=new Set(n);S.has(f)?S.delete(f):S.add(f),i(S)},z=()=>{n.size===P.length?i(new Set):i(new Set(P.map(f=>f.id)))},U=f=>{n.forEach(S=>{switch(f){case"mark-read":m(S);break;case"archive":D(S);break;case"delete":N(S);break}}),i(new Set)},X=[{id:"all",label:"Semua",count:y.length},{id:"unread",label:"Belum Dibaca",count:d},{id:"high",label:"Prioritas Tinggi",count:y.filter(f=>f.priority==="high"||f.priority==="urgent").length},{id:"archived",label:"Diarsipkan",count:y.filter(f=>f.is_archived).length}];return a?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-xl transform transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"h-6 w-6 text-blue-600"}),d>0&&e.jsx("span",{className:"absolute -top-2 -right-2 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:d>99?"99+":d})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Notifikasi"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>p(!l),className:`p-2 rounded-lg transition-colors ${l?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,children:e.jsx(Wt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"h-4 w-4"})})]})]}),l&&e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("select",{value:c.type,onChange:f=>h(S=>R(C({},S),{type:f.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Semua Tipe"}),e.jsx("option",{value:"ticket_assigned",children:"Tiket Ditugaskan"}),e.jsx("option",{value:"ticket_updated",children:"Tiket Diperbarui"}),e.jsx("option",{value:"ticket_completed",children:"Tiket Selesai"}),e.jsx("option",{value:"system_alert",children:"Peringatan Sistem"}),e.jsx("option",{value:"technician_status",children:"Status Teknisi"}),e.jsx("option",{value:"new_ticket",children:"Tiket Baru"})]}),e.jsxs("select",{value:c.priority,onChange:f=>h(S=>R(C({},S),{priority:f.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Semua Prioritas"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"Tinggi"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"low",children:"Rendah"})]}),e.jsxs("select",{value:c.is_read===void 0?"":c.is_read.toString(),onChange:f=>h(S=>R(C({},S),{is_read:f.target.value===""?void 0:f.target.value==="true"})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"false",children:"Belum Dibaca"}),e.jsx("option",{value:"true",children:"Sudah Dibaca"})]}),e.jsx("button",{onClick:()=>h({type:"",priority:"",is_read:void 0}),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:z,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:n.size===P.length?"Batal Pilih":"Pilih Semua"}),n.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>U("mark-read"),className:"text-sm text-green-600 hover:text-green-800 font-medium",children:"Tandai Dibaca"}),e.jsx("button",{onClick:()=>U("archive"),className:"text-sm text-orange-600 hover:text-orange-800 font-medium",children:"Arsipkan"}),e.jsx("button",{onClick:()=>U("delete"),className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Hapus"})]})]}),d>0&&e.jsxs("button",{onClick:k,disabled:O,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{children:"Tandai Semua Dibaca"})]})]})}),e.jsx("div",{className:"flex border-b border-gray-200",children:X.map(f=>e.jsxs("button",{onClick:()=>r(f.id),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s===f.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[f.label,f.count>0&&e.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${s===f.id?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:f.count})]},f.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):P.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(Y,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Tidak ada notifikasi"}),e.jsx("p",{className:"text-sm text-center",children:s==="unread"?"Semua notifikasi sudah dibaca":"Belum ada notifikasi yang tersedia"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:P.map(f=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${f.is_read?"":"bg-blue-50"}`,onClick:()=>{f.is_read||m(f.id)},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:n.has(f.id),onChange:S=>{S.stopPropagation(),L(f.id)},className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[$(f.type),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:G(f.type)}),M(f.priority)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:dt(new Date(f.created_at),{addSuffix:!0,locale:ut})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[!f.is_read&&e.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"}),e.jsx("button",{onClick:S=>{S.stopPropagation(),D(f.id)},className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",title:"Arsipkan",children:e.jsx(qt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:S=>{S.stopPropagation(),N(f.id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Hapus",children:e.jsx(nt,{className:"h-4 w-4"})})]})]})]}),e.jsx("h3",{className:`mt-2 text-sm font-medium ${f.is_read?"text-gray-700":"text-gray-900"}`,children:f.title}),e.jsx("p",{className:`mt-1 text-sm ${f.is_read?"text-gray-500":"text-gray-700"}`,children:f.message}),f.data&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(f.data,null,2)})})]})]})},f.id))})}),x&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Menampilkan ",P.length," dari ",x.total," notifikasi"]}),x.hasNext&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"Lihat Lebih Banyak"})]})})]})]}):null},Xs=({className:a=""})=>{const[t,s]=o.useState(!1),r=_a();return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s(!0),className:`relative p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors ${a}`,title:"Notifikasi",children:[e.jsx(Y,{className:"h-5 w-5"}),r>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium animate-pulse",children:r>99?"99+":r}),r>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 rounded-full animate-ping opacity-75"})]}),e.jsx(Bs,{isOpen:t,onClose:()=>s(!1)})]})},Ks=({isOpen:a,onClose:t})=>{const{settings:s,updateSettings:r,isUpdating:n}=wa(),{desktopNotificationsEnabled:i,requestDesktopPermission:l}=pa(),[p,c]=o.useState({email_notifications:!0,push_notifications:!0,sound_notifications:!0,desktop_notifications:!0,notification_types:{ticket_assigned:!0,ticket_updated:!0,ticket_completed:!0,system_alert:!0,technician_status:!0,new_ticket:!0,new_registration:!0,payment_received:!0,sla_warning:!0},quiet_hours_start:"",quiet_hours_end:""});tt.useEffect(()=>{var u,m,k,D;s&&c({email_notifications:(u=s.email_notifications)!=null?u:!0,push_notifications:(m=s.push_notifications)!=null?m:!0,sound_notifications:(k=s.sound_notifications)!=null?k:!0,desktop_notifications:(D=s.desktop_notifications)!=null?D:!0,notification_types:s.notification_types||{ticket_assigned:!0,ticket_updated:!0,ticket_completed:!0,system_alert:!0,technician_status:!0,new_ticket:!0,new_registration:!0,payment_received:!0,sla_warning:!0},quiet_hours_start:s.quiet_hours_start||"",quiet_hours_end:s.quiet_hours_end||""})},[s]);const h=u=>{u.preventDefault(),r(p)},y=(u,m)=>{c(k=>R(C({},k),{notification_types:R(C({},k.notification_types),{[u]:m})}))},x=()=>{p.quiet_hours_start&&p.quiet_hours_end?c(u=>R(C({},u),{quiet_hours_start:"",quiet_hours_end:""})):c(u=>R(C({},u),{quiet_hours_start:"22:00",quiet_hours_end:"07:00"}))},d={ticket_assigned:"Tiket Ditugaskan",ticket_updated:"Tiket Diperbarui",ticket_completed:"Tiket Selesai",system_alert:"Peringatan Sistem",technician_status:"Status Teknisi",new_ticket:"Tiket Baru",new_registration:"Pendaftar Baru",payment_received:"Pembayaran Diterima",sla_warning:"SLA Warning"};return a?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-xl transform transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pengaturan Notifikasi"})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Y,{className:"h-5 w-5 mr-2 text-blue-600"}),"Pengaturan Umum"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ut,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Email Notifikasi"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Terima notifikasi via email"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.email_notifications,onChange:u=>c(m=>R(C({},m),{email_notifications:u.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Y,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Push Notifikasi"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Terima notifikasi push di browser"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.push_notifications,onChange:u=>c(m=>R(C({},m),{push_notifications:u.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ht,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Suara Notifikasi"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Mainkan suara saat ada notifikasi"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.sound_notifications,onChange:u=>c(m=>R(C({},m),{sound_notifications:u.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Notifikasi Desktop"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tampilkan notifikasi bahkan saat browser minimize"}),!i&&e.jsx("button",{onClick:()=>w(void 0,null,function*(){(yield l())?F.success("Desktop notifications enabled!"):F.error("Permission denied. Check browser settings.")}),className:"mt-2 text-xs text-blue-600 hover:text-blue-800 font-medium",children:"🔔 Klik untuk izinkan"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i?e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full font-medium",children:"Aktif"}):e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded-full",children:"Belum Aktif"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.desktop_notifications&&i,onChange:u=>c(m=>R(C({},m),{desktop_notifications:u.target.checked})),disabled:!i,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Tipe Notifikasi"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(d).map(([u,m])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-900",children:m}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.notification_types[u],onChange:k=>y(u,k.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},u))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Xt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Jam Tenang"]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Nonaktifkan Notifikasi"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Jangan tampilkan notifikasi pada jam tertentu"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!(p.quiet_hours_start&&p.quiet_hours_end),onChange:x,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),p.quiet_hours_start&&p.quiet_hours_end&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dari"}),e.jsx("input",{type:"time",value:p.quiet_hours_start,onChange:u=>c(m=>R(C({},m),{quiet_hours_start:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sampai"}),e.jsx("input",{type:"time",value:p.quiet_hours_end,onChange:u=>c(m=>R(C({},m),{quiet_hours_end:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors",children:n?"Menyimpan...":"Simpan"})]})]})})]})]}):null},Ke={createSample:()=>w(void 0,null,function*(){return A.post("/test-notifications/create-sample")}),clearAll:()=>w(void 0,null,function*(){return A.delete("/test-notifications/clear-all")})},Js=({isOpen:a,onClose:t})=>{const[s,r]=o.useState(!1),[n,i]=o.useState(!1),l=()=>w(void 0,null,function*(){try{r(!0);const c=yield Ke.createSample();F.success(`Created ${c.data.notifications.length} sample notifications`)}catch(c){console.error("Failed to create sample notifications:",c),F.error("Failed to create sample notifications")}finally{r(!1)}}),p=()=>w(void 0,null,function*(){try{i(!0),yield Ke.clearAll(),F.success("All notifications cleared")}catch(c){console.error("Failed to clear notifications:",c),F.error("Failed to clear notifications")}finally{i(!1)}});return a?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsxs("div",{className:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Test Notifications"})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:"×"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Gunakan panel ini untuk membuat notifikasi sample untuk testing Notification Center."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:l,disabled:s,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Kt,{className:"h-5 w-5"}),e.jsx("span",{children:s?"Creating...":"Create Sample Notifications"})]}),e.jsxs("button",{onClick:p,disabled:n,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(nt,{className:"h-5 w-5"}),e.jsx("span",{children:n?"Clearing...":"Clear All Notifications"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Sample notifications include:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Ticket assigned notification"}),e.jsx("li",{children:"• Ticket status update"}),e.jsx("li",{children:"• System alert (urgent priority)"}),e.jsx("li",{children:"• Technician status update"}),e.jsx("li",{children:"• New ticket created"}),e.jsx("li",{children:"• Ticket completed"})]})]})]})]})]}):null},Gs=({onMenuClick:a})=>{var x,d;const{user:t,logout:s}=te(),[r,n]=o.useState(!1),[i,l]=o.useState(!1),[p,c]=o.useState(!1),h=o.useRef(null);o.useEffect(()=>{const u=m=>{h.current&&!h.current.contains(m.target)&&n(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]);const y=()=>{s(),n(!1)};return e.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:a,className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:hidden transition-colors",children:e.jsx(Jt,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/aglis-logo.svg",alt:"AGLIS Net",className:"h-9 w-auto"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 hidden sm:block",children:"AGLIS Management System"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 sm:hidden",children:"AGLIS"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsx(Xs,{}),e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{onClick:()=>n(!r),className:"flex items-center space-x-2 p-2 rounded-lg text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-600 to-blue-700 rounded-full flex items-center justify-center shadow-sm",children:e.jsx(Gt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"hidden lg:block text-left min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.full_name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize truncate",children:(x=t==null?void 0:t.role)==null?void 0:x.replace("_"," ")})]}),e.jsx(je,{className:`h-4 w-4 text-gray-400 transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl py-2 z-[9999] border border-gray-200 ring-1 ring-black ring-opacity-5",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.full_name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize truncate",children:(d=t==null?void 0:t.role)==null?void 0:d.replace("_"," ")})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs(St,{to:"/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>n(!1),children:[e.jsx(Ee,{className:"h-4 w-4 mr-3 text-gray-400"}),"Profile Settings"]}),e.jsxs("button",{onClick:()=>{l(!0),n(!1)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Y,{className:"h-4 w-4 mr-3 text-gray-400"}),"Notification Settings"]}),(t==null?void 0:t.role)==="admin"&&e.jsxs("button",{onClick:()=>{c(!0),n(!1)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Yt,{className:"h-4 w-4 mr-3 text-gray-400"}),"Test Notifications"]}),e.jsxs("button",{onClick:y,className:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Ue,{className:"h-4 w-4 mr-3 text-red-500"}),"Sign Out"]})]})]})]}),e.jsx("button",{onClick:y,className:"lg:hidden p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",title:"Sign Out",children:e.jsx(Ue,{className:"h-4 w-4"})})]})]})}),e.jsx(Ks,{isOpen:i,onClose:()=>l(!1)}),e.jsx(Js,{isOpen:p,onClose:()=>c(!1)})]})},Ys=()=>{const[a,t]=o.useState(!1),[s,r]=o.useState(()=>localStorage.getItem("sidebarCollapsed")==="true");return o.useEffect(()=>{localStorage.setItem("sidebarCollapsed",s)},[s]),e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsx(ba,{isOpen:a,onClose:()=>t(!1),collapsed:s}),e.jsx("button",{onClick:()=>r(!s),className:`
          hidden lg:flex items-center justify-center
          fixed top-20 z-50
          w-6 h-12 bg-white border border-gray-200 
          rounded-r-lg shadow-md
          text-gray-600 hover:text-blue-600 hover:bg-blue-50
          transition-all duration-300
          group
          ${s?"left-20":"left-64"}
        `,title:s?"Expand Sidebar":"Collapse Sidebar",children:s?e.jsx(we,{className:"h-4 w-4 group-hover:scale-125 transition-transform"}):e.jsx(Zt,{className:"h-4 w-4 group-hover:scale-125 transition-transform"})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Gs,{onMenuClick:()=>t(!0)}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(Pt,{})})})]})]})};var mt={exports:{}},Zs="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",er=Zs,tr=er;function ht(){}function ft(){}ft.resetWarningCache=ht;var ar=function(){function a(r,n,i,l,p,c){if(c!==tr){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}a.isRequired=a;function t(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:t,element:a,elementType:a,instanceOf:t,node:a,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ft,resetWarningCache:ht};return s.PropTypes=s,s};mt.exports=ar();var sr=mt.exports;const q=at(sr);var rr=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function Ne(){return Ne=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},Ne.apply(this,arguments)}function nr(a,t){if(a==null)return{};var s={},r=Object.keys(a),n,i;for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&(s[n]=a[n]);return s}function he(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ir(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,Se(a,t)}function Se(a,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Se(a,t)}var ve=function(a){ir(t,a);function t(){var r;return r=a.call(this)||this,r.handleExpired=r.handleExpired.bind(he(r)),r.handleErrored=r.handleErrored.bind(he(r)),r.handleChange=r.handleChange.bind(he(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(he(r)),r}var s=t.prototype;return s.getCaptchaFunction=function(n){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[n]:this.props.grecaptcha[n]:null},s.getValue=function(){var n=this.getCaptchaFunction("getResponse");return n&&this._widgetId!==void 0?n(this._widgetId):null},s.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},s.execute=function(){var n=this.getCaptchaFunction("execute");if(n&&this._widgetId!==void 0)return n(this._widgetId);this._executeRequested=!0},s.executeAsync=function(){var n=this;return new Promise(function(i,l){n.executionResolve=i,n.executionReject=l,n.execute()})},s.reset=function(){var n=this.getCaptchaFunction("reset");n&&this._widgetId!==void 0&&n(this._widgetId)},s.forceReset=function(){var n=this.getCaptchaFunction("reset");n&&n()},s.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},s.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},s.handleChange=function(n){this.props.onChange&&this.props.onChange(n),this.executionResolve&&(this.executionResolve(n),delete this.executionReject,delete this.executionResolve)},s.explicitRender=function(){var n=this.getCaptchaFunction("render");if(n&&this._widgetId===void 0){var i=document.createElement("div");this._widgetId=n(i,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(i)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},s.componentDidMount=function(){this.explicitRender()},s.componentDidUpdate=function(){this.explicitRender()},s.handleRecaptchaRef=function(n){this.captcha=n},s.render=function(){var n=this.props;n.sitekey,n.onChange,n.theme,n.type,n.tabindex,n.onExpired,n.onErrored,n.size,n.stoken,n.grecaptcha,n.badge,n.hl,n.isolated;var i=nr(n,rr);return o.createElement("div",Ne({},i,{ref:this.handleRecaptchaRef}))},t}(o.Component);ve.displayName="ReCAPTCHA";ve.propTypes={sitekey:q.string.isRequired,onChange:q.func,grecaptcha:q.object,theme:q.oneOf(["dark","light"]),type:q.oneOf(["image","audio"]),tabindex:q.number,onExpired:q.func,onErrored:q.func,size:q.oneOf(["compact","normal","invisible"]),stoken:q.string,hl:q.string,badge:q.oneOf(["bottomright","bottomleft","inline"]),isolated:q.bool};ve.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var Oe=da,or={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},cr={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lr={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pt={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Re={};Re[Oe.ForwardRef]=lr;Re[Oe.Memo]=pt;function Je(a){return Oe.isMemo(a)?pt:Re[a.$$typeof]||or}var dr=Object.defineProperty,ur=Object.getOwnPropertyNames,Ge=Object.getOwnPropertySymbols,mr=Object.getOwnPropertyDescriptor,hr=Object.getPrototypeOf,Ye=Object.prototype;function gt(a,t,s){if(typeof t!="string"){if(Ye){var r=hr(t);r&&r!==Ye&&gt(a,r,s)}var n=ur(t);Ge&&(n=n.concat(Ge(t)));for(var i=Je(a),l=Je(t),p=0;p<n.length;++p){var c=n[p];if(!cr[c]&&!(s&&s[c])&&!(l&&l[c])&&!(i&&i[c])){var h=mr(t,c);try{dr(a,c,h)}catch(y){}}}}return a}var fr=gt;const pr=at(fr);function Pe(){return Pe=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},Pe.apply(this,arguments)}function gr(a,t){if(a==null)return{};var s={},r=Object.keys(a),n,i;for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&(s[n]=a[n]);return s}function xr(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}var Q={},vr=0;function yr(a,t){return t=t||{},function(r){var n=r.displayName||r.name||"Component",i=function(p){xr(c,p);function c(y,x){var d;return d=p.call(this,y,x)||this,d.state={},d.__scriptURL="",d}var h=c.prototype;return h.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+vr++),this.__scriptLoaderID},h.setupScriptURL=function(){return this.__scriptURL=typeof a=="function"?a():a,this.__scriptURL},h.asyncScriptLoaderHandleLoad=function(x){var d=this;this.setState(x,function(){return d.props.asyncScriptOnLoad&&d.props.asyncScriptOnLoad(d.state)})},h.asyncScriptLoaderTriggerOnScriptLoaded=function(){var x=Q[this.__scriptURL];if(!x||!x.loaded)throw new Error("Script is not loaded.");for(var d in x.observers)x.observers[d](x);delete window[t.callbackName]},h.componentDidMount=function(){var x=this,d=this.setupScriptURL(),u=this.asyncScriptLoaderGetScriptLoaderID(),m=t,k=m.globalName,D=m.callbackName,N=m.scriptId;if(k&&typeof window[k]!="undefined"&&(Q[d]={loaded:!0,observers:{}}),Q[d]){var O=Q[d];if(O&&(O.loaded||O.errored)){this.asyncScriptLoaderHandleLoad(O);return}O.observers[u]=function(L){return x.asyncScriptLoaderHandleLoad(L)};return}var P={};P[u]=function(L){return x.asyncScriptLoaderHandleLoad(L)},Q[d]={loaded:!1,observers:P};var M=document.createElement("script");M.src=d,M.async=!0;for(var $ in t.attributes)M.setAttribute($,t.attributes[$]);N&&(M.id=N);var G=function(z){if(Q[d]){var U=Q[d],X=U.observers;for(var f in X)z(X[f])&&delete X[f]}};D&&typeof window!="undefined"&&(window[D]=function(){return x.asyncScriptLoaderTriggerOnScriptLoaded()}),M.onload=function(){var L=Q[d];L&&(L.loaded=!0,G(function(z){return D?!1:(z(L),!0)}))},M.onerror=function(){var L=Q[d];L&&(L.errored=!0,G(function(z){return z(L),!0}))},document.body.appendChild(M)},h.componentWillUnmount=function(){var x=this.__scriptURL;if(t.removeOnUnmount===!0)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u+=1)d[u].src.indexOf(x)>-1&&d[u].parentNode&&d[u].parentNode.removeChild(d[u]);var m=Q[x];m&&(delete m.observers[this.asyncScriptLoaderGetScriptLoaderID()],t.removeOnUnmount===!0&&delete Q[x])},h.render=function(){var x=t.globalName,d=this.props;d.asyncScriptOnLoad;var u=d.forwardedRef,m=gr(d,["asyncScriptOnLoad","forwardedRef"]);return x&&typeof window!="undefined"&&(m[x]=typeof window[x]!="undefined"?window[x]:void 0),m.ref=u,o.createElement(r,m)},c}(o.Component),l=o.forwardRef(function(p,c){return o.createElement(i,Pe({},p,{forwardedRef:c}))});return l.displayName="AsyncScriptLoader("+n+")",l.propTypes={asyncScriptOnLoad:q.func},pr(l,r)}}var Te="onloadcallback",br="grecaptcha";function Ce(){return typeof window!="undefined"&&window.recaptchaOptions||{}}function jr(){var a=Ce(),t=a.useRecaptchaNet?"recaptcha.net":"www.google.com";return a.enterprise?"https://"+t+"/recaptcha/enterprise.js?onload="+Te+"&render=explicit":"https://"+t+"/recaptcha/api.js?onload="+Te+"&render=explicit"}const wr=yr(jr,{callbackName:Te,globalName:br,attributes:Ce().nonce?{nonce:Ce().nonce}:{}})(ve),_r=()=>{const{login:a}=te(),[t,s]=o.useState(!1),[r,n]=o.useState(!1),[i,l]=o.useState(null),[p,c]=o.useState(""),[h,y]=o.useState(!1),x=o.useRef(null),{register:d,handleSubmit:u,formState:{errors:m}}=la();o.useEffect(()=>{w(void 0,null,function*(){try{const O=yield A.get("/auth/recaptcha-config");O.data&&(y(O.data.enabled),c(O.data.siteKey))}catch(O){console.error("Failed to fetch reCAPTCHA config:",O),y(!1)}})},[]);const k=N=>{l(N)},D=N=>w(void 0,null,function*(){if(h&&!i){I.error("Please complete the reCAPTCHA verification");return}s(!0);try{const O=R(C({},N),{recaptchaToken:i}),P=yield a(O);P.success?I.success("Login successful!"):(x.current&&(x.current.reset(),l(null)),P.error.includes("locked")?I.error(P.error,{duration:5e3}):P.error.includes("Too many")?I.error(P.error,{duration:5e3}):P.error.includes("reCAPTCHA")||P.error.includes("captcha")?I.error("Security verification failed. Please try again."):I.error(P.error))}catch(O){x.current&&(x.current.reset(),l(null)),I.error("Login failed. Please try again.")}finally{s(!1)}});return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto flex items-center justify-center",children:e.jsx("img",{src:"/aglis-logo.svg",alt:"AGLIS Net",className:"h-16 w-auto"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"AGLIS Management System"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u(D),children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username or Email"}),e.jsx("input",C({id:"username",type:"text",autoComplete:"username",className:`form-input ${m.username?"border-red-500":""}`,placeholder:"Enter your username or email"},d("username",{required:"Username or email is required"}))),m.username&&e.jsx("p",{className:"form-error",children:m.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",C({id:"password",type:r?"text":"password",autoComplete:"current-password",className:`form-input pr-10 ${m.password?"border-red-500":""}`,placeholder:"Enter your password"},d("password",{required:"Password is required"}))),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!r),children:r?e.jsx(ea,{className:"h-5 w-5 text-gray-400"}):e.jsx(ta,{className:"h-5 w-5 text-gray-400"})})]}),m.password&&e.jsx("p",{className:"form-error",children:m.password.message})]})]}),h&&p&&e.jsx("div",{className:"flex justify-center",children:e.jsx(wr,{ref:x,sitekey:p,onChange:k,onExpired:()=>l(null),onErrored:()=>{l(null),I.error("reCAPTCHA error. Please refresh the page.")},theme:"light"})}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",disabled:t||h&&!i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:t?e.jsx(de,{size:"sm"}):"Sign In"}),h&&!i&&e.jsx("p",{className:"mt-2 text-sm text-center text-gray-500",children:"Please complete the reCAPTCHA verification above"})]})]})]})})},Ze={getDashboardOverview:(a=30)=>w(void 0,null,function*(){return(yield A.get(`/analytics/dashboard/overview?timeframe=${a}`)).data}),getRecentActivities:(a=50)=>w(void 0,null,function*(){return(yield A.get(`/analytics/dashboard/recent-activities?limit=${a}`)).data}),getTicketTrends:(a=30)=>w(void 0,null,function*(){return(yield A.get(`/analytics/dashboard/ticket-trends?timeframe=${a}`)).data}),getServiceDistribution:()=>w(void 0,null,function*(){return(yield A.get("/analytics/dashboard/service-distribution")).data}),getPriorityAnalysis:()=>w(void 0,null,function*(){return(yield A.get("/analytics/dashboard/priority-analysis")).data}),getTechnicianPerformance:()=>w(void 0,null,function*(){return(yield A.get("/analytics/dashboard/technician-performance")).data}),getTicketTrend:(a="7days")=>w(void 0,null,function*(){return(yield A.get(`/analytics/ticket-trend?range=${a}`)).data}),getStatusDistribution:()=>w(void 0,null,function*(){return(yield A.get("/analytics/status-distribution")).data}),getRevenueTrend:()=>w(void 0,null,function*(){return(yield A.get("/analytics/revenue-trend")).data}),getKPIMetrics:()=>w(void 0,null,function*(){return(yield A.get("/analytics/kpi")).data}),getResponseTimeMetrics:()=>w(void 0,null,function*(){return(yield A.get("/analytics/response-time")).data}),getSLACompliance:()=>w(void 0,null,function*(){return(yield A.get("/analytics/sla-compliance")).data})},kr=()=>{var x,d,u,m,k,D;const{user:a}=te(),t=Tt(),s=xe(),{data:r,isLoading:n}=Z("dashboard-overview",()=>Ze.getDashboardOverview(),{refetchInterval:3e4,refetchOnWindowFocus:!0,refetchOnMount:"always",staleTime:0}),{data:i,isLoading:l}=Z("dashboard-activities",()=>Ze.getRecentActivities(50),{refetchInterval:15e3,refetchOnWindowFocus:!0,refetchOnMount:"always",staleTime:0});if(o.useEffect(()=>{const N=()=>{s.invalidateQueries("dashboard-overview"),s.invalidateQueries("dashboard-activities"),console.log("📊 Dashboard data refreshed due to ticket update")};return window.addEventListener("ticket-updated",N),window.addEventListener("ticket-created",N),window.addEventListener("ticket-assigned",N),window.addEventListener("ticket-completed",N),()=>{window.removeEventListener("ticket-updated",N),window.removeEventListener("ticket-created",N),window.removeEventListener("ticket-assigned",N),window.removeEventListener("ticket-completed",N)}},[s]),n)return e.jsx("div",{className:"flex justify-center items-center min-h-96",children:e.jsx(de,{})});const p=(r==null?void 0:r.data)||{},c=((x=p.tickets)==null?void 0:x.byStatus)||{},h={total_tickets:((d=p.tickets)==null?void 0:d.total)||0,open_tickets:c.open||0,assigned_tickets:c.assigned||0,in_progress_tickets:c.in_progress||0,on_hold_tickets:c.on_hold||0,completed_tickets:c.completed||0,cancelled_tickets:c.cancelled||0,avg_resolution_time:((u=p.resolution)==null?void 0:u.averageHours)||null,avg_customer_rating:((m=p.satisfaction)==null?void 0:m.averageRating)||null,sla_compliance:((k=p.sla)==null?void 0:k.complianceRate)||null,active_technicians:((D=p.technicians)==null?void 0:D.available)||0,approaching_sla:0,overdue_tickets:0},y=({title:N,description:O,icon:P,color:M="blue",onClick:$})=>e.jsx("button",{onClick:$,className:"card hover:shadow-md transition-shadow text-left w-full h-full",children:e.jsxs("div",{className:"card-body flex items-center h-full",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${M}-100 mr-3 flex-shrink-0`,children:e.jsx(P,{className:`h-5 w-5 text-${M}-600`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:N}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:O})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",a==null?void 0:a.full_name,"!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your ISP operations today."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:[e.jsx(ee,{title:"Total",value:h.total_tickets||0,icon:ce,color:"blue"}),e.jsx(ee,{title:"Open",value:h.open_tickets||0,icon:aa,color:"blue"}),e.jsx(ee,{title:"Assigned",value:h.assigned_tickets||0,icon:pe,color:"indigo"}),e.jsx(ee,{title:"Progress",value:h.in_progress_tickets||0,icon:sa,color:"orange"}),e.jsx(ee,{title:"On Hold",value:h.on_hold_tickets||0,icon:ra,color:"yellow"}),e.jsx(ee,{title:"Completed",value:h.completed_tickets||0,icon:le,color:"green"}),e.jsx(ee,{title:"Cancelled",value:h.cancelled_tickets||0,icon:na,color:"red"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card h-full",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 h-full",children:[e.jsx(y,{title:"Create New Ticket",description:"Add a new service request",icon:ce,color:"blue",onClick:()=>t("/tickets")}),e.jsx(y,{title:"Add Customer",description:"Register new customer",icon:pe,color:"green",onClick:()=>t("/customers")}),e.jsx(y,{title:"Manage Technicians",description:"View and manage technicians",icon:ge,color:"purple",onClick:()=>t("/technicians")}),e.jsx(y,{title:"Check Inventory",description:"View stock levels",icon:st,color:"orange",onClick:()=>t("/inventory")})]})})]})}),e.jsx("div",{children:e.jsxs("div",{className:"card h-full flex flex-col",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Today's Activity"})}),e.jsx("div",{className:"card-body flex-1 overflow-hidden",children:l?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(de,{})}):i!=null&&i.data&&i.data.length>0?e.jsx("div",{className:"space-y-4 overflow-y-auto h-full pr-2",style:{maxHeight:"180px"},children:i.data.map((N,O)=>{let P="",M=ce,$="blue";return N.status==="completed"?(P=`Ticket #${N.ticketNumber} completed`,M=le,$="green"):N.status==="assigned"?(P=`Ticket #${N.ticketNumber} assigned to technician`,M=ge,$="purple"):N.status==="in_progress"?(P=`Ticket #${N.ticketNumber} in progress`,M=ia,$="orange"):N.status==="open"?(P=`New ticket created: ${N.title}`,M=ce,$="blue"):P=`Ticket #${N.ticketNumber} - ${N.title}`,e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-1 bg-${$}-100 rounded-full`,children:e.jsx(M,{className:`h-4 w-4 text-${$}-600`})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:P}),e.jsx("p",{className:"text-xs text-gray-500",children:N.timestamp&&!isNaN(new Date(N.timestamp).getTime())?dt(new Date(N.timestamp),{addSuffix:!0,locale:ut}):"Baru saja"})]})]},O)})}):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Tidak ada aktivitas hari ini"})})]})})]}),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="supervisor")&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Overview"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Resolution Time"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.avg_resolution_time?`${h.avg_resolution_time.toFixed(1)} hours`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Customer Satisfaction"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.avg_customer_rating?`${h.avg_customer_rating.toFixed(1)}/5.0`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"SLA Compliance"}),e.jsx("span",{className:`text-sm font-medium ${h.sla_compliance>=90?"text-green-600":"text-yellow-600"}`,children:h.sla_compliance?`${h.sla_compliance.toFixed(1)}%`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Technicians"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.active_technicians||0})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"System Alerts"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-3",children:[h.approaching_sla>0,h.overdue_tickets>0,e.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[e.jsx(le,{className:"h-5 w-5 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"All tickets on track"}),e.jsx("p",{className:"text-xs text-green-600",children:"No urgent alerts"})]})]})]})})]})]})]})},Nr=o.lazy(()=>_(()=>import("./AnalyticsDashboard-XhUFohpt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Sr=o.lazy(()=>_(()=>import("./PerformanceDashboard-BrTp0gtc.js"),__vite__mapDeps([9,1,2,3,4,5]))),Pr=o.lazy(()=>_(()=>import("./tickets-vvnhrHMz.js").then(a=>a.T),__vite__mapDeps([10,1,2,3,4,5,6,7,8]))),Tr=o.lazy(()=>_(()=>import("./tickets-vvnhrHMz.js").then(a=>a.a),__vite__mapDeps([10,1,2,3,4,5,6,7,8]))),Cr=o.lazy(()=>_(()=>import("./customers-Bkp7alR1.js").then(a=>a.C),__vite__mapDeps([6,1,2,3,4,5,7,8]))),Ar=o.lazy(()=>_(()=>import("./customers-Bkp7alR1.js").then(a=>a.m),__vite__mapDeps([6,1,2,3,4,5,7,8]))),Er=o.lazy(()=>_(()=>import("./TechniciansPage-BUsIYOjJ.js"),__vite__mapDeps([11,1,2,3,4,5,10,6,7,8]))),Or=o.lazy(()=>_(()=>import("./TechnicianDetailPage-FX57sZM3.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,13,10]))),Rr=o.lazy(()=>_(()=>import("./InventoryPage-Dbq5kuZw.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8]))),Dr=o.lazy(()=>_(()=>import("./InventoryStockPage-CBgkPTh3.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8]))),Mr=o.lazy(()=>_(()=>import("./PackagesPage-CFR6PFEY.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8]))),Lr=o.lazy(()=>_(()=>import("./PriceListPage-C7hK4zoF.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8]))),Ir=o.lazy(()=>_(()=>import("./EquipmentPage-BV9V-OsR.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8]))),$r=o.lazy(()=>_(()=>import("./ODPPage-irxGGDma.js"),__vite__mapDeps([19,1,2,3,4,5,10,6,7,8]))),Fr=o.lazy(()=>_(()=>import("./ServiceTypesPage-BMv6PC03.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8]))),Wr=o.lazy(()=>_(()=>import("./ServiceCategoriesPage-BMiFhct1.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8]))),zr=o.lazy(()=>_(()=>import("./UsersPage-BQfkVadn.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8]))),qr=o.lazy(()=>_(()=>import("./PermissionsPage-Do04Wumf.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8]))),Vr=o.lazy(()=>_(()=>import("./SkillLevelsPage-FiQI02GA.js"),__vite__mapDeps([24,1,2,3,4,5,13,6,7,8]))),Ur=o.lazy(()=>_(()=>import("./SpecializationsPage-DxWBIbyA.js"),__vite__mapDeps([25,1,2,3,4,5,13,6,7,8]))),Hr=o.lazy(()=>_(()=>import("./WhatsAppGroupsPage-B3hNFCog.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8]))),Qr=o.lazy(()=>_(()=>import("./WhatsAppTemplatesPage-DMEyUx0i.js"),__vite__mapDeps([27,1,2,3,4,5]))),Br=o.lazy(()=>_(()=>import("./ProfilePage-DQRz3DMS.js"),__vite__mapDeps([28,1,2,3,4,5,8,6,7]))),Xr=o.lazy(()=>_(()=>import("./RegisterPage-CpGZ1QKp.js"),__vite__mapDeps([29,1,2,3,4,5,8,30,6,7]))),et=o.lazy(()=>_(()=>import("./TrackingPage-BtddMjT8.js"),__vite__mapDeps([31,1,2,3,4,5,30,6,7,8]))),Kr=o.lazy(()=>_(()=>import("./RegistrationsPage-C5dT6cCG.js"),__vite__mapDeps([32,1,2,3,4,5,30,6,7,8]))),Jr=o.lazy(()=>_(()=>import("./RegistrationDetailPage-R0Koqua6.js"),__vite__mapDeps([33,1,2,3,4,5,30,6,7,8]))),Gr=o.lazy(()=>_(()=>import("./RegistrationAnalyticsPage-Wf4siHMX.js"),__vite__mapDeps([34,1,2,3,4,5]))),Yr=o.lazy(()=>_(()=>import("./notifications-C-A1jlty.js").then(a=>a.N),__vite__mapDeps([1,2,3,4,5]))),Zr=o.lazy(()=>_(()=>import("./notifications-C-A1jlty.js").then(a=>a.b),__vite__mapDeps([1,2,3,4,5]))),en=o.lazy(()=>_(()=>import("./notifications-C-A1jlty.js").then(a=>a.c),__vite__mapDeps([1,2,3,4,5]))),tn=o.lazy(()=>_(()=>import("./InvoicesPage-BI33BioE.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8]))),an=o.lazy(()=>_(()=>import("./InvoiceDetailPage-Bwjimpe3.js"),__vite__mapDeps([36,1,2,3,4,5,6,7,8]))),sn=o.lazy(()=>_(()=>import("./InvoiceCreatePage-D5lb8jj0.js"),__vite__mapDeps([37,1,2,3,4,5,6,7,8]))),rn=o.lazy(()=>_(()=>import("./PaymentsPage-8nQQx5fJ.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8]))),nn=o.lazy(()=>_(()=>import("./CustomerLoginPage-BsK21tVe.js"),__vite__mapDeps([39,1,2,3,4,5]))),on=o.lazy(()=>_(()=>import("./CustomerDashboardPage-BItEywHB.js"),__vite__mapDeps([40,1,2,3,4,5,41]))),cn=o.lazy(()=>_(()=>import("./CustomerInvoicesPage-p3R6DxhL.js"),__vite__mapDeps([42,1,2,3,4,5,41]))),ln=o.lazy(()=>_(()=>import("./CustomerTicketsPage-jBBTsQvE.js"),__vite__mapDeps([43,1,2,3,4,5,41]))),dn=o.lazy(()=>_(()=>import("./CustomerTicketDetailPage-C52o-hsE.js"),__vite__mapDeps([44,1,2,3,4,5,41]))),un=o.lazy(()=>_(()=>import("./CustomerProfilePage-DcC5RoeA.js"),__vite__mapDeps([45,1,2,3,4,5,41]))),mn=o.lazy(()=>_(()=>import("./CustomerFAQPage-D4-y2hpS.js"),__vite__mapDeps([46,1,2,3,4,5,41])));function hn(){const{user:a,loading:t}=te();return t?e.jsx(de,{}):e.jsx(ya,{children:e.jsx(ga,{children:e.jsx(o.Suspense,{fallback:e.jsx(de,{}),children:e.jsxs(Ct,{children:[e.jsx(j,{path:"/login",element:a?e.jsx(me,{to:"/dashboard",replace:!0}):e.jsx(_r,{})}),e.jsx(j,{path:"/register",element:e.jsx(Xr,{})}),e.jsx(j,{path:"/track",element:e.jsx(et,{})}),e.jsx(j,{path:"/track/:registrationNumber",element:e.jsx(et,{})}),e.jsx(j,{path:"/customer/login",element:e.jsx(nn,{})}),e.jsx(j,{path:"/customer/dashboard",element:e.jsx(on,{})}),e.jsx(j,{path:"/customer/invoices",element:e.jsx(cn,{})}),e.jsx(j,{path:"/customer/tickets",element:e.jsx(ln,{})}),e.jsx(j,{path:"/customer/tickets/:id",element:e.jsx(dn,{})}),e.jsx(j,{path:"/customer/profile",element:e.jsx(un,{})}),e.jsx(j,{path:"/customer/faq",element:e.jsx(mn,{})}),e.jsxs(j,{path:"/*",element:a?e.jsx(Ys,{}):e.jsx(me,{to:"/login",replace:!0}),children:[e.jsx(j,{path:"dashboard",element:e.jsx(kr,{})}),e.jsx(j,{path:"analytics",element:e.jsx(Nr,{})}),e.jsx(j,{path:"performance",element:e.jsx(Sr,{})}),e.jsx(j,{path:"tickets",element:e.jsx(Pr,{})}),e.jsx(j,{path:"tickets/:id",element:e.jsx(Tr,{})}),e.jsx(j,{path:"customers",element:e.jsx(Cr,{})}),e.jsx(j,{path:"customers/:id",element:e.jsx(Ar,{})}),e.jsx(j,{path:"registrations",element:e.jsx(Kr,{})}),e.jsx(j,{path:"registrations/:id",element:e.jsx(Jr,{})}),e.jsx(j,{path:"registration-analytics",element:e.jsx(Gr,{})}),e.jsx(j,{path:"technicians",element:e.jsx(Er,{})}),e.jsx(j,{path:"technicians/:id",element:e.jsx(Or,{})}),e.jsx(j,{path:"inventory",element:e.jsx(Rr,{})}),e.jsx(j,{path:"inventory-stock",element:e.jsx(Dr,{})}),e.jsx(j,{path:"master-data/service-types",element:e.jsx(Fr,{})}),e.jsx(j,{path:"master-data/service-categories",element:e.jsx(Wr,{})}),e.jsx(j,{path:"master-data/packages",element:e.jsx(Mr,{})}),e.jsx(j,{path:"master-data/price-list",element:e.jsx(Lr,{})}),e.jsx(j,{path:"master-data/equipment",element:e.jsx(Ir,{})}),e.jsx(j,{path:"master-data/odp",element:e.jsx($r,{})}),e.jsx(j,{path:"notifications/templates",element:e.jsx(Yr,{})}),e.jsx(j,{path:"notifications/analytics",element:e.jsx(Zr,{})}),e.jsx(j,{path:"notifications/settings",element:e.jsx(en,{})}),e.jsx(j,{path:"users",element:e.jsx(zr,{})}),e.jsx(j,{path:"permissions",element:e.jsx(qr,{})}),e.jsx(j,{path:"master-data/skill-levels",element:e.jsx(Vr,{})}),e.jsx(j,{path:"master-data/specializations",element:e.jsx(Ur,{})}),e.jsx(j,{path:"master-data/whatsapp-groups",element:e.jsx(Hr,{})}),e.jsx(j,{path:"master-data/whatsapp-templates",element:e.jsx(Qr,{})}),e.jsx(j,{path:"invoices",element:e.jsx(tn,{})}),e.jsx(j,{path:"invoices/new",element:e.jsx(sn,{})}),e.jsx(j,{path:"invoices/:id",element:e.jsx(an,{})}),e.jsx(j,{path:"payments",element:e.jsx(rn,{})}),e.jsx(j,{path:"profile",element:e.jsx(Br,{})}),e.jsx(j,{path:"",element:e.jsx(me,{to:"/dashboard",replace:!0})})]}),e.jsx(j,{path:"*",element:e.jsx(me,{to:"/dashboard",replace:!0})})]})})})})}const fn=new Et({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3}}});_e.createRoot(document.getElementById("root")).render(e.jsx(tt.StrictMode,{children:e.jsxs(Ot,{client:fn,children:[e.jsx(At,{children:e.jsxs(ca,{children:[e.jsx(hn,{}),e.jsx(oa,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})]})}),e.jsx(ua.ReactQueryDevtools,{initialIsOpen:!1})]})}));export{wr as R,Ze as a,xa as p};
//# sourceMappingURL=index-ZUCg6nMe.js.map

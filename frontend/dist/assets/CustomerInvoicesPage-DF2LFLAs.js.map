{"version":3,"file":"CustomerInvoicesPage-DF2LFLAs.js","sources":["../../src/pages/customer-portal/CustomerInvoicesPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { FileText, Download, Eye, DollarSign, Calendar, AlertCircle, CheckCircle, Clock } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport api from '../../services/api';\nimport CustomerPortalLayout from '../../components/CustomerPortalLayout';\n\nconst CustomerInvoicesPage = () => {\n  const [filter, setFilter] = useState('all');\n\n  const { data, isLoading } = useQuery(\n    ['customer-invoices', filter],\n    async () => {\n      const statusFilter = filter !== 'all' ? `?status=${filter}` : '';\n      const response = await api.get(`/customer-portal/invoices${statusFilter}`);\n      return response.data;\n    }\n  );\n\n  const invoices = data?.data?.invoices || data?.invoices || [];\n\n  const getStatusBadge = (status) => {\n    const badges = {\n      paid: 'bg-green-100 text-green-700',\n      pending: 'bg-yellow-100 text-yellow-700',\n      overdue: 'bg-red-100 text-red-700',\n      cancelled: 'bg-gray-100 text-gray-700'\n    };\n    return badges[status] || 'bg-gray-100 text-gray-700';\n  };\n\n  const getStatusIcon = (status) => {\n    const icons = {\n      paid: <CheckCircle className=\"h-4 w-4\" />,\n      pending: <Clock className=\"h-4 w-4\" />,\n      overdue: <AlertCircle className=\"h-4 w-4\" />\n    };\n    return icons[status];\n  };\n\n  const handleDownload = (invoice) => {\n    toast.success('Downloading invoice...');\n    // TODO: Implement PDF download\n  };\n\n  return (\n    <CustomerPortalLayout>\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-6\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2 flex items-center\">\n            <FileText className=\"h-7 w-7 mr-2 text-blue-600\" />\n            Invoice & Tagihan\n          </h1>\n          <p className=\"text-gray-600\">Lihat dan download invoice Anda</p>\n        </div>\n\n        {/* Filters */}\n        <div className=\"bg-white rounded-lg shadow-sm p-4 mb-6\">\n          <div className=\"flex flex-wrap gap-2\">\n            {['all', 'pending', 'overdue', 'paid'].map((status) => (\n              <button\n                key={status}\n                onClick={() => setFilter(status)}\n                className={`px-4 py-2 rounded-lg transition-colors ${\n                  filter === status\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {status === 'all' ? 'Semua' : status.charAt(0).toUpperCase() + status.slice(1)}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Invoices List */}\n        {isLoading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent\"></div>\n          </div>\n        ) : invoices.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-sm p-12 text-center\">\n            <FileText className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Belum ada invoice</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {invoices.map((invoice) => (\n              <div key={invoice.id} className=\"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow\">\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div>\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <h3 className=\"text-lg font-semibold text-gray-900\">{invoice.invoice_number}</h3>\n                      <span className={`px-3 py-1 text-sm rounded-full flex items-center space-x-1 ${getStatusBadge(invoice.status)}`}>\n                        {getStatusIcon(invoice.status)}\n                        <span>{invoice.status}</span>\n                      </span>\n                    </div>\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                      <span className=\"flex items-center\">\n                        <Calendar className=\"h-4 w-4 mr-1\" />\n                        {new Date(invoice.invoice_date).toLocaleDateString('id-ID')}\n                      </span>\n                      {invoice.due_date && (\n                        <span className=\"flex items-center\">\n                          <AlertCircle className=\"h-4 w-4 mr-1\" />\n                          Jatuh tempo: {new Date(invoice.due_date).toLocaleDateString('id-ID')}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-sm text-gray-600 mb-1\">Total</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      Rp {(invoice.total_amount || 0).toLocaleString('id-ID')}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"border-t border-gray-200 pt-4 mt-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"text-sm text-gray-600\">\n                      <p>Period: {invoice.period_start ? new Date(invoice.period_start).toLocaleDateString('id-ID') : '-'} - {invoice.period_end ? new Date(invoice.period_end).toLocaleDateString('id-ID') : '-'}</p>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <button\n                        onClick={() => handleDownload(invoice)}\n                        className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                      >\n                        <Download className=\"h-4 w-4\" />\n                        <span>Download PDF</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </CustomerPortalLayout>\n  );\n};\n\nexport default CustomerInvoicesPage;\n\n"],"names":["CustomerInvoicesPage","filter","setFilter","useState","data","isLoading","useQuery","__async","statusFilter","api","invoices","_a","getStatusBadge","status","getStatusIcon","jsx","CheckCircle","Clock","AlertCircle","handleDownload","invoice","toast","CustomerPortalLayout","jsxs","FileText","Calendar","Download"],"mappings":"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"}
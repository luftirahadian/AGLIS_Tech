var Is=Object.defineProperty,Ls=Object.defineProperties;var $s=Object.getOwnPropertyDescriptors;var ze=Object.getOwnPropertySymbols;var Ms=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable;var Ge=(j,a,p)=>a in j?Is(j,a,{enumerable:!0,configurable:!0,writable:!0,value:p}):j[a]=p,k=(j,a)=>{for(var p in a||(a={}))Ms.call(a,p)&&Ge(j,p,a[p]);if(ze)for(var p of ze(a))Es.call(a,p)&&Ge(j,p,a[p]);return j},w=(j,a)=>Ls(j,$s(a));var R=(j,a,p)=>new Promise((I,F)=>{var H=f=>{try{h(p.next(f))}catch(L){F(L)}},x=f=>{try{h(p.throw(f))}catch(L){F(L)}},h=f=>f.done?I(f.value):Promise.resolve(f.value).then(H,x);h((p=p.apply(j,a)).next())});import{j as e,C as K}from"./notifications-Bqg_XzuN.js";import{u as Vs,r as n,L as Os}from"./react-vendor-BQ7pSkNi.js";import{a as Ks,b as Je,u as Ue}from"./react-query-B7OIdD7u.js";import{J as Hs,L as Ys,D as qs,B as zs,V as be,ap as We,b as ee,ai as Gs,Q as Js,g as je,C as fe,aR as Xe,S as Us,x as ve,d as ye,p as Ws,m as Ze,W as Xs,Y as Zs,t as et,a8 as st,z as l,Z as tt,_ as at,$ as rt}from"./ui-vendor-D2dWw_HZ.js";import{r as P}from"./registrationService-NSS78rMw.js";import{u as it,s as C,K as B,L as lt,B as nt,a as ot,k as ct,f as se,l as dt,e as ut,b as es}from"./customers-CgSqGmrV.js";import"./charts-CREYXqqm.js";import"./socket-BFcXWKeu.js";import"./forms-Dmkgx8TD.js";const Nt=()=>{var Ie,Le,$e,Me,Ee,Ve,Oe,Ke,He,Ye;const j=Vs(),a=Ks(),{user:p,isAdmin:I,isSupervisor:F,isCustomerService:H}=it(),[x,h]=n.useState(1),[f,L]=n.useState(10),[r,Ne]=n.useState(null),[ss,ke]=n.useState(!1),[o,y]=n.useState(null),[$,Y]=n.useState(""),[te,ae]=n.useState(""),[re,ie]=n.useState(""),[M,ts]=n.useState("created_at"),[E,we]=n.useState("DESC"),[Ce,Se]=n.useState(!1),[m,Q]=n.useState({search:"",status:"",dateFilter:""}),[b,A]=n.useState([]),[as,T]=n.useState(!1),[rs,D]=n.useState(!1),[is,le]=n.useState(!1),[V,q]=n.useState({total:0,processed:0,succeeded:0,failed:0,currentItem:null}),[ls,ne]=n.useState(null),[_e,Re]=n.useState(""),[oe,Pe]=n.useState(null),[ns,z]=n.useState(!1),[S,G]=n.useState(null),[os,ce]=n.useState(!1),[cs,de]=n.useState(!1),[ds,ue]=n.useState(!1),[us,me]=n.useState(!1),[u,v]=n.useState(null),[xe,J]=n.useState(""),[he,Qe]=n.useState(new Date().toISOString().split("T")[0]),ms=s=>s?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s):"-",{data:c,isLoading:Ae}=Je(["registrations",m,x,f,M,E],()=>P.getAll(w(k({},m),{page:x,limit:f,sort_by:M,sort_order:E})),{keepPreviousData:!0}),{data:xs}=Je("registration-stats",()=>P.getStats(),{select:s=>s.data}),ge=Ue(({id:s,data:t})=>P.updateStatus(s,t),{onSuccess:s=>{var t;a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),y(null),Y(""),ae(""),ie(""),(t=s==null?void 0:s.data)!=null&&t.registration&&Ne(s.data.registration),l.success("Status berhasil diupdate")},onError:s=>{var t,i;l.error(((i=(t=s.response)==null?void 0:t.data)==null?void 0:i.message)||"Gagal update status")}}),U=Ue(s=>P.createCustomer(s),{onSuccess:s=>{a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),l.success("Customer dan ticket instalasi berhasil dibuat!"),ke(!1),Ne(null)},onError:s=>{var t,i;l.error(((i=(t=s.response)==null?void 0:t.data)==null?void 0:i.message)||"Gagal membuat customer")}}),hs=()=>{if(!r)return;let s={status:o,notes:$};if(o==="rejected"){if(!te.trim()){l.error("Alasan penolakan wajib diisi");return}s.rejection_reason=te}if(o==="survey_scheduled"){if(!re){l.error("Tanggal survey wajib diisi");return}s.survey_scheduled_date=re}if(o==="survey_completed"){if(!$.trim()){l.error("Hasil survey wajib diisi");return}s.notes=$}ge.mutate({id:r.id,data:s})},gs=s=>{G(s),z(!0)},ps=()=>{S&&(U.mutate(S.id),z(!1),G(null))},W=s=>{M===s?we(E==="ASC"?"DESC":"ASC"):(ts(s),we("DESC")),h(1)},X=s=>M!==s?e.jsx(tt,{className:"h-4 w-4 text-gray-400"}):E==="ASC"?e.jsx(at,{className:"h-4 w-4 text-blue-600"}):e.jsx(rt,{className:"h-4 w-4 text-blue-600"}),Te=s=>{const t={pending_verification:{label:"Pending",color:"bg-yellow-100 text-yellow-800"},verified:{label:"Verified",color:"bg-blue-100 text-blue-800"},survey_scheduled:{label:"Survey Scheduled",color:"bg-indigo-100 text-indigo-800"},survey_completed:{label:"Survey Done",color:"bg-purple-100 text-purple-800"},approved:{label:"Approved",color:"bg-green-100 text-green-800"},customer_created:{label:"Customer Created",color:"bg-emerald-100 text-emerald-800"},rejected:{label:"Rejected",color:"bg-red-100 text-red-800"}},i=t[s]||t.pending_verification;return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${i.color}`,children:i.label})},bs=()=>R(void 0,null,function*(){var s;try{Se(!0);const i=((s=(yield P.getAll(w(k({},m),{page:1,limit:1e4,sort_by:M,sort_order:E}))).data)==null?void 0:s.registrations)||[];if(i.length===0){l.error("Tidak ada data untuk di-export");return}const g=d=>({pending_verification:"Pending",verified:"Verified",survey_scheduled:"Survey Scheduled",survey_completed:"Survey Done",approved:"Approved",customer_created:"Customer Created",rejected:"Rejected",cancelled:"Cancelled"})[d]||d,N=i.map((d,O)=>({No:O+1,"Registration Number":d.registration_number,"Tanggal Daftar":se(d.created_at),"Nama Lengkap":d.full_name,Email:d.email||"-",WhatsApp:d.phone||"-","Alamat Lengkap":d.address||"-",Kota:d.city||"-",Package:d.package_name||"-","Harga Bulanan":dt(d.monthly_price),Status:g(d.status),"Verified Date":d.verified_at?se(d.verified_at):"-","Survey Scheduled":d.survey_scheduled_date?se(d.survey_scheduled_date):"-","Approved Date":d.approved_at?se(d.approved_at):"-","Rejection Reason":d.rejection_reason||"-","Preferred Install Date":d.preferred_installation_date?ct(d.preferred_installation_date):"-"})),Z=ut(N,"Registrations_Export","Registrations Data");l.success(`âœ… ${Z.rows} registrations berhasil di-export!`)}catch(t){console.error("Export error:",t),l.error("Gagal export data. Silakan coba lagi.")}finally{Se(!1)}}),js=s=>{s.target.checked?(A(Fe.map(t=>t.id)),T(!0)):(A([]),T(!1))},fs=s=>{if(b.includes(s))A(b.filter(t=>t!==s)),T(!1);else{const t=[...b,s];A(t),t.length===Fe.length&&T(!0)}},vs=()=>R(void 0,null,function*(){var s,t;if(b.length===0){l.error("Pilih registration terlebih dahulu");return}if(window.confirm(`Verify ${b.length} registration yang dipilih?`)){Re("Bulk Verify Registrations"),q({total:b.length,processed:0,succeeded:0,failed:0,currentItem:"Starting..."}),D(!0);try{const i=yield es.bulkVerifyRegistrations(b,{notes:"Bulk verified"});q({total:i.total,processed:i.total,succeeded:i.succeeded,failed:i.failed,currentItem:null}),setTimeout(()=>{D(!1),ne(i),le(!0),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),A([]),T(!1),i.failed===0?l.success(`âœ… ${i.succeeded} registration berhasil di-verify`):l.warning(`âš ï¸ ${i.succeeded} berhasil, ${i.failed} gagal`)},1e3)}catch(i){console.error("Bulk verify error:",i),D(!1),l.error(((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.message)||"Gagal verify registration")}}}),ys=()=>R(void 0,null,function*(){var t,i;if(b.length===0){l.error("Pilih registration terlebih dahulu");return}const s=window.prompt("Alasan reject (akan diterapkan ke semua):");if(s&&window.confirm(`âš ï¸ Reject ${b.length} registration?`)){Re("Bulk Reject Registrations"),q({total:b.length,processed:0,succeeded:0,failed:0,currentItem:"Starting..."}),D(!0);try{const g=yield es.bulkRejectRegistrations(b,{rejection_reason:s,notes:"Bulk rejected"});q({total:g.total,processed:g.total,succeeded:g.succeeded,failed:g.failed,currentItem:null}),setTimeout(()=>{D(!1),ne(g),le(!0),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),A([]),T(!1),g.failed===0?l.success(`âœ… ${g.succeeded} registration berhasil di-reject`):l.warning(`âš ï¸ ${g.succeeded} berhasil, ${g.failed} gagal`)},1e3)}catch(g){console.error("Bulk reject error:",g),D(!1),l.error(((i=(t=g.response)==null?void 0:t.data)==null?void 0:i.message)||"Gagal reject registration")}}}),Ns=s=>R(void 0,null,function*(){A(s)}),pe=(s,t)=>{navigator.clipboard.writeText(s).then(()=>{Pe(t),l.success(`${t} berhasil di-copy!`),setTimeout(()=>Pe(null),2e3)}).catch(i=>{l.error("Gagal copy ke clipboard"),console.error("Copy error:",i)})},ks=(s,t)=>{s.stopPropagation(),v(t),ce(!0)},ws=()=>R(void 0,null,function*(){if(u)try{yield P.updateStatus(u.id,"verified",{notes:"Quick verified"}),l.success(`Registration ${u.registration_number} verified`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),ce(!1),v(null)}catch(s){l.error("Failed to verify registration"),console.error("Quick verify error:",s)}}),Cs=(s,t)=>{s.stopPropagation(),v(t),J(""),de(!0)},Ss=()=>R(void 0,null,function*(){if(u){if(!xe.trim()){l.error("Alasan reject wajib diisi");return}try{yield P.updateStatus(u.id,"rejected",{rejection_reason:xe,notes:"Quick rejected"}),l.success(`Registration ${u.registration_number} rejected`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),de(!1),v(null),J("")}catch(s){l.error("Failed to reject registration"),console.error("Quick reject error:",s)}}}),_s=(s,t)=>{s.stopPropagation(),window.location.href=`tel:${t}`},Rs=(s,t)=>{s.stopPropagation(),window.location.href=`mailto:${t}`},Ps=(s,t)=>{s.stopPropagation(),G(t),z(!0)},Qs=(s,t)=>{s.stopPropagation(),v(t),ue(!0)},As=()=>R(void 0,null,function*(){if(u)try{yield P.updateStatus(u.id,"approved",{notes:"Quick approved"}),l.success(`Registration ${u.registration_number} approved`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),ue(!1),v(null)}catch(s){l.error("Failed to approve registration"),console.error("Quick approve error:",s)}}),Ts=(s,t)=>{s.stopPropagation(),v(t),Qe(new Date().toISOString().split("T")[0]),me(!0)},Ds=()=>R(void 0,null,function*(){if(u){if(!he){l.error("Tanggal survey wajib diisi");return}try{yield P.updateStatus(u.id,"survey_scheduled",{survey_date:he,notes:"Survey scheduled via quick action"}),l.success(`Survey scheduled for ${u.registration_number}`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),me(!1),v(null)}catch(s){l.error("Failed to schedule survey"),console.error("Quick schedule survey error:",s)}}}),Bs=I||F||H,De=I||F||H,Be=I||F,_=xs||{},Fs=((Le=(Ie=c==null?void 0:c.data)==null?void 0:Ie.pagination)==null?void 0:Le.total)||0,Fe=(($e=c==null?void 0:c.data)==null?void 0:$e.registrations)||[];return n.useEffect(()=>{const s=N=>{console.log("ðŸ”„ [RegistrationsPage] Registration update received:",N),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),l.success("Data registrasi telah diperbarui!")},t=N=>{var Z,d,O,qe;console.log("âœ¨ [RegistrationsPage] New registration event received:",N),console.log("ðŸ“‹ [RegistrationsPage] Registration details:",{registration_number:(Z=N.registration)==null?void 0:Z.registration_number,full_name:(d=N.registration)==null?void 0:d.full_name,phone:(O=N.registration)==null?void 0:O.phone}),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),console.log("ðŸ”„ [RegistrationsPage] Queries invalidated, data will refetch"),l.success(`ðŸŽ‰ Pendaftaran baru dari ${((qe=N.registration)==null?void 0:qe.full_name)||"customer"}!`,{duration:5e3,icon:"ðŸŽ‰",style:{background:"#10B981",color:"#fff",fontWeight:"bold"}}),console.log("ðŸŽŠ [RegistrationsPage] Toast notification shown")},i=N=>{console.log("ðŸ‘¤ [RegistrationsPage] Customer created:",N),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats")},g=()=>{if(!C.isConnected){console.log("â³ [RegistrationsPage] Socket not connected yet, waiting..."),setTimeout(g,500);return}console.log("ðŸ”Œ [RegistrationsPage] Socket connected, registering listeners..."),C.on("new_registration",t),C.on("registration-updated",s),C.on("registration_updated",s),C.on("customer-created",i),C.on("registration_status_changed",s),console.log("ðŸ“¡ [RegistrationsPage] Socket.IO listeners registered for registrations")};return g(),()=>{C.off("new_registration",t),C.off("registration-updated",s),C.off("registration_updated",s),C.off("customer-created",i),C.off("registration_status_changed",s),console.log("ðŸ“¡ [RegistrationsPage] Socket.IO listeners cleaned up")}},[a]),Bs?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pendaftaran Customer"}),e.jsx("p",{className:"text-gray-600",children:"Kelola pendaftaran customer baru dari public form"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:bs,disabled:Ce||Ae,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors inline-flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:Ce?e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),"Export to Excel"]})}),e.jsxs(Os,{to:"/registration-analytics",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(zs,{className:"-ml-1 mr-2 h-5 w-5"}),"Analytics"]}),e.jsxs("a",{href:"/register",target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Form Pendaftaran"]})]})]}),b.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[b.length," registration dipilih"]}),e.jsx("button",{onClick:()=>{A([]),T(!1)},className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:"Batal Pilihan"})]}),e.jsxs("div",{className:"flex gap-2",children:[De&&e.jsxs("button",{onClick:vs,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm inline-flex items-center",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),"Verify"]}),Be&&e.jsxs("button",{onClick:ys,className:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm inline-flex items-center",children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(B,{icon:Gs,title:"Total Pendaftaran",value:_.total_registrations||0,color:"blue"}),e.jsx(B,{icon:Js,title:"Need Review",value:(parseInt(_.pending_verification)||0)+(parseInt(_.verified)||0),color:"yellow",onClick:()=>{const s=m.status==="pending_verification"||m.status==="verified";Q(w(k({},m),{status:s?"":"pending_verification",dateFilter:""})),h(1)}}),e.jsx(B,{icon:je,title:"Survey",value:(parseInt(_.survey_scheduled)||0)+(parseInt(_.survey_completed)||0),color:"indigo",onClick:()=>{const s=m.status==="survey_scheduled"||m.status==="survey_completed";Q(w(k({},m),{status:s?"":"survey_scheduled",dateFilter:""})),h(1)}}),e.jsx(B,{icon:fe,title:"Approved",value:_.approved||0,color:"green",onClick:()=>{Q(w(k({},m),{status:m.status==="approved"?"":"approved",dateFilter:""})),h(1)}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(B,{icon:Xe,title:"Customer Created",value:_.customer_created||0,color:"emerald",onClick:()=>{Q(w(k({},m),{status:m.status==="customer_created"?"":"customer_created",dateFilter:""})),h(1)}}),e.jsx(B,{icon:ee,title:"Rejected",value:_.rejected||0,color:"red",onClick:()=>{Q(w(k({},m),{status:m.status==="rejected"?"":"rejected",dateFilter:""})),h(1)}}),e.jsx(B,{icon:je,title:"Today's New",value:_.today_registrations||0,color:"orange",onClick:()=>{Q(w(k({},m),{status:"",dateFilter:m.dateFilter==="today"?"":"today"})),h(1)}})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"h-4 w-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari nama, email, nomor...",className:"form-input pl-10",value:m.search,onChange:s=>Q(w(k({},m),{search:s.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"form-input",value:m.status,onChange:s=>Q(w(k({},m),{status:s.target.value})),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"pending_verification",children:"Pending Verification"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"survey_scheduled",children:"Survey Scheduled"}),e.jsx("option",{value:"survey_completed",children:"Survey Completed"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"customer_created",children:"Customer Created"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["All Registrations",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",Fs," total)"]})]})}),e.jsxs("div",{className:"card-body p-0",children:[Ae?e.jsx("div",{className:"py-12",children:e.jsx(lt,{className:"mx-auto"})}):((Me=c==null?void 0:c.data)==null?void 0:Me.registrations.length)===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada pendaftaran"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Pendaftaran akan muncul setelah customer mengisi form pendaftaran"}),e.jsxs("a",{href:"/register",target:"_blank",rel:"noopener noreferrer",className:"btn-primary inline-flex items-center",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Buka Form Pendaftaran"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell w-12",children:e.jsx("input",{type:"checkbox",checked:as,onChange:js,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Pilih Semua"})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>W("registration_number"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Nomor Registrasi"}),X("registration_number")]})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>W("full_name"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Customer"}),X("full_name")]})}),e.jsx("th",{className:"table-header-cell",children:"Paket"}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>W("status"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Status"}),X("status")]})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>W("created_at"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tanggal"}),X("created_at")]})}),e.jsx("th",{className:"table-header-cell",children:"Quick Actions"})]})}),e.jsx("tbody",{className:"table-body",children:(Ee=c==null?void 0:c.data)==null?void 0:Ee.registrations.map(s=>e.jsxs("tr",{onClick:()=>j(`/registrations/${s.id}`),className:"group cursor-pointer hover:bg-blue-50 hover:shadow-md hover:border-l-4 hover:border-l-green-500 transition-all duration-200",title:"Klik untuk lihat detail registrasi",children:[e.jsx("td",{className:"table-cell",onClick:t=>t.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:b.includes(s.id),onChange:()=>fs(s.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsxs("td",{className:"table-cell",children:[e.jsxs("div",{className:"font-medium text-blue-600 flex items-center gap-1",children:[e.jsx("span",{children:s.registration_number}),e.jsx("button",{onClick:t=>{t.stopPropagation(),pe(s.registration_number,"Registration Number")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Registration Number",children:oe==="Registration Number"?e.jsx(ve,{className:"h-3 w-3 text-green-600"}):e.jsx(ye,{className:"h-3 w-3 text-gray-500"})})]}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("id-ID")})]}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.full_name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1 gap-1",children:[e.jsx(Ws,{className:"h-3 w-3"}),e.jsx("span",{children:s.phone}),e.jsx("button",{onClick:t=>{t.stopPropagation(),pe(s.phone,"Phone")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Phone",children:oe==="Phone"?e.jsx(ve,{className:"h-3 w-3 text-green-600"}):e.jsx(ye,{className:"h-3 w-3 text-gray-500"})})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 gap-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:s.email}),e.jsx("button",{onClick:t=>{t.stopPropagation(),pe(s.email,"Email")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Email",children:oe==="Email"?e.jsx(ve,{className:"h-3 w-3 text-green-600"}):e.jsx(ye,{className:"h-3 w-3 text-gray-500"})})]})]}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"font-medium",children:s.package_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[ms(s.monthly_price),"/bln"]})]}),e.jsx("td",{className:"table-cell",children:Te(s.status)}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(s.created_at).toLocaleDateString("id-ID")}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleTimeString("id-ID")})]}),e.jsx("td",{className:"table-cell",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.phone&&e.jsx("button",{onClick:t=>_s(t,s.phone),className:"p-1.5 hover:bg-green-100 rounded transition-colors",title:"Call Customer",children:e.jsx(Xs,{className:"h-4 w-4 text-green-600"})}),s.email&&e.jsx("button",{onClick:t=>Rs(t,s.email),className:"p-1.5 hover:bg-blue-100 rounded transition-colors",title:"Email Customer",children:e.jsx(Ze,{className:"h-4 w-4 text-blue-600"})}),De&&s.status==="pending_verification"&&e.jsx("button",{onClick:t=>ks(t,s),className:"p-1.5 hover:bg-blue-100 rounded transition-colors",title:"Quick Verify",children:e.jsx(We,{className:"h-4 w-4 text-blue-600"})}),Be&&!["customer_created","rejected","cancelled"].includes(s.status)&&e.jsx("button",{onClick:t=>Cs(t,s),className:"p-1.5 hover:bg-red-100 rounded transition-colors",title:"Quick Reject",children:e.jsx(ee,{className:"h-4 w-4 text-red-600"})}),s.status==="verified"&&e.jsx("button",{onClick:t=>Qs(t,s),className:"p-1.5 hover:bg-green-100 rounded transition-colors",title:"Quick Approve",children:e.jsx(fe,{className:"h-4 w-4 text-green-600"})}),s.status==="verified"&&e.jsx("button",{onClick:t=>Ts(t,s),className:"p-1.5 hover:bg-orange-100 rounded transition-colors",title:"Quick Schedule Survey",children:e.jsx(je,{className:"h-4 w-4 text-orange-600"})}),s.status==="approved"&&!s.customer_id&&e.jsx("button",{onClick:t=>Ps(t,s),className:"p-1.5 hover:bg-purple-100 rounded transition-colors",title:"Quick Create Customer",children:e.jsx(Xe,{className:"h-4 w-4 text-purple-600"})})]})})]},s.id))})]})}),((Oe=(Ve=c==null?void 0:c.data)==null?void 0:Ve.registrations)==null?void 0:Oe.length)>0&&((Ke=c==null?void 0:c.data)==null?void 0:Ke.pagination)&&e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>h(Math.max(1,x-1)),disabled:x===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>h(Math.min(c.data.pagination.pages,x+1)),disabled:x===c.data.pagination.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Show"}),e.jsxs("select",{value:f,onChange:s=>{L(parseInt(s.target.value)),h(1)},className:"form-input py-1 px-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"rows"})]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(x-1)*f+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(x*f,c.data.pagination.total)})," ","of ",e.jsx("span",{className:"font-medium",children:c.data.pagination.total})," results"]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>h(Math.max(1,x-1)),disabled:x===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Zs,{className:"h-5 w-5"})}),Array.from({length:Math.min(c.data.pagination.pages,10)},(s,t)=>{const i=c.data.pagination.pages;return i<=10||x<=5?t+1:x>=i-4?i-9+t:x-5+t}).map(s=>e.jsx("button",{onClick:()=>h(s),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${x===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:s},s)),e.jsx("button",{onClick:()=>h(Math.min(c.data.pagination.pages,x+1)),disabled:x===c.data.pagination.pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(et,{className:"h-5 w-5"})})]})})]})]})})]}),ss&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Detail Pendaftaran"}),e.jsx("button",{onClick:()=>ke(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ee,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:Te(r.status)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nomor Registrasi"}),e.jsx("p",{className:"text-lg font-bold text-blue-600 mt-1",children:r.registration_number})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Pribadi"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nama Lengkap"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"WhatsApp"}),e.jsxs("p",{className:"font-medium text-green-600 flex items-center",children:[r.phone,e.jsx(st,{className:"h-4 w-4 ml-1",title:"Verified"})]})]}),r.id_card_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nomor KTP"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.id_card_number})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alamat"}),e.jsx("p",{className:"text-gray-900",children:r.address}),(r.rt||r.rw)&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["RT ",r.rt||"-"," / RW ",r.rw||"-"]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[r.kelurahan,", ",r.kecamatan,", ",r.city," ",r.postal_code]}),r.address_notes&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2 italic",children:["Catatan: ",r.address_notes]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Paket"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:r.package_name}),e.jsxs("p",{className:"text-lg text-gray-600 mt-1",children:[r.bandwidth_down," Mbps"]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:["Rp ",(He=r.monthly_price)==null?void 0:He.toLocaleString("id-ID"),"/bulan"]})]})]}),!["rejected"].includes(r.status)&&r.status!=="customer_created"&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r.status==="approved"&&!r.customer_id?"Create Customer":"Available Actions"}),r.status==="pending_verification"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:o==="verified"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"verified",checked:o==="verified",onChange:s=>y(s.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âœ… Verify - Verifikasi Data"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data sudah diperiksa dan valid"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:o==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:o==="rejected",onChange:s=>y(s.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âŒ Reject - Tolak Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data tidak valid atau tidak memenuhi syarat"})]})]})]})}),r.status==="verified"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:o==="approved"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"approved",checked:o==="approved",onChange:s=>y(s.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âœ… Approve - Setujui Langsung"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Skip survey, langsung create customer (Fast Track)"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-indigo-50 transition-colors",style:{borderColor:o==="survey_scheduled"?"#6366f1":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"survey_scheduled",checked:o==="survey_scheduled",onChange:s=>y(s.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"ðŸ“… Schedule Survey"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Jadwalkan survey lokasi terlebih dahulu"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:o==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:o==="rejected",onChange:s=>y(s.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âŒ Reject - Tolak Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data tidak memenuhi syarat"})]})]})]})}),r.status==="survey_scheduled"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 border-2 border-indigo-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-900",children:"ðŸ“… Survey Scheduled"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Survey telah dijadwalkan. Setelah survey dilakukan, update status di bawah ini."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:o==="survey_completed"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"survey_completed",checked:o==="survey_completed",onChange:s=>y(s.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âœ… Survey Completed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Survey sudah selesai, lokasi feasible untuk instalasi"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:o==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:o==="rejected",onChange:s=>y(s.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âŒ Reject - Tidak Feasible"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi tidak memungkinkan untuk instalasi"})]})]})]})]}),r.status==="survey_completed"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"âœ… Survey Completed"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Survey sudah selesai. Pilih tindakan selanjutnya di bawah ini."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:o==="approved"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"approved",checked:o==="approved",onChange:s=>y(s.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âœ… Approve - Setujui Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi feasible, siap untuk create customer"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:o==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:o==="rejected",onChange:s=>y(s.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"âŒ Reject - Tidak Feasible"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Hasil survey menunjukkan lokasi tidak layak"})]})]})]})]}),r.status==="approved"&&!r.customer_id&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"ðŸŽ‰ Registration Approved!"}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Pendaftaran sudah disetujui. Klik tombol di bawah untuk membuat data customer dan ticket instalasi."})]}),e.jsx("button",{onClick:()=>gs(r),disabled:U.isLoading,className:"w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 transition-colors inline-flex items-center justify-center",children:U.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(HomeIcon,{className:"h-5 w-5 mr-2"}),"Buat Customer & Ticket Instalasi"]})})]}),o&&r.status!=="approved"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[o==="survey_scheduled"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Survey ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:re,onChange:s=>ie(s.target.value),className:"form-input",min:new Date().toISOString().slice(0,16)})]}),o==="survey_completed"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Hasil Survey ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:4,value:$,onChange:s=>Y(s.target.value),className:"form-input",placeholder:"Contoh: Survey completed successfully. ODP distance: 50m. Cable needed: 60m. No obstacles found. Location is feasible for installation."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ðŸ’¡ Tips: Sebutkan jarak ODP, panjang kabel needed, hambatan (jika ada), dan kesimpulan kelayakan instalasi."})]}),o==="rejected"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alasan Penolakan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:3,value:te,onChange:s=>ae(s.target.value),className:"form-input",placeholder:"Jelaskan alasan penolakan secara detail..."})]}),o!=="survey_completed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan (Opsional)"}),e.jsx("textarea",{rows:2,value:$,onChange:s=>Y(s.target.value),className:"form-input",placeholder:"Tambahkan catatan tambahan..."})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{y(null),Y(""),ae(""),ie("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Batal"}),e.jsx("button",{onClick:hs,disabled:ge.isLoading,className:`
                              px-6 py-2 rounded-lg text-white transition-colors inline-flex items-center
                              ${o==="rejected"?"bg-red-600 hover:bg-red-700":o==="survey_scheduled"?"bg-indigo-600 hover:bg-indigo-700":"bg-green-600 hover:bg-green-700"}
                              disabled:bg-gray-400 disabled:cursor-not-allowed
                            `,children:ge.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-5 w-5 mr-2"}),"Konfirmasi"]})})]})]})]})]})]})})]}),e.jsx(K,{isOpen:ns,onClose:()=>{z(!1),G(null)},onConfirm:ps,title:"ðŸ  Buat Customer & Ticket Instalasi",message:S?`Apakah Anda yakin ingin membuat customer dan ticket instalasi untuk "${S.full_name}"?`:"",confirmText:"Ya, Buat Customer",cancelText:"Batal",type:"success",isLoading:U.isLoading,children:S&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2",children:[e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Nama:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.full_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"No. HP:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.phone||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Paket:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.service_package||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Alamat:"}),e.jsxs("span",{className:"font-medium text-gray-900 text-right ml-2",children:[(Ye=S.installation_address)==null?void 0:Ye.substring(0,40),"..."]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["âœ… Customer baru akan dibuat",e.jsx("br",{}),"ðŸŽ« Ticket instalasi akan otomatis dibuatkan",e.jsx("br",{}),"ðŸ“§ Notifikasi akan dikirim"]})})]})}),e.jsx(K,{isOpen:os,onClose:()=>{ce(!1),v(null)},onConfirm:ws,title:"âœ… Verifikasi Data",message:u?`Verifikasi data pendaftaran dari "${u.full_name}"?`:"",confirmText:"Ya, Verifikasi",cancelText:"Batal",type:"info",children:u&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["âœ… Status akan berubah menjadi ",e.jsx("span",{className:"font-semibold text-blue-900",children:'"Verified"'}),e.jsx("br",{}),"ðŸ“‹ Data sudah diperiksa dan valid"]})})}),e.jsx(K,{isOpen:ds,onClose:()=>{ue(!1),v(null)},onConfirm:As,title:"âœ… Approve Registrasi",message:u?`Setujui pendaftaran dari "${u.full_name}"?`:"",confirmText:"Ya, Approve",cancelText:"Batal",type:"success",children:u&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-2",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["âœ… Status akan berubah menjadi ",e.jsx("span",{className:"font-semibold text-green-900",children:'"Approved"'}),e.jsx("br",{}),"ðŸŽ‰ Pendaftaran disetujui"]})})}),e.jsx(K,{isOpen:us,onClose:()=>{me(!1),v(null)},onConfirm:Ds,title:"ðŸ“… Jadwalkan Survey",message:u?`Jadwalkan survey untuk "${u.full_name}"`:"",confirmText:"Ya, Jadwalkan",cancelText:"Batal",type:"warning",children:u&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Survey *"}),e.jsx("input",{type:"date",value:he,onChange:s=>Qe(s.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})}),e.jsx(K,{isOpen:cs,onClose:()=>{de(!1),v(null),J("")},onConfirm:Ss,title:"âŒ Reject Registrasi",message:u?`Tolak pendaftaran dari "${u.full_name}"?`:"",confirmText:"Ya, Reject",cancelText:"Batal",type:"danger",children:u&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alasan Reject *"}),e.jsx("textarea",{value:xe,onChange:s=>J(s.target.value),rows:3,placeholder:"Tuliskan alasan reject...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none"})]})}),e.jsx(nt,{isOpen:rs,total:V.total,processed:V.processed,succeeded:V.succeeded,failed:V.failed,currentItem:V.currentItem,operation:_e,onCancel:()=>D(!1)}),e.jsx(ot,{isOpen:is,results:ls,operation:_e,onClose:()=>{le(!1),ne(null)},onRetryFailed:Ns})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96",children:[e.jsx(Hs,{className:"h-24 w-24 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access Registrations."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Required role: Admin, Supervisor, or Customer Service"})]})};export{Nt as default};
//# sourceMappingURL=RegistrationsPage-DAKnHwGZ.js.map

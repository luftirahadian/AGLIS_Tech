var R=Object.defineProperty,U=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var M=(s,a,i)=>a in s?R(s,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[a]=i,d=(s,a)=>{for(var i in a||(a={}))X.call(a,i)&&M(s,i,a[i]);if(E)for(var i of E(a))J.call(a,i)&&M(s,i,a[i]);return s},N=(s,a)=>U(s,W(a));var h=(s,a,i)=>new Promise((p,r)=>{var b=m=>{try{x(i.next(m))}catch(u){r(u)}},c=m=>{try{x(i.throw(m))}catch(u){r(u)}},x=m=>m.done?p(m.value):Promise.resolve(m.value).then(b,c);x((i=i.apply(s,a)).next())});import{a as g,j as e}from"./notifications-DWMisRkI.js";import{r as y}from"./react-vendor-BQ7pSkNi.js";import{u as D,a as Y,b as Z}from"./react-query-B7OIdD7u.js";import{L as ee,K as k}from"./customers-B56UMpVp.js";import{u as te}from"./forms-Dmkgx8TD.js";import{X as se,z as S,P as q,q as w,A as ae,S as ie,a5 as le,T as re}from"./ui-vendor-r_Nxhu34.js";import"./charts-CREYXqqm.js";import"./socket-BFcXWKeu.js";const _={getAll:()=>h(void 0,null,function*(){return yield g.get("/inventory")}),getById:s=>h(void 0,null,function*(){return yield g.get(`/inventory/${s}`)}),create:s=>h(void 0,null,function*(){return yield g.post("/inventory",s)}),update:(s,a)=>h(void 0,null,function*(){return yield g.put(`/inventory/${s}`,a)}),delete:s=>h(void 0,null,function*(){return yield g.delete(`/inventory/${s}`)}),adjustStock:(s,a)=>h(void 0,null,function*(){return yield g.post(`/inventory/${s}/adjust`,a)})},ne=({item:s,onClose:a,onSuccess:i})=>{const p=!!s,{register:r,handleSubmit:b,formState:{errors:c,isSubmitting:x},reset:m}=te({defaultValues:s||{item_code:"",name:"",category:"",description:"",unit:"pcs",unit_price:"",minimum_stock:10,current_stock:0,location:"",supplier:"",is_active:!0}});y.useEffect(()=>{s&&m(s)},[s,m]);const u=D(n=>p?_.update(s.id,n):_.create(n),{onSuccess:()=>{S.success(p?"Item berhasil diupdate":"Item berhasil ditambahkan"),i()},onError:n=>{var j,l;S.error(((l=(j=n.response)==null?void 0:j.data)==null?void 0:l.message)||"Terjadi kesalahan")}}),v=n=>{const j=N(d({},n),{is_active:n.is_active==="true"||n.is_active===!0,unit_price:parseFloat(n.unit_price)||0,minimum_stock:parseInt(n.minimum_stock)||0,current_stock:parseInt(n.current_stock)||0});u.mutate(j)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:p?"Edit Item":"Tambah Item Baru"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:b(v),className:"p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Informasi Dasar"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kode Item ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",d({type:"text",className:"input-field",placeholder:"INV-001"},r("item_code",{required:"Kode item wajib diisi",minLength:{value:3,message:"Kode minimal 3 karakter"}}))),c.item_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.item_code.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nama Item ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",d({type:"text",className:"input-field",placeholder:"Nama item"},r("name",{required:"Nama item wajib diisi"}))),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name.message})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Kategori & Satuan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",N(d({className:"input-field"},r("category",{required:"Kategori wajib dipilih"})),{children:[e.jsx("option",{value:"",children:"Pilih Kategori"}),e.jsx("option",{value:"Hardware",children:"Hardware"}),e.jsx("option",{value:"Cable",children:"Cable"}),e.jsx("option",{value:"Network Equipment",children:"Network Equipment"}),e.jsx("option",{value:"Tools",children:"Tools"}),e.jsx("option",{value:"Accessories",children:"Accessories"}),e.jsx("option",{value:"Consumables",children:"Consumables"})]})),c.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.category.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Satuan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",d({type:"text",className:"input-field",placeholder:"pcs, meter, box"},r("unit",{required:"Satuan wajib diisi"}))),c.unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.unit.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Harga Satuan (Rp)"}),e.jsx("input",d({type:"number",className:"input-field",placeholder:"0",step:"0.01"},r("unit_price")))]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Informasi Stok"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Stok Minimal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",d({type:"number",className:"input-field",min:"0"},r("minimum_stock",{required:"Stok minimal wajib diisi",min:{value:0,message:"Tidak boleh negatif"}}))),c.minimum_stock&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.minimum_stock.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stok Saat Ini"}),e.jsx("input",d({type:"number",className:"input-field",min:"0"},r("current_stock",{min:{value:0,message:"Tidak boleh negatif"}})))]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Lokasi & Supplier"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lokasi"}),e.jsx("input",d({type:"text",className:"input-field",placeholder:"Gudang A, Rak 1"},r("location")))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier"}),e.jsx("input",d({type:"text",className:"input-field",placeholder:"Nama supplier"},r("supplier")))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi"}),e.jsx("textarea",d({className:"input-field",rows:"2",placeholder:"Deskripsi item"},r("description")))]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",N(d({type:"radio",value:"true"},r("is_active")),{className:"mr-2"})),"Active"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",N(d({type:"radio",value:"false"},r("is_active")),{className:"mr-2"})),"Inactive"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-secondary",disabled:x,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:x,children:x?"Menyimpan...":p?"Update Item":"Tambah Item"})]})]})]})})},ge=()=>{var T;const[s,a]=y.useState(""),[i,p]=y.useState("all"),[r,b]=y.useState("all"),[c,x]=y.useState(!1),[m,u]=y.useState(null),v=Y(),{data:n,isLoading:j}=Z(["inventory-items"],_.getAll,{refetchOnWindowFocus:!1}),l=Array.isArray(n)?n:((T=n==null?void 0:n.data)==null?void 0:T.items)||(n==null?void 0:n.items)||[],P=D(t=>_.delete(t),{onSuccess:()=>{S.success("Item berhasil dihapus"),v.invalidateQueries(["inventory-items"])},onError:t=>{var o,f;S.error(((f=(o=t.response)==null?void 0:o.data)==null?void 0:f.message)||"Gagal menghapus item")}}),I=(l==null?void 0:l.filter(t=>{var A,K;const o=((A=t.name)==null?void 0:A.toLowerCase().includes(s.toLowerCase()))||((K=t.item_code)==null?void 0:K.toLowerCase().includes(s.toLowerCase())),f=i==="all"||t.category===i,G=r==="all"||r==="low"&&t.current_stock<=t.minimum_stock||r==="available"&&t.current_stock>t.minimum_stock;return o&&f&&G}))||[],$=(l==null?void 0:l.length)||0,F=(l==null?void 0:l.filter(t=>t.is_active).length)||0,B=(l==null?void 0:l.filter(t=>t.current_stock<=t.minimum_stock).length)||0,Q=(l==null?void 0:l.reduce((t,o)=>t+o.current_stock*(o.unit_price||0),0))||0,V=[...new Set((l==null?void 0:l.map(t=>t.category).filter(Boolean))||[])],C=()=>{u(null),x(!0)},z=t=>{u(t),x(!0)},H=(t,o)=>{window.confirm(`Apakah Anda yakin ingin menghapus item "${o}"?`)&&P.mutate(t)},L=()=>{x(!1),u(null)},O=()=>{v.invalidateQueries(["inventory-items"]),L()};return j?e.jsx("div",{className:"flex justify-center items-center min-h-96",children:e.jsx(ee,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),e.jsx("p",{className:"text-gray-600",children:"Kelola stok barang dan peralatan"})]}),e.jsxs("button",{onClick:C,className:"btn-primary",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Tambah Item"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(k,{icon:w,title:"Total Items",value:$,color:"blue"}),e.jsx(k,{icon:w,title:"Active Items",value:F,color:"green"}),e.jsx(k,{icon:ae,title:"Low Stock",value:B,color:"red"}),e.jsx(k,{icon:w,title:"Total Value",value:`Rp ${Q.toLocaleString("id-ID")}`,color:"purple"})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari item...",className:"input-field pl-10",value:s,onChange:t=>a(t.target.value)})]}),e.jsxs("select",{className:"input-field",value:i,onChange:t=>p(t.target.value),children:[e.jsx("option",{value:"all",children:"Semua Kategori"}),V.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{className:"input-field",value:r,onChange:t=>b(t.target.value),children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"low",children:"Low Stock"})]})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:I.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tidak ada item"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Mulai dengan menambahkan item pertama"}),e.jsxs("button",{onClick:C,className:"btn-primary",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Tambah Item"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kategori"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(t=>{const o=t.current_stock<=t.minimum_stock;return e.jsxs("tr",{className:`hover:bg-gray-50 ${o?"bg-red-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.item_code})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.description&&e.jsx("div",{className:"text-xs text-gray-500",children:t.description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.category||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[t.current_stock," ",t.unit,o&&e.jsxs("span",{className:"ml-2 text-xs text-red-600",children:["(Min: ",t.minimum_stock,")"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.unit_price?`Rp ${parseInt(t.unit_price).toLocaleString("id-ID")}`:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.location||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o?e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Low Stock"}):e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Available"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>z(t),className:"inline-flex items-center justify-center w-8 h-8 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Item",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>H(t.id,t.name),className:"inline-flex items-center justify-center w-8 h-8 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors",title:"Delete Item",children:e.jsx(re,{className:"h-4 w-4"})})]})})]},t.id)})})]})})}),c&&e.jsx(ne,{item:m,onClose:L,onSuccess:O})]})};export{ge as default};
//# sourceMappingURL=InventoryPage-OBYpvRFS.js.map

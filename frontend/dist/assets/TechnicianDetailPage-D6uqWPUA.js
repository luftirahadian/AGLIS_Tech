var ee=Object.defineProperty,se=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var M=(i,n,c)=>n in i?ee(i,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[n]=c,m=(i,n)=>{for(var c in n||(n={}))ae.call(n,c)&&M(i,c,n[c]);if(F)for(var c of F(n))le.call(n,c)&&M(i,c,n[c]);return i},h=(i,n)=>se(i,te(n));import{j as e}from"./notifications-DGuCqj8i.js";import{e as ie,u as re,r as w}from"./react-vendor-BQ7pSkNi.js";import{a as ne,b as ce,u as de}from"./react-query-B7OIdD7u.js";import{L as oe,B as z}from"./customers-BMsGxBIX.js";import{t as P}from"./tickets-D2w8MpGD.js";import{a as xe,U as me,w as k,ad as he,aD as O,C as _,K as ge,a7 as q,e as be,o as ue,O as C,m as pe,aE as je,p as ve,a9 as ye,a5 as S,t as T,X as A,ab as L,aa as Ne,a6 as fe,g as we,B as ke,z as b}from"./ui-vendor-DFmaqm_b.js";import"./charts-CREYXqqm.js";import"./socket-BFcXWKeu.js";import"./forms-Dmkgx8TD.js";const Me=()=>{var $,D;const{id:i}=ie(),n=re(),c=ne(),[u,W]=w.useState("overview"),[o,p]=w.useState({availability:!1,employment:!1,skill:!1}),[d,g]=w.useState({}),{data:x,isLoading:I,error:Q}=ce(["technician",i],()=>P.getTechnician(i),{enabled:!!i,staleTime:1e4,refetchOnWindowFocus:!0}),R=de(s=>P.updateTechnician(i,s),{onSuccess:()=>{b.success("Status updated successfully!"),c.invalidateQueries(["technician",i]),c.invalidateQueries(["technicians"]),p({availability:!1,employment:!1,skill:!1})},onError:s=>{var a,l;b.error(((l=(a=s.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to update status")}});if(I)return e.jsx("div",{className:"flex justify-center items-center min-h-96",children:e.jsx(oe,{})});if(Q||!(($=x==null?void 0:x.data)!=null&&$.technician))return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(xe,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Technician Not Found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Teknisi yang Anda cari tidak ditemukan"}),e.jsx(z,{to:"/technicians",label:"Back to Technicians"})]});const t=x.data.technician,r=x.data.stats||{},j=x.data.recent_tickets||[],U=x.data.active_tickets||[],v=x.data.equipment||[],V=s=>s?new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",B=s=>{if(!s)return"N/A";const a=Math.floor((new Date-new Date(s))/(365.25*24*60*60*1e3)),l=Math.floor((new Date-new Date(s))%(365.25*24*60*60*1e3)/(30.44*24*60*60*1e3));return a>0?`${a} tahun ${l} bulan`:`${l} bulan`},Y=s=>{const a={available:{color:"bg-green-100 text-green-800",label:"Available"},busy:{color:"bg-yellow-100 text-yellow-800",label:"Busy"},break:{color:"bg-blue-100 text-blue-800",label:"Break"},offline:{color:"bg-gray-100 text-gray-800",label:"Offline"}},l=a[s]||a.offline;return e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${l.color}`,children:l.label})},G=s=>{const a={active:{color:"bg-green-100 text-green-800",label:"Active"},inactive:{color:"bg-gray-100 text-gray-800",label:"Inactive"},suspended:{color:"bg-red-100 text-red-800",label:"Suspended"},on_leave:{color:"bg-yellow-100 text-yellow-800",label:"On Leave"}},l=a[s]||a.inactive;return e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${l.color}`,children:l.label})},H=s=>{const a={junior:{color:"bg-blue-100 text-blue-800",icon:"ðŸŒ±"},senior:{color:"bg-purple-100 text-purple-800",icon:"â­"},expert:{color:"bg-orange-100 text-orange-800",icon:"ðŸ†"},specialist:{color:"bg-red-100 text-red-800",icon:"ðŸ’Ž"}},l=a[s]||a.junior;return e.jsxs("span",{className:`px-3 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ${l.color}`,children:[e.jsx("span",{className:"mr-1",children:l.icon}),e.jsx("span",{className:"capitalize",children:s})]})},E=()=>{t.phone?window.location.href=`tel:${t.phone}`:b.error("No phone number available")},J=()=>{t.email?window.location.href=`mailto:${t.email}`:b.error("No email available")},K=()=>{if(t.phone){const s=t.phone.replace(/[^0-9]/g,""),a=s.startsWith("0")?"62"+s.substring(1):s;window.open(`https://wa.me/${a}`,"_blank")}else b.error("No phone number available")},y=s=>{p(h(m({},o),{[s]:!0})),g(h(m({},d),{[s]:t[s==="availability"?"availability_status":s==="employment"?"employment_status":"skill_level"]}))},N=s=>{const a={availability:"availability_status",employment:"employment_status",skill:"skill_level"};R.mutate({[a[s]]:d[s]})},f=s=>{p(h(m({},o),{[s]:!1})),g(h(m({},d),{[s]:""}))},X=[{id:"overview",label:"Overview",icon:me},{id:"tickets",label:"Tickets",icon:k,badge:U.length},{id:"performance",label:"Performance",icon:he}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(z,{to:"/technicians",label:"Back to Technicians"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.full_name,t.username&&e.jsxs("span",{className:"ml-3 text-sm font-normal text-gray-500",children:["@",t.username]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["ID: ",t.employee_id]}),e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-600",children:t.position||"Technician"}),t.hire_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[B(t.hire_date)," masa kerja"]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r.total_tickets||0}),e.jsx("div",{className:"text-xs text-blue-700",children:"Total Tickets"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:e.jsx(_,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:r.completed_tickets||0}),e.jsx("div",{className:"text-xs text-green-700",children:"Completed"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-yellow-500 rounded-lg",children:e.jsx(ge,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:r.active_tickets||0}),e.jsx("div",{className:"text-xs text-yellow-700",children:"Active Now"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(q,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:parseFloat(r.avg_rating||0).toFixed(1)}),e.jsx("div",{className:"text-xs text-purple-700",children:"Avg Rating"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4 border border-indigo-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-indigo-500 rounded-lg",children:e.jsx(be,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900",children:[parseFloat(r.completion_rate||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-indigo-700",children:"Success Rate"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ue,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Contact Info"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(C,{className:"h-4 w-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Phone"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.phone||"-"})]})]}),t.phone&&e.jsx("button",{onClick:E,className:"opacity-0 group-hover:opacity-100 p-1.5 hover:bg-blue-50 rounded transition-all",title:"Call",children:e.jsx(C,{className:"h-4 w-4 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(pe,{className:"h-4 w-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.email||"-"})]})]}),t.email&&e.jsx("button",{onClick:J,className:"opacity-0 group-hover:opacity-100 p-1.5 hover:bg-blue-50 rounded transition-all",title:"Email",children:e.jsx(je,{className:"h-4 w-4 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"h-4 w-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Work Zone"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.work_zone||"-"})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:E,disabled:!t.phone,className:"flex-1 inline-flex items-center justify-center px-3 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Call"]}),e.jsxs("button",{onClick:K,disabled:!t.phone,className:"flex-1 inline-flex items-center justify-center px-3 py-2 border border-emerald-300 text-sm font-medium rounded-md text-emerald-700 bg-emerald-50 hover:bg-emerald-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"WA"]})]})})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(k,{className:"h-5 w-5 text-green-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Status"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Availability"}),!o.availability&&e.jsx("button",{onClick:()=>y("availability"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit",children:e.jsx(S,{className:"h-3 w-3 text-gray-400"})})]}),o.availability?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d.availability||t.availability_status,onChange:s=>g(h(m({},d),{availability:s.target.value})),className:"flex-1 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"busy",children:"Busy"}),e.jsx("option",{value:"break",children:"Break"}),e.jsx("option",{value:"offline",children:"Offline"})]}),e.jsx("button",{onClick:()=>N("availability"),className:"p-1.5 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",title:"Save",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f("availability"),className:"p-1.5 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded transition-colors",title:"Cancel",children:e.jsx(A,{className:"h-4 w-4"})})]}):Y(t.availability_status)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Employment"}),!o.employment&&e.jsx("button",{onClick:()=>y("employment"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit",children:e.jsx(S,{className:"h-3 w-3 text-gray-400"})})]}),o.employment?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d.employment||t.employment_status,onChange:s=>g(h(m({},d),{employment:s.target.value})),className:"flex-1 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"on_leave",children:"On Leave"})]}),e.jsx("button",{onClick:()=>N("employment"),className:"p-1.5 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",title:"Save",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f("employment"),className:"p-1.5 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded transition-colors",title:"Cancel",children:e.jsx(A,{className:"h-4 w-4"})})]}):G(t.employment_status)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Skill Level"}),!o.skill&&e.jsx("button",{onClick:()=>y("skill"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit",children:e.jsx(S,{className:"h-3 w-3 text-gray-400"})})]}),o.skill?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d.skill||t.skill_level,onChange:s=>g(h(m({},d),{skill:s.target.value})),className:"flex-1 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"junior",children:"Junior ðŸŒ±"}),e.jsx("option",{value:"senior",children:"Senior â­"}),e.jsx("option",{value:"expert",children:"Expert ðŸ†"}),e.jsx("option",{value:"specialist",children:"Specialist ðŸ’Ž"})]}),e.jsx("button",{onClick:()=>N("skill"),className:"p-1.5 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",title:"Save",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f("skill"),className:"p-1.5 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded transition-colors",title:"Cancel",children:e.jsx(A,{className:"h-4 w-4"})})]}):H(t.skill_level)]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 text-purple-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Work Details"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Hire Date"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:V(t.hire_date)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Years of Service"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:B(t.hire_date)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Max Daily Tickets"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.max_daily_tickets||8," tickets/day"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Current Load"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r.active_tickets/(t.max_daily_tickets||8)>.8?"bg-red-500":r.active_tickets/(t.max_daily_tickets||8)>.5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,r.active_tickets/(t.max_daily_tickets||8)*100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[r.active_tickets||0,"/",t.max_daily_tickets||8]})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:X.map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>W(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center ${u===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} transition-colors`,children:[e.jsx(a,{className:"h-4 w-4 mr-2"}),s.label,s.badge>0&&e.jsx("span",{className:"ml-2 bg-blue-100 text-blue-600 py-0.5 px-2 rounded-full text-xs font-semibold",children:s.badge})]},s.id)})})}),e.jsxs("div",{className:"p-6",children:[u==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Technician Profile"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Position"}),e.jsx("div",{className:"font-medium text-gray-900",children:t.position||"Field Technician"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Department"}),e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:((D=t.department)==null?void 0:D.replace("_"," "))||"Field Operations"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Work Schedule"}),e.jsx("div",{className:"font-medium text-gray-900",children:t.work_schedule||"Mon-Sat, 08:00-17:00"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(L,{className:"h-5 w-5 mr-2 text-gray-600"}),"Assigned Equipment"]}),v&&v.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map((s,a)=>{var l;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.equipment_name}),e.jsx("div",{className:"text-sm text-gray-500 capitalize",children:(l=s.equipment_type)==null?void 0:l.replace("_"," ")})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.condition==="excellent"?"bg-green-100 text-green-800":s.condition==="good"?"bg-blue-100 text-blue-800":s.condition==="fair"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.condition||"Good"})]}),s.serial_number&&e.jsxs("div",{className:"text-xs text-gray-400",children:["S/N: ",s.serial_number]}),s.brand&&s.model&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.brand," - ",s.model]})]},a)})}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 text-center",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Belum ada equipment yang di-assign"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Equipment akan ditampilkan di sini ketika sudah di-assign"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 mr-2 text-gray-600"}),"Specializations"]}),(()=>{let s=[];return t.specializations&&(Array.isArray(t.specializations)?s=t.specializations:typeof t.specializations=="string"&&(s=t.specializations.split(/[\s,]+/).filter(a=>a.trim()))),s.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((a,l)=>e.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 text-sm font-medium rounded-lg border border-blue-200 shadow-sm",children:a.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase())},l))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada specialization yang tercatat"})})})()]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(fe,{className:"h-5 w-5 mr-2 text-gray-600"}),"Certifications"]}),(()=>{let s=[];return t.certifications&&(Array.isArray(t.certifications)?s=t.certifications:typeof t.certifications=="object"&&(s=Object.values(t.certifications))),s.length>0?e.jsx("div",{className:"space-y-2",children:s.map((a,l)=>e.jsxs("div",{className:"flex items-start px-4 py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200 hover:border-green-300 transition-colors shadow-sm",children:[e.jsx(_,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a})]},l))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada certifications yang tercatat"})})})()]})]}),u==="tickets"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Tickets"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[j.length," total"]})]}),j.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No tickets assigned yet"})]}):e.jsx("div",{className:"space-y-3",children:j.map(s=>e.jsx("div",{onClick:()=>n(`/tickets/${s.id}`),className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-blue-300 hover:shadow-md cursor-pointer transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-blue-600",children:s.ticket_number}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${s.priority==="critical"?"bg-red-100 text-red-800":s.priority==="high"?"bg-orange-100 text-orange-800":s.priority==="normal"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.priority}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})]}),e.jsx("div",{className:"text-sm text-gray-900 mb-1",children:s.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Customer: ",s.customer_name||"N/A"]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})})]})},s.id))})]}),u==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"This Month"}),e.jsx(we,{className:"h-4 w-4 text-blue-600"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r.tickets_this_month||0}),e.jsx("div",{className:"text-xs text-blue-600",children:"Tickets handled"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Completed"}),e.jsx(_,{className:"h-4 w-4 text-green-600"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:r.completed_this_month||0}),e.jsx("div",{className:"text-xs text-green-600",children:"This month"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-purple-700",children:"Success Rate"}),e.jsx(ke,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[parseFloat(r.completion_rate||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-purple-600",children:"Completion rate"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Overall Performance"}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6 border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(q,{className:"h-8 w-8 text-yellow-500 fill-current"}),e.jsx("span",{className:"ml-3 text-4xl font-bold text-gray-900",children:parseFloat(r.avg_rating||0).toFixed(1)}),e.jsx("span",{className:"ml-2 text-2xl text-gray-400",children:"/5.0"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Based on ",r.completed_tickets||0," completed tickets"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:r.completed_tickets||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Completed"})]})]})})]})]})]})]})]})};export{Me as default};
//# sourceMappingURL=TechnicianDetailPage-D6uqWPUA.js.map

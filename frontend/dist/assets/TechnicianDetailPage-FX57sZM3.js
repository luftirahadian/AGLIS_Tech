var ne=Object.defineProperty,ce=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var Q=(l,r,i)=>r in l?ne(l,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[r]=i,b=(l,r)=>{for(var i in r||(r={}))oe.call(r,i)&&Q(l,i,r[i]);if(I)for(var i of I(r))xe.call(r,i)&&Q(l,i,r[i]);return l},p=(l,r)=>ce(l,de(r));var W=(l,r,i)=>new Promise((j,m)=>{var o=c=>{try{d(i.next(c))}catch(f){m(f)}},v=c=>{try{d(i.throw(c))}catch(f){m(f)}},d=c=>c.done?j(c.value):Promise.resolve(c.value).then(o,v);d((i=i.apply(l,r)).next())});import{j as e}from"./notifications-C-A1jlty.js";import{r as N,e as me,u as he}from"./react-vendor-BQ7pSkNi.js";import{b as Y,a as ge,u as ue}from"./react-query-B7OIdD7u.js";import{L as be,B as R}from"./customers-Bkp7alR1.js";import{m as pe}from"./masterDataService-BXxRmj2m.js";import{aa as V,X as k,e as X,N as Z,z as y,a as je,U as ve,x as B,ad as ye,af as H,C as $,a8 as G,p as fe,Q as D,m as Ne,aG as we,q as _e,n as ke,a6 as P,u as M,ab as J,P as Se,a7 as Ce,g as ze,B as Ae}from"./ui-vendor-ng1X_mIA.js";import{t as U}from"./tickets-vvnhrHMz.js";import"./charts-CREYXqqm.js";import"./socket-BFcXWKeu.js";import"./forms-Dmkgx8TD.js";const Te=({isOpen:l,onClose:r,technicianId:i,onSuccess:j})=>{const[m,o]=N.useState({specialization_id:"",proficiency_level:"beginner",years_experience:0}),[v,d]=N.useState(!1),{data:c,isLoading:f}=Y("specializations-grouped",()=>pe.getSpecializationsGrouped({active_only:"true"}),{enabled:l}),w=(c==null?void 0:c.data)||[],u=h=>W(void 0,null,function*(){if(h.preventDefault(),!m.specialization_id){y.error("Please select a specialization");return}d(!0);try{const g=yield fetch(`/api/technicians/${i}/specializations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(m)}),_=yield g.json();if(!g.ok)throw new Error(_.message||"Failed to add specialization");y.success(_.message||"Specialization added successfully"),j&&j(_.data),r(),o({specialization_id:"",proficiency_level:"beginner",years_experience:0})}catch(g){console.error("Add specialization error:",g),y.error(g.message)}finally{d(!1)}});return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Specialization"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(k,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Specialization *"}),f?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading specializations..."}):e.jsxs("select",{value:m.specialization_id,onChange:h=>o(p(b({},m),{specialization_id:h.target.value})),className:"form-select w-full",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Specialization --"}),w.map(h=>e.jsx("optgroup",{label:`${h.icon} ${h.name}`,children:h.specializations.map(g=>e.jsxs("option",{value:g.id,children:[g.name,g.is_high_demand&&" â­",g.is_critical_service&&" ðŸ”´"," [L"+g.difficulty_level+"]"]},g.id))},h.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"â­ = High Demand | ðŸ”´ = Critical Service | [L#] = Difficulty Level"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(X,{className:"h-4 w-4 inline mr-1"}),"Proficiency Level *"]}),e.jsxs("select",{value:m.proficiency_level,onChange:h=>o(p(b({},m),{proficiency_level:h.target.value})),className:"form-select w-full",required:!0,children:[e.jsx("option",{value:"beginner",children:"Beginner - Just started learning"}),e.jsx("option",{value:"intermediate",children:"Intermediate - Can work independently"}),e.jsx("option",{value:"expert",children:"Expert - Master level, can train others"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 inline mr-1"}),"Years of Experience"]}),e.jsx("input",{type:"number",step:"0.5",min:"0",max:"30",value:m.years_experience,onChange:h=>o(p(b({},m),{years_experience:parseFloat(h.target.value)||0})),className:"form-input w-full",placeholder:"e.g., 2.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional - How many years of experience in this specific specialization"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:r,className:"btn-secondary",disabled:v,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:v||!m.specialization_id,children:v?"Adding...":"Add Specialization"})]})]})]})}):null},Qe=()=>{var O,q;const{id:l}=me(),r=he(),i=ge(),[j,m]=N.useState("overview"),[o,v]=N.useState({availability:!1,employment:!1,skill:!1}),[d,c]=N.useState({}),[f,w]=N.useState(!1),{data:u,isLoading:h,error:g}=Y(["technician",l],()=>U.getTechnician(l),{enabled:!!l,staleTime:1e4,refetchOnWindowFocus:!0}),_=ue(s=>U.updateTechnician(l,s),{onSuccess:()=>{y.success("Status updated successfully!"),i.invalidateQueries(["technician",l]),i.invalidateQueries(["technicians"]),v({availability:!1,employment:!1,skill:!1})},onError:s=>{var a,n;y.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update status")}});if(h)return e.jsx("div",{className:"flex justify-center items-center min-h-96",children:e.jsx(be,{})});if(g||!((O=u==null?void 0:u.data)!=null&&O.technician))return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(je,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Technician Not Found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Teknisi yang Anda cari tidak ditemukan"}),e.jsx(R,{to:"/technicians",label:"Back to Technicians"})]});const t=u.data.technician,x=u.data.stats||{},S=u.data.recent_tickets||[],K=u.data.active_tickets||[],C=u.data.equipment||[],z=u.data.specializations||[],ee=s=>s?new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",F=s=>{if(!s)return"N/A";const a=Math.floor((new Date-new Date(s))/(365.25*24*60*60*1e3)),n=Math.floor((new Date-new Date(s))%(365.25*24*60*60*1e3)/(30.44*24*60*60*1e3));return a>0?`${a} tahun ${n} bulan`:`${n} bulan`},se=s=>{const a={available:{color:"bg-green-100 text-green-800",label:"Available"},busy:{color:"bg-yellow-100 text-yellow-800",label:"Busy"},break:{color:"bg-blue-100 text-blue-800",label:"Break"},offline:{color:"bg-gray-100 text-gray-800",label:"Offline"}},n=a[s]||a.offline;return e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${n.color}`,children:n.label})},te=s=>{const a={active:{color:"bg-green-100 text-green-800",label:"Active"},inactive:{color:"bg-gray-100 text-gray-800",label:"Inactive"},suspended:{color:"bg-red-100 text-red-800",label:"Suspended"},on_leave:{color:"bg-yellow-100 text-yellow-800",label:"On Leave"}},n=a[s]||a.inactive;return e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${n.color}`,children:n.label})},ae=s=>{const a={junior:{color:"bg-blue-100 text-blue-800",icon:"ðŸŒ±"},senior:{color:"bg-purple-100 text-purple-800",icon:"â­"},expert:{color:"bg-orange-100 text-orange-800",icon:"ðŸ†"},specialist:{color:"bg-red-100 text-red-800",icon:"ðŸ’Ž"}},n=a[s]||a.junior;return e.jsxs("span",{className:`px-3 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ${n.color}`,children:[e.jsx("span",{className:"mr-1",children:n.icon}),e.jsx("span",{className:"capitalize",children:s})]})},L=()=>{t.phone?window.location.href=`tel:${t.phone}`:y.error("No phone number available")},le=()=>{t.email?window.location.href=`mailto:${t.email}`:y.error("No email available")},ie=()=>{if(t.phone){const s=t.phone.replace(/[^0-9]/g,""),a=s.startsWith("0")?"62"+s.substring(1):s;window.open(`https://wa.me/${a}`,"_blank")}else y.error("No phone number available")},A=s=>{v(p(b({},o),{[s]:!0})),c(p(b({},d),{[s]:t[s==="availability"?"availability_status":s==="employment"?"employment_status":"skill_level"]}))},T=s=>{const a={availability:"availability_status",employment:"employment_status",skill:"skill_level"};_.mutate({[a[s]]:d[s]})},E=s=>{v(p(b({},o),{[s]:!1})),c(p(b({},d),{[s]:""}))},re=[{id:"overview",label:"Overview",icon:ve},{id:"tickets",label:"Tickets",icon:B,badge:K.length},{id:"performance",label:"Performance",icon:ye}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(R,{to:"/technicians",label:"Back to Technicians"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.full_name,t.username&&e.jsxs("span",{className:"ml-3 text-sm font-normal text-gray-500",children:["@",t.username]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["ID: ",t.employee_id]}),e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-600",children:t.position||"Technician"}),t.hire_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[F(t.hire_date)," masa kerja"]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(H,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:x.total_tickets||0}),e.jsx("div",{className:"text-xs text-blue-700",children:"Total Tickets"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:e.jsx($,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:x.completed_tickets||0}),e.jsx("div",{className:"text-xs text-green-700",children:"Completed"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-yellow-500 rounded-lg",children:e.jsx(Z,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:x.active_tickets||0}),e.jsx("div",{className:"text-xs text-yellow-700",children:"Active Now"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(G,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:parseFloat(x.avg_rating||0).toFixed(1)}),e.jsx("div",{className:"text-xs text-purple-700",children:"Avg Rating"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4 border border-indigo-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-indigo-500 rounded-lg",children:e.jsx(X,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900",children:[parseFloat(x.completion_rate||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-indigo-700",children:"Success Rate"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(fe,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Contact Info"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(D,{className:"h-4 w-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Phone"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.phone||"-"})]})]}),t.phone&&e.jsx("button",{onClick:L,className:"opacity-0 group-hover:opacity-100 p-1.5 hover:bg-blue-50 rounded transition-all",title:"Call",children:e.jsx(D,{className:"h-4 w-4 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(Ne,{className:"h-4 w-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.email||"-"})]})]}),t.email&&e.jsx("button",{onClick:le,className:"opacity-0 group-hover:opacity-100 p-1.5 hover:bg-blue-50 rounded transition-all",title:"Email",children:e.jsx(we,{className:"h-4 w-4 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"h-4 w-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Work Zone"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.work_zone||"-"})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:L,disabled:!t.phone,className:"flex-1 inline-flex items-center justify-center px-3 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"Call"]}),e.jsxs("button",{onClick:ie,disabled:!t.phone,className:"flex-1 inline-flex items-center justify-center px-3 py-2 border border-emerald-300 text-sm font-medium rounded-md text-emerald-700 bg-emerald-50 hover:bg-emerald-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"WA"]})]})})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 text-green-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Status"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Availability"}),!o.availability&&e.jsx("button",{onClick:()=>A("availability"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit",children:e.jsx(P,{className:"h-3 w-3 text-gray-400"})})]}),o.availability?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d.availability||t.availability_status,onChange:s=>c(p(b({},d),{availability:s.target.value})),className:"flex-1 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"busy",children:"Busy"}),e.jsx("option",{value:"break",children:"Break"}),e.jsx("option",{value:"offline",children:"Offline"})]}),e.jsx("button",{onClick:()=>T("availability"),className:"p-1.5 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",title:"Save",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E("availability"),className:"p-1.5 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded transition-colors",title:"Cancel",children:e.jsx(k,{className:"h-4 w-4"})})]}):se(t.availability_status)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Employment"}),!o.employment&&e.jsx("button",{onClick:()=>A("employment"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit",children:e.jsx(P,{className:"h-3 w-3 text-gray-400"})})]}),o.employment?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d.employment||t.employment_status,onChange:s=>c(p(b({},d),{employment:s.target.value})),className:"flex-1 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"on_leave",children:"On Leave"})]}),e.jsx("button",{onClick:()=>T("employment"),className:"p-1.5 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",title:"Save",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E("employment"),className:"p-1.5 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded transition-colors",title:"Cancel",children:e.jsx(k,{className:"h-4 w-4"})})]}):te(t.employment_status)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Skill Level"}),!o.skill&&e.jsx("button",{onClick:()=>A("skill"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit",children:e.jsx(P,{className:"h-3 w-3 text-gray-400"})})]}),o.skill?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d.skill||t.skill_level,onChange:s=>c(p(b({},d),{skill:s.target.value})),className:"flex-1 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"junior",children:"Junior ðŸŒ±"}),e.jsx("option",{value:"senior",children:"Senior â­"}),e.jsx("option",{value:"expert",children:"Expert ðŸ†"}),e.jsx("option",{value:"specialist",children:"Specialist ðŸ’Ž"})]}),e.jsx("button",{onClick:()=>T("skill"),className:"p-1.5 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",title:"Save",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E("skill"),className:"p-1.5 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded transition-colors",title:"Cancel",children:e.jsx(k,{className:"h-4 w-4"})})]}):ae(t.skill_level)]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(H,{className:"h-5 w-5 text-purple-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Work Details"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Hire Date"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee(t.hire_date)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Years of Service"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:F(t.hire_date)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Max Daily Tickets"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.max_daily_tickets||8," tickets/day"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Current Load"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${x.active_tickets/(t.max_daily_tickets||8)>.8?"bg-red-500":x.active_tickets/(t.max_daily_tickets||8)>.5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,x.active_tickets/(t.max_daily_tickets||8)*100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[x.active_tickets||0,"/",t.max_daily_tickets||8]})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:re.map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>m(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center ${j===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} transition-colors`,children:[e.jsx(a,{className:"h-4 w-4 mr-2"}),s.label,s.badge>0&&e.jsx("span",{className:"ml-2 bg-blue-100 text-blue-600 py-0.5 px-2 rounded-full text-xs font-semibold",children:s.badge})]},s.id)})})}),e.jsxs("div",{className:"p-6",children:[j==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Technician Profile"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Position"}),e.jsx("div",{className:"font-medium text-gray-900",children:t.position||"Field Technician"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Department"}),e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:((q=t.department)==null?void 0:q.replace("_"," "))||"Field Operations"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Work Schedule"}),e.jsx("div",{className:"font-medium text-gray-900",children:t.work_schedule||"Mon-Sat, 08:00-17:00"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(J,{className:"h-5 w-5 mr-2 text-gray-600"}),"Assigned Equipment"]}),C&&C.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map((s,a)=>{var n;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.equipment_name}),e.jsx("div",{className:"text-sm text-gray-500 capitalize",children:(n=s.equipment_type)==null?void 0:n.replace("_"," ")})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.condition==="excellent"?"bg-green-100 text-green-800":s.condition==="good"?"bg-blue-100 text-blue-800":s.condition==="fair"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.condition||"Good"})]}),s.serial_number&&e.jsxs("div",{className:"text-xs text-gray-400",children:["S/N: ",s.serial_number]}),s.brand&&s.model&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.brand," - ",s.model]})]},a)})}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 text-center",children:[e.jsx(J,{className:"h-12 w-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Belum ada equipment yang di-assign"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Equipment akan ditampilkan di sini ketika sudah di-assign"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(V,{className:"h-5 w-5 mr-2 text-gray-600"}),"Specializations"]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"Add Specialization"]})]}),z&&z.length>0?e.jsx("div",{className:"space-y-3",children:z.map(s=>e.jsxs("div",{className:"flex items-start justify-between px-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:border-blue-300 transition-all shadow-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s.specialization_name}),s.is_high_demand&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded",children:"High Demand"}),s.is_critical_service&&e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Category:"}),e.jsx("span",{style:{color:s.category_color||"#6b7280"},children:s.category_name})]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Proficiency:"}),e.jsx("span",{className:`capitalize ${s.proficiency_level==="expert"?"text-green-600 font-semibold":s.proficiency_level==="intermediate"?"text-blue-600":"text-gray-600"}`,children:s.proficiency_level})]}),s.years_experience>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Experience:"}),s.years_experience," years"]})]})]}),e.jsx("div",{className:"flex items-center ml-3",children:e.jsxs("span",{className:"px-2 py-1 bg-white text-gray-600 text-xs font-medium rounded border border-gray-200",children:["Level ",s.difficulty_level]})})]},s.id))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada specialization yang tercatat"})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 mr-2 text-gray-600"}),"Certifications"]}),(()=>{let s=[];return t.certifications&&(Array.isArray(t.certifications)?s=t.certifications:typeof t.certifications=="object"&&(s=Object.values(t.certifications))),s.length>0?e.jsx("div",{className:"space-y-2",children:s.map((a,n)=>e.jsxs("div",{className:"flex items-start px-4 py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200 hover:border-green-300 transition-colors shadow-sm",children:[e.jsx($,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a})]},n))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada certifications yang tercatat"})})})()]})]}),j==="tickets"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Tickets"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[S.length," total"]})]}),S.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(B,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No tickets assigned yet"})]}):e.jsx("div",{className:"space-y-3",children:S.map(s=>e.jsx("div",{onClick:()=>r(`/tickets/${s.id}`),className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-blue-300 hover:shadow-md cursor-pointer transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-blue-600",children:s.ticket_number}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${s.priority==="critical"?"bg-red-100 text-red-800":s.priority==="high"?"bg-orange-100 text-orange-800":s.priority==="normal"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.priority}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})]}),e.jsx("div",{className:"text-sm text-gray-900 mb-1",children:s.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Customer: ",s.customer_name||"N/A"]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})})]})},s.id))})]}),j==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"This Month"}),e.jsx(ze,{className:"h-4 w-4 text-blue-600"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:x.tickets_this_month||0}),e.jsx("div",{className:"text-xs text-blue-600",children:"Tickets handled"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Completed"}),e.jsx($,{className:"h-4 w-4 text-green-600"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:x.completed_this_month||0}),e.jsx("div",{className:"text-xs text-green-600",children:"This month"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-purple-700",children:"Success Rate"}),e.jsx(Ae,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[parseFloat(x.completion_rate||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-purple-600",children:"Completion rate"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Overall Performance"}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6 border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(G,{className:"h-8 w-8 text-yellow-500 fill-current"}),e.jsx("span",{className:"ml-3 text-4xl font-bold text-gray-900",children:parseFloat(x.avg_rating||0).toFixed(1)}),e.jsx("span",{className:"ml-2 text-2xl text-gray-400",children:"/5.0"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Based on ",x.completed_tickets||0," completed tickets"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:x.completed_tickets||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Completed"})]})]})})]})]})]})]}),e.jsx(Te,{isOpen:f,onClose:()=>w(!1),technicianId:l,onSuccess:()=>{i.invalidateQueries(["technician",l]),w(!1)}})]})};export{Qe as default};
//# sourceMappingURL=TechnicianDetailPage-FX57sZM3.js.map

var h=(r,c,i)=>new Promise((n,s)=>{var x=a=>{try{t(i.next(a))}catch(l){s(l)}},m=a=>{try{t(i.throw(a))}catch(l){s(l)}},t=a=>a.done?n(a.value):Promise.resolve(a.value).then(x,m);t((i=i.apply(r,c)).next())});import{j as e,a as j}from"./notifications-DovgEgck.js";import{e as p,u as b}from"./react-vendor-BQ7pSkNi.js";import{b as N}from"./react-query-B7OIdD7u.js";import{C as d}from"./CustomerPortalLayout-DUvEk3s5.js";import{ag as g,s as y,g as f,U as o,n as w,C as v,a as k,N as _}from"./ui-vendor-DNUUwVb4.js";import"./charts-CREYXqqm.js";const $=()=>{const{id:r}=p(),c=b(),{data:i,isLoading:n}=N(["customer-ticket-detail",r],()=>h(void 0,null,function*(){var l;const t=yield j.get("/customer-portal/tickets");return(((l=t==null?void 0:t.data)==null?void 0:l.tickets)||(t==null?void 0:t.tickets)||[]).find(u=>u.id===parseInt(r))})),s=i,x=t=>({open:"bg-blue-100 text-blue-700",assigned:"bg-purple-100 text-purple-700",in_progress:"bg-yellow-100 text-yellow-700",completed:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700",on_hold:"bg-gray-100 text-gray-700"})[t]||"bg-gray-100 text-gray-700",m=t=>({open:e.jsx(_,{className:"h-5 w-5"}),assigned:e.jsx(o,{className:"h-5 w-5"}),in_progress:e.jsx(k,{className:"h-5 w-5"}),completed:e.jsx(v,{className:"h-5 w-5"})})[t]||e.jsx(g,{className:"h-5 w-5"});return n?e.jsx(d,{children:e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"})})}):s?e.jsx(d,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>c("/customer/tickets"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:"Kembali ke Tiket Saya"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["#",s.ticket_number]}),e.jsxs("span",{className:`px-3 py-1 text-sm rounded-full flex items-center space-x-1 ${x(s.status)}`,children:[m(s.status),e.jsx("span",{children:s.status})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.priority==="high"?"bg-red-100 text-red-700":s.priority==="normal"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:s.priority})]}),e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),"Dibuat: ",new Date(s.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),s.technician_name&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(o,{className:"h-4 w-4 mr-1"}),"Teknisi: ",s.technician_name]})]})]})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detail Tiket"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Jenis Tiket"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kategori"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.category||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Deskripsi Masalah"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:s.description})]}),s.resolution_notes&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-green-900 mb-2",children:"‚úÖ Solusi"}),e.jsx("p",{className:"text-sm text-green-800 whitespace-pre-line",children:s.resolution_notes})]}),s.work_notes&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"üìù Catatan Teknisi"}),e.jsx("p",{className:"text-sm text-blue-800 whitespace-pre-line",children:s.work_notes})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Timeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Tiket Dibuat"}),e.jsx("p",{className:"text-xs text-gray-600",children:new Date(s.created_at).toLocaleString("id-ID")})]})]}),s.started_at&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pekerjaan Dimulai"}),e.jsx("p",{className:"text-xs text-gray-600",children:new Date(s.started_at).toLocaleString("id-ID")})]})]}),s.completed_at&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Tiket Selesai"}),e.jsx("p",{className:"text-xs text-gray-600",children:new Date(s.completed_at).toLocaleString("id-ID")}),s.actual_duration&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Durasi: ",Math.floor(s.actual_duration/60)," jam ",s.actual_duration%60," menit"]})]})]})]})]}),s.technician_name&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Teknisi"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(o,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.technician_name}),s.technician_phone&&e.jsxs("a",{href:`https://wa.me/${s.technician_phone.replace(/^0/,"62")}`,className:"text-sm text-green-600 hover:text-green-700 flex items-center",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),s.technician_phone]})]})]})]}),s.customer_rating&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rating Anda"}),e.jsx("div",{className:"flex items-center space-x-1 mb-2",children:[1,2,3,4,5].map(t=>e.jsx("span",{className:`text-2xl ${t<=s.customer_rating?"text-yellow-400":"text-gray-300"}`,children:"‚≠ê"},t))}),s.customer_feedback&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.customer_feedback})]})]})}):e.jsx(d,{children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(g,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Tiket tidak ditemukan"}),e.jsx("button",{onClick:()=>c("/customer/tickets"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"‚Üê Kembali ke Tiket Saya"})]})})})};export{$ as default};
//# sourceMappingURL=CustomerTicketDetailPage-BiEjbtg3.js.map

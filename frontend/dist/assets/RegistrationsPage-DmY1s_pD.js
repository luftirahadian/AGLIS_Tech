var wt=Object.defineProperty,Ct=Object.defineProperties;var St=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var Ve=(p,a,g)=>a in p?wt(p,a,{enumerable:!0,configurable:!0,writable:!0,value:g}):p[a]=g,N=(p,a)=>{for(var g in a||(a={}))_t.call(a,g)&&Ve(p,g,a[g]);if(Me)for(var g of Me(a))Rt.call(a,g)&&Ve(p,g,a[g]);return p},k=(p,a)=>Ct(p,St(a));var Q=(p,a,g)=>new Promise(($,F)=>{var O=b=>{try{h(g.next(b))}catch(L){F(L)}},x=b=>{try{h(g.throw(b))}catch(L){F(L)}},h=b=>b.done?$(b.value):Promise.resolve(b.value).then(O,x);h((g=g.apply(p,a)).next())});import{j as e,C as V}from"./notifications-BhPKxeX5.js";import{u as Pt,r as d,L as Qt}from"./react-vendor-BQ7pSkNi.js";import{a as At,b as Oe,u as Ke}from"./react-query-B7OIdD7u.js";import{y as Tt,L as Dt,D as Ft,B as $t,O as me,ao as He,b as W,ah as Lt,N as Bt,g as xe,C as he,aS as Ye,S as It,v as ge,d as pe,p as Et,m as qe,Q as Mt,V as Vt,W as Ot,a7 as Kt,z as i,Y as Ht,Z as Yt,_ as qt}from"./ui-vendor-ng1X_mIA.js";import{r as w}from"./registrationService-B3neU8Ca.js";import{u as zt,s as C,K as D,L as Gt,h as Ut,f as X,i as Jt,e as Wt}from"./customers-C2T_TlAe.js";import"./charts-CREYXqqm.js";import"./socket-BFcXWKeu.js";import"./forms-Dmkgx8TD.js";const os=()=>{var Pe,Qe,Ae,Te,De,Fe,$e,Le,Be,Ie;const p=Pt(),a=At(),{user:g,isAdmin:$,isSupervisor:F,isCustomerService:O}=zt(),[x,h]=d.useState(1),[b,L]=d.useState(10),[r,be]=d.useState(null),[ze,je]=d.useState(!1),[l,y]=d.useState(null),[B,K]=d.useState(""),[Z,ee]=d.useState(""),[te,se]=d.useState(""),[I,Ge]=d.useState("created_at"),[E,ve]=d.useState("DESC"),[fe,ye]=d.useState(!1),[m,P]=d.useState({search:"",status:"",dateFilter:""}),[v,A]=d.useState([]),[Ue,T]=d.useState(!1),[ae,Ne]=d.useState(null),[Je,H]=d.useState(!1),[S,Y]=d.useState(null),[We,re]=d.useState(!1),[Xe,ie]=d.useState(!1),[Ze,le]=d.useState(!1),[et,ne]=d.useState(!1),[u,f]=d.useState(null),[oe,q]=d.useState(""),[ce,ke]=d.useState(new Date().toISOString().split("T")[0]),tt=t=>t?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):"-",{data:o,isLoading:we}=Oe(["registrations",m,x,b,I,E],()=>w.getAll(k(N({},m),{page:x,limit:b,sort_by:I,sort_order:E})),{keepPreviousData:!0}),{data:st}=Oe("registration-stats",()=>w.getStats(),{select:t=>t.data}),de=Ke(({id:t,data:s})=>w.updateStatus(t,s),{onSuccess:t=>{var s;a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),y(null),K(""),ee(""),se(""),(s=t==null?void 0:t.data)!=null&&s.registration&&be(t.data.registration),i.success("Status berhasil diupdate")},onError:t=>{var s,n;i.error(((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Gagal update status")}}),z=Ke(t=>w.createCustomer(t),{onSuccess:t=>{a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),i.success("Customer dan ticket instalasi berhasil dibuat!"),je(!1),be(null)},onError:t=>{var s,n;i.error(((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Gagal membuat customer")}}),at=()=>{if(!r)return;let t={status:l,notes:B};if(l==="rejected"){if(!Z.trim()){i.error("Alasan penolakan wajib diisi");return}t.rejection_reason=Z}if(l==="survey_scheduled"){if(!te){i.error("Tanggal survey wajib diisi");return}t.survey_scheduled_date=te}if(l==="survey_completed"){if(!B.trim()){i.error("Hasil survey wajib diisi");return}t.notes=B}de.mutate({id:r.id,data:t})},rt=t=>{Y(t),H(!0)},it=()=>{S&&(z.mutate(S.id),H(!1),Y(null))},G=t=>{I===t?ve(E==="ASC"?"DESC":"ASC"):(Ge(t),ve("DESC")),h(1)},U=t=>I!==t?e.jsx(Ht,{className:"h-4 w-4 text-gray-400"}):E==="ASC"?e.jsx(Yt,{className:"h-4 w-4 text-blue-600"}):e.jsx(qt,{className:"h-4 w-4 text-blue-600"}),Ce=t=>{const s={pending_verification:{label:"Pending",color:"bg-yellow-100 text-yellow-800"},verified:{label:"Verified",color:"bg-blue-100 text-blue-800"},survey_scheduled:{label:"Survey Scheduled",color:"bg-indigo-100 text-indigo-800"},survey_completed:{label:"Survey Done",color:"bg-purple-100 text-purple-800"},approved:{label:"Approved",color:"bg-green-100 text-green-800"},customer_created:{label:"Customer Created",color:"bg-emerald-100 text-emerald-800"},rejected:{label:"Rejected",color:"bg-red-100 text-red-800"}},n=s[t]||s.pending_verification;return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${n.color}`,children:n.label})},lt=()=>Q(void 0,null,function*(){var t;try{ye(!0);const n=((t=(yield w.getAll(k(N({},m),{page:1,limit:1e4,sort_by:I,sort_order:E}))).data)==null?void 0:t.registrations)||[];if(n.length===0){i.error("Tidak ada data untuk di-export");return}const R=c=>({pending_verification:"Pending",verified:"Verified",survey_scheduled:"Survey Scheduled",survey_completed:"Survey Done",approved:"Approved",customer_created:"Customer Created",rejected:"Rejected",cancelled:"Cancelled"})[c]||c,j=n.map((c,M)=>({No:M+1,"Registration Number":c.registration_number,"Tanggal Daftar":X(c.created_at),"Nama Lengkap":c.full_name,Email:c.email||"-",WhatsApp:c.phone||"-","Alamat Lengkap":c.address||"-",Kota:c.city||"-",Package:c.package_name||"-","Harga Bulanan":Jt(c.monthly_price),Status:R(c.status),"Verified Date":c.verified_at?X(c.verified_at):"-","Survey Scheduled":c.survey_scheduled_date?X(c.survey_scheduled_date):"-","Approved Date":c.approved_at?X(c.approved_at):"-","Rejection Reason":c.rejection_reason||"-","Preferred Install Date":c.preferred_installation_date?Ut(c.preferred_installation_date):"-"})),J=Wt(j,"Registrations_Export","Registrations Data");i.success(`✅ ${J.rows} registrations berhasil di-export!`)}catch(s){console.error("Export error:",s),i.error("Gagal export data. Silakan coba lagi.")}finally{ye(!1)}}),nt=t=>{t.target.checked?(A(Re.map(s=>s.id)),T(!0)):(A([]),T(!1))},ot=t=>{if(v.includes(t))A(v.filter(s=>s!==t)),T(!1);else{const s=[...v,t];A(s),s.length===Re.length&&T(!0)}},ct=()=>Q(void 0,null,function*(){if(v.length===0){i.error("Pilih registration terlebih dahulu");return}if(window.confirm(`Verify ${v.length} registration yang dipilih?`))try{let t=0,s=0;for(const n of v)try{yield w.updateStatus(n,"verified",{notes:"Bulk verified"}),t++}catch(R){s++,console.error(`Failed to verify registration ${n}:`,R)}t>0?(i.success(`✅ ${t} registration berhasil di-verify${s>0?`, ${s} gagal`:""}`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),A([]),T(!1)):i.error("Gagal verify registration")}catch(t){console.error("Bulk verify error:",t),i.error("Terjadi kesalahan saat verify registration")}}),dt=()=>Q(void 0,null,function*(){if(v.length===0){i.error("Pilih registration terlebih dahulu");return}const t=window.prompt("Alasan reject (akan diterapkan ke semua):");if(t&&window.confirm(`⚠️ Reject ${v.length} registration?`))try{let s=0,n=0;for(const R of v)try{yield w.updateStatus(R,"rejected",{rejection_reason:t,notes:"Bulk rejected"}),s++}catch(j){n++,console.error(`Failed to reject registration ${R}:`,j)}s>0?(i.success(`✅ ${s} registration berhasil di-reject${n>0?`, ${n} gagal`:""}`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),A([]),T(!1)):i.error("Gagal reject registration")}catch(s){console.error("Bulk reject error:",s),i.error("Terjadi kesalahan saat reject registration")}}),ue=(t,s)=>{navigator.clipboard.writeText(t).then(()=>{Ne(s),i.success(`${s} berhasil di-copy!`),setTimeout(()=>Ne(null),2e3)}).catch(n=>{i.error("Gagal copy ke clipboard"),console.error("Copy error:",n)})},ut=(t,s)=>{t.stopPropagation(),f(s),re(!0)},mt=()=>Q(void 0,null,function*(){if(u)try{yield w.updateStatus(u.id,"verified",{notes:"Quick verified"}),i.success(`Registration ${u.registration_number} verified`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),re(!1),f(null)}catch(t){i.error("Failed to verify registration"),console.error("Quick verify error:",t)}}),xt=(t,s)=>{t.stopPropagation(),f(s),q(""),ie(!0)},ht=()=>Q(void 0,null,function*(){if(u){if(!oe.trim()){i.error("Alasan reject wajib diisi");return}try{yield w.updateStatus(u.id,"rejected",{rejection_reason:oe,notes:"Quick rejected"}),i.success(`Registration ${u.registration_number} rejected`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),ie(!1),f(null),q("")}catch(t){i.error("Failed to reject registration"),console.error("Quick reject error:",t)}}}),gt=(t,s)=>{t.stopPropagation(),window.location.href=`tel:${s}`},pt=(t,s)=>{t.stopPropagation(),window.location.href=`mailto:${s}`},bt=(t,s)=>{t.stopPropagation(),Y(s),H(!0)},jt=(t,s)=>{t.stopPropagation(),f(s),le(!0)},vt=()=>Q(void 0,null,function*(){if(u)try{yield w.updateStatus(u.id,"approved",{notes:"Quick approved"}),i.success(`Registration ${u.registration_number} approved`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),le(!1),f(null)}catch(t){i.error("Failed to approve registration"),console.error("Quick approve error:",t)}}),ft=(t,s)=>{t.stopPropagation(),f(s),ke(new Date().toISOString().split("T")[0]),ne(!0)},yt=()=>Q(void 0,null,function*(){if(u){if(!ce){i.error("Tanggal survey wajib diisi");return}try{yield w.updateStatus(u.id,"survey_scheduled",{survey_date:ce,notes:"Survey scheduled via quick action"}),i.success(`Survey scheduled for ${u.registration_number}`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),ne(!1),f(null)}catch(t){i.error("Failed to schedule survey"),console.error("Quick schedule survey error:",t)}}}),Nt=$||F||O,Se=$||F||O,_e=$||F,_=st||{},kt=((Qe=(Pe=o==null?void 0:o.data)==null?void 0:Pe.pagination)==null?void 0:Qe.total)||0,Re=((Ae=o==null?void 0:o.data)==null?void 0:Ae.registrations)||[];return d.useEffect(()=>{const t=j=>{console.log("🔄 [RegistrationsPage] Registration update received:",j),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),i.success("Data registrasi telah diperbarui!")},s=j=>{var J,c,M,Ee;console.log("✨ [RegistrationsPage] New registration event received:",j),console.log("📋 [RegistrationsPage] Registration details:",{registration_number:(J=j.registration)==null?void 0:J.registration_number,full_name:(c=j.registration)==null?void 0:c.full_name,phone:(M=j.registration)==null?void 0:M.phone}),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),console.log("🔄 [RegistrationsPage] Queries invalidated, data will refetch"),i.success(`🎉 Pendaftaran baru dari ${((Ee=j.registration)==null?void 0:Ee.full_name)||"customer"}!`,{duration:5e3,icon:"🎉",style:{background:"#10B981",color:"#fff",fontWeight:"bold"}}),console.log("🎊 [RegistrationsPage] Toast notification shown")},n=j=>{console.log("👤 [RegistrationsPage] Customer created:",j),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats")},R=()=>{if(!C.isConnected){console.log("⏳ [RegistrationsPage] Socket not connected yet, waiting..."),setTimeout(R,500);return}console.log("🔌 [RegistrationsPage] Socket connected, registering listeners..."),C.on("new_registration",s),C.on("registration-updated",t),C.on("registration_updated",t),C.on("customer-created",n),C.on("registration_status_changed",t),console.log("📡 [RegistrationsPage] Socket.IO listeners registered for registrations")};return R(),()=>{C.off("new_registration",s),C.off("registration-updated",t),C.off("registration_updated",t),C.off("customer-created",n),C.off("registration_status_changed",t),console.log("📡 [RegistrationsPage] Socket.IO listeners cleaned up")}},[a]),Nt?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pendaftaran Customer"}),e.jsx("p",{className:"text-gray-600",children:"Kelola pendaftaran customer baru dari public form"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:lt,disabled:fe||we,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors inline-flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:fe?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Export to Excel"]})}),e.jsxs(Qt,{to:"/registration-analytics",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx($t,{className:"-ml-1 mr-2 h-5 w-5"}),"Analytics"]}),e.jsxs("a",{href:"/register",target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Form Pendaftaran"]})]})]}),v.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[v.length," registration dipilih"]}),e.jsx("button",{onClick:()=>{A([]),T(!1)},className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:"Batal Pilihan"})]}),e.jsxs("div",{className:"flex gap-2",children:[Se&&e.jsxs("button",{onClick:ct,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm inline-flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-1"}),"Verify"]}),_e&&e.jsxs("button",{onClick:dt,className:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm inline-flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(D,{icon:Lt,title:"Total Pendaftaran",value:_.total_registrations||0,color:"blue"}),e.jsx(D,{icon:Bt,title:"Need Review",value:(parseInt(_.pending_verification)||0)+(parseInt(_.verified)||0),color:"yellow",onClick:()=>{const t=m.status==="pending_verification"||m.status==="verified";P(k(N({},m),{status:t?"":"pending_verification",dateFilter:""})),h(1)}}),e.jsx(D,{icon:xe,title:"Survey",value:(parseInt(_.survey_scheduled)||0)+(parseInt(_.survey_completed)||0),color:"indigo",onClick:()=>{const t=m.status==="survey_scheduled"||m.status==="survey_completed";P(k(N({},m),{status:t?"":"survey_scheduled",dateFilter:""})),h(1)}}),e.jsx(D,{icon:he,title:"Approved",value:_.approved||0,color:"green",onClick:()=>{P(k(N({},m),{status:m.status==="approved"?"":"approved",dateFilter:""})),h(1)}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(D,{icon:Ye,title:"Customer Created",value:_.customer_created||0,color:"emerald",onClick:()=>{P(k(N({},m),{status:m.status==="customer_created"?"":"customer_created",dateFilter:""})),h(1)}}),e.jsx(D,{icon:W,title:"Rejected",value:_.rejected||0,color:"red",onClick:()=>{P(k(N({},m),{status:m.status==="rejected"?"":"rejected",dateFilter:""})),h(1)}}),e.jsx(D,{icon:xe,title:"Today's New",value:_.today_registrations||0,color:"orange",onClick:()=>{P(k(N({},m),{status:"",dateFilter:m.dateFilter==="today"?"":"today"})),h(1)}})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(It,{className:"h-4 w-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari nama, email, nomor...",className:"form-input pl-10",value:m.search,onChange:t=>P(k(N({},m),{search:t.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"form-input",value:m.status,onChange:t=>P(k(N({},m),{status:t.target.value})),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"pending_verification",children:"Pending Verification"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"survey_scheduled",children:"Survey Scheduled"}),e.jsx("option",{value:"survey_completed",children:"Survey Completed"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"customer_created",children:"Customer Created"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["All Registrations",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",kt," total)"]})]})}),e.jsxs("div",{className:"card-body p-0",children:[we?e.jsx("div",{className:"py-12",children:e.jsx(Gt,{className:"mx-auto"})}):((Te=o==null?void 0:o.data)==null?void 0:Te.registrations.length)===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada pendaftaran"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Pendaftaran akan muncul setelah customer mengisi form pendaftaran"}),e.jsxs("a",{href:"/register",target:"_blank",rel:"noopener noreferrer",className:"btn-primary inline-flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Buka Form Pendaftaran"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell w-12",children:e.jsx("input",{type:"checkbox",checked:Ue,onChange:nt,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Pilih Semua"})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>G("registration_number"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Nomor Registrasi"}),U("registration_number")]})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>G("full_name"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Customer"}),U("full_name")]})}),e.jsx("th",{className:"table-header-cell",children:"Paket"}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>G("status"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Status"}),U("status")]})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>G("created_at"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tanggal"}),U("created_at")]})}),e.jsx("th",{className:"table-header-cell",children:"Quick Actions"})]})}),e.jsx("tbody",{className:"table-body",children:(De=o==null?void 0:o.data)==null?void 0:De.registrations.map(t=>e.jsxs("tr",{onClick:()=>p(`/registrations/${t.id}`),className:"group cursor-pointer hover:bg-blue-50 hover:shadow-md hover:border-l-4 hover:border-l-green-500 transition-all duration-200",title:"Klik untuk lihat detail registrasi",children:[e.jsx("td",{className:"table-cell",onClick:s=>s.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:v.includes(t.id),onChange:()=>ot(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsxs("td",{className:"table-cell",children:[e.jsxs("div",{className:"font-medium text-blue-600 flex items-center gap-1",children:[e.jsx("span",{children:t.registration_number}),e.jsx("button",{onClick:s=>{s.stopPropagation(),ue(t.registration_number,"Registration Number")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Registration Number",children:ae==="Registration Number"?e.jsx(ge,{className:"h-3 w-3 text-green-600"}):e.jsx(pe,{className:"h-3 w-3 text-gray-500"})})]}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("id-ID")})]}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.full_name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1 gap-1",children:[e.jsx(Et,{className:"h-3 w-3"}),e.jsx("span",{children:t.phone}),e.jsx("button",{onClick:s=>{s.stopPropagation(),ue(t.phone,"Phone")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Phone",children:ae==="Phone"?e.jsx(ge,{className:"h-3 w-3 text-green-600"}):e.jsx(pe,{className:"h-3 w-3 text-gray-500"})})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 gap-1",children:[e.jsx(qe,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:t.email}),e.jsx("button",{onClick:s=>{s.stopPropagation(),ue(t.email,"Email")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Email",children:ae==="Email"?e.jsx(ge,{className:"h-3 w-3 text-green-600"}):e.jsx(pe,{className:"h-3 w-3 text-gray-500"})})]})]}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"font-medium",children:t.package_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[tt(t.monthly_price),"/bln"]})]}),e.jsx("td",{className:"table-cell",children:Ce(t.status)}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleDateString("id-ID")}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleTimeString("id-ID")})]}),e.jsx("td",{className:"table-cell",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.phone&&e.jsx("button",{onClick:s=>gt(s,t.phone),className:"p-1.5 hover:bg-green-100 rounded transition-colors",title:"Call Customer",children:e.jsx(Mt,{className:"h-4 w-4 text-green-600"})}),t.email&&e.jsx("button",{onClick:s=>pt(s,t.email),className:"p-1.5 hover:bg-blue-100 rounded transition-colors",title:"Email Customer",children:e.jsx(qe,{className:"h-4 w-4 text-blue-600"})}),Se&&t.status==="pending_verification"&&e.jsx("button",{onClick:s=>ut(s,t),className:"p-1.5 hover:bg-blue-100 rounded transition-colors",title:"Quick Verify",children:e.jsx(He,{className:"h-4 w-4 text-blue-600"})}),_e&&!["customer_created","rejected","cancelled"].includes(t.status)&&e.jsx("button",{onClick:s=>xt(s,t),className:"p-1.5 hover:bg-red-100 rounded transition-colors",title:"Quick Reject",children:e.jsx(W,{className:"h-4 w-4 text-red-600"})}),t.status==="verified"&&e.jsx("button",{onClick:s=>jt(s,t),className:"p-1.5 hover:bg-green-100 rounded transition-colors",title:"Quick Approve",children:e.jsx(he,{className:"h-4 w-4 text-green-600"})}),t.status==="verified"&&e.jsx("button",{onClick:s=>ft(s,t),className:"p-1.5 hover:bg-orange-100 rounded transition-colors",title:"Quick Schedule Survey",children:e.jsx(xe,{className:"h-4 w-4 text-orange-600"})}),t.status==="approved"&&!t.customer_id&&e.jsx("button",{onClick:s=>bt(s,t),className:"p-1.5 hover:bg-purple-100 rounded transition-colors",title:"Quick Create Customer",children:e.jsx(Ye,{className:"h-4 w-4 text-purple-600"})})]})})]},t.id))})]})}),(($e=(Fe=o==null?void 0:o.data)==null?void 0:Fe.registrations)==null?void 0:$e.length)>0&&((Le=o==null?void 0:o.data)==null?void 0:Le.pagination)&&e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>h(Math.max(1,x-1)),disabled:x===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>h(Math.min(o.data.pagination.pages,x+1)),disabled:x===o.data.pagination.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Show"}),e.jsxs("select",{value:b,onChange:t=>{L(parseInt(t.target.value)),h(1)},className:"form-input py-1 px-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"rows"})]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(x-1)*b+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(x*b,o.data.pagination.total)})," ","of ",e.jsx("span",{className:"font-medium",children:o.data.pagination.total})," results"]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>h(Math.max(1,x-1)),disabled:x===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Vt,{className:"h-5 w-5"})}),Array.from({length:Math.min(o.data.pagination.pages,10)},(t,s)=>{const n=o.data.pagination.pages;return n<=10||x<=5?s+1:x>=n-4?n-9+s:x-5+s}).map(t=>e.jsx("button",{onClick:()=>h(t),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${x===t?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:t},t)),e.jsx("button",{onClick:()=>h(Math.min(o.data.pagination.pages,x+1)),disabled:x===o.data.pagination.pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ot,{className:"h-5 w-5"})})]})})]})]})})]}),ze&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Detail Pendaftaran"}),e.jsx("button",{onClick:()=>je(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(W,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:Ce(r.status)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nomor Registrasi"}),e.jsx("p",{className:"text-lg font-bold text-blue-600 mt-1",children:r.registration_number})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Pribadi"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nama Lengkap"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"WhatsApp"}),e.jsxs("p",{className:"font-medium text-green-600 flex items-center",children:[r.phone,e.jsx(Kt,{className:"h-4 w-4 ml-1",title:"Verified"})]})]}),r.id_card_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nomor KTP"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.id_card_number})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alamat"}),e.jsx("p",{className:"text-gray-900",children:r.address}),(r.rt||r.rw)&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["RT ",r.rt||"-"," / RW ",r.rw||"-"]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[r.kelurahan,", ",r.kecamatan,", ",r.city," ",r.postal_code]}),r.address_notes&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2 italic",children:["Catatan: ",r.address_notes]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Paket"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:r.package_name}),e.jsxs("p",{className:"text-lg text-gray-600 mt-1",children:[r.bandwidth_down," Mbps"]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:["Rp ",(Be=r.monthly_price)==null?void 0:Be.toLocaleString("id-ID"),"/bulan"]})]})]}),!["rejected"].includes(r.status)&&r.status!=="customer_created"&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r.status==="approved"&&!r.customer_id?"Create Customer":"Available Actions"}),r.status==="pending_verification"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="verified"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"verified",checked:l==="verified",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Verify - Verifikasi Data"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data sudah diperiksa dan valid"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tolak Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data tidak valid atau tidak memenuhi syarat"})]})]})]})}),r.status==="verified"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="approved"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"approved",checked:l==="approved",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Approve - Setujui Langsung"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Skip survey, langsung create customer (Fast Track)"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-indigo-50 transition-colors",style:{borderColor:l==="survey_scheduled"?"#6366f1":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"survey_scheduled",checked:l==="survey_scheduled",onChange:t=>y(t.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"📅 Schedule Survey"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Jadwalkan survey lokasi terlebih dahulu"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tolak Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data tidak memenuhi syarat"})]})]})]})}),r.status==="survey_scheduled"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 border-2 border-indigo-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-900",children:"📅 Survey Scheduled"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Survey telah dijadwalkan. Setelah survey dilakukan, update status di bawah ini."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="survey_completed"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"survey_completed",checked:l==="survey_completed",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Survey Completed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Survey sudah selesai, lokasi feasible untuk instalasi"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tidak Feasible"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi tidak memungkinkan untuk instalasi"})]})]})]})]}),r.status==="survey_completed"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"✅ Survey Completed"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Survey sudah selesai. Pilih tindakan selanjutnya di bawah ini."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="approved"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"approved",checked:l==="approved",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Approve - Setujui Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi feasible, siap untuk create customer"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tidak Feasible"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Hasil survey menunjukkan lokasi tidak layak"})]})]})]})]}),r.status==="approved"&&!r.customer_id&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"🎉 Registration Approved!"}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Pendaftaran sudah disetujui. Klik tombol di bawah untuk membuat data customer dan ticket instalasi."})]}),e.jsx("button",{onClick:()=>rt(r),disabled:z.isLoading,className:"w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 transition-colors inline-flex items-center justify-center",children:z.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(HomeIcon,{className:"h-5 w-5 mr-2"}),"Buat Customer & Ticket Instalasi"]})})]}),l&&r.status!=="approved"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[l==="survey_scheduled"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Survey ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:te,onChange:t=>se(t.target.value),className:"form-input",min:new Date().toISOString().slice(0,16)})]}),l==="survey_completed"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Hasil Survey ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:4,value:B,onChange:t=>K(t.target.value),className:"form-input",placeholder:"Contoh: Survey completed successfully. ODP distance: 50m. Cable needed: 60m. No obstacles found. Location is feasible for installation."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"💡 Tips: Sebutkan jarak ODP, panjang kabel needed, hambatan (jika ada), dan kesimpulan kelayakan instalasi."})]}),l==="rejected"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alasan Penolakan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:3,value:Z,onChange:t=>ee(t.target.value),className:"form-input",placeholder:"Jelaskan alasan penolakan secara detail..."})]}),l!=="survey_completed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan (Opsional)"}),e.jsx("textarea",{rows:2,value:B,onChange:t=>K(t.target.value),className:"form-input",placeholder:"Tambahkan catatan tambahan..."})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{y(null),K(""),ee(""),se("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Batal"}),e.jsx("button",{onClick:at,disabled:de.isLoading,className:`
                              px-6 py-2 rounded-lg text-white transition-colors inline-flex items-center
                              ${l==="rejected"?"bg-red-600 hover:bg-red-700":l==="survey_scheduled"?"bg-indigo-600 hover:bg-indigo-700":"bg-green-600 hover:bg-green-700"}
                              disabled:bg-gray-400 disabled:cursor-not-allowed
                            `,children:de.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"Konfirmasi"]})})]})]})]})]})]})})]}),e.jsx(V,{isOpen:Je,onClose:()=>{H(!1),Y(null)},onConfirm:it,title:"🏠 Buat Customer & Ticket Instalasi",message:S?`Apakah Anda yakin ingin membuat customer dan ticket instalasi untuk "${S.full_name}"?`:"",confirmText:"Ya, Buat Customer",cancelText:"Batal",type:"success",isLoading:z.isLoading,children:S&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2",children:[e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Nama:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.full_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"No. HP:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.phone||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Paket:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.service_package||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Alamat:"}),e.jsxs("span",{className:"font-medium text-gray-900 text-right ml-2",children:[(Ie=S.installation_address)==null?void 0:Ie.substring(0,40),"..."]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["✅ Customer baru akan dibuat",e.jsx("br",{}),"🎫 Ticket instalasi akan otomatis dibuatkan",e.jsx("br",{}),"📧 Notifikasi akan dikirim"]})})]})}),e.jsx(V,{isOpen:We,onClose:()=>{re(!1),f(null)},onConfirm:mt,title:"✅ Verifikasi Data",message:u?`Verifikasi data pendaftaran dari "${u.full_name}"?`:"",confirmText:"Ya, Verifikasi",cancelText:"Batal",type:"info",children:u&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["✅ Status akan berubah menjadi ",e.jsx("span",{className:"font-semibold text-blue-900",children:'"Verified"'}),e.jsx("br",{}),"📋 Data sudah diperiksa dan valid"]})})}),e.jsx(V,{isOpen:Ze,onClose:()=>{le(!1),f(null)},onConfirm:vt,title:"✅ Approve Registrasi",message:u?`Setujui pendaftaran dari "${u.full_name}"?`:"",confirmText:"Ya, Approve",cancelText:"Batal",type:"success",children:u&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-2",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["✅ Status akan berubah menjadi ",e.jsx("span",{className:"font-semibold text-green-900",children:'"Approved"'}),e.jsx("br",{}),"🎉 Pendaftaran disetujui"]})})}),e.jsx(V,{isOpen:et,onClose:()=>{ne(!1),f(null)},onConfirm:yt,title:"📅 Jadwalkan Survey",message:u?`Jadwalkan survey untuk "${u.full_name}"`:"",confirmText:"Ya, Jadwalkan",cancelText:"Batal",type:"warning",children:u&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Survey *"}),e.jsx("input",{type:"date",value:ce,onChange:t=>ke(t.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})}),e.jsx(V,{isOpen:Xe,onClose:()=>{ie(!1),f(null),q("")},onConfirm:ht,title:"❌ Reject Registrasi",message:u?`Tolak pendaftaran dari "${u.full_name}"?`:"",confirmText:"Ya, Reject",cancelText:"Batal",type:"danger",children:u&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alasan Reject *"}),e.jsx("textarea",{value:oe,onChange:t=>q(t.target.value),rows:3,placeholder:"Tuliskan alasan reject...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none"})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96",children:[e.jsx(Tt,{className:"h-24 w-24 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access Registrations."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Required role: Admin, Supervisor, or Customer Service"})]})};export{os as default};
//# sourceMappingURL=RegistrationsPage-DmY1s_pD.js.map

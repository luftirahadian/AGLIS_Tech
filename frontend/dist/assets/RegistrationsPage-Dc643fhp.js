var kt=Object.defineProperty,wt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var St=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var Ee=(p,a,g)=>a in p?kt(p,a,{enumerable:!0,configurable:!0,writable:!0,value:g}):p[a]=g,N=(p,a)=>{for(var g in a||(a={}))St.call(a,g)&&Ee(p,g,a[g]);if(Be)for(var g of Be(a))_t.call(a,g)&&Ee(p,g,a[g]);return p},k=(p,a)=>wt(p,Ct(a));var Q=(p,a,g)=>new Promise(($,D)=>{var V=j=>{try{h(g.next(j))}catch(L){D(L)}},x=j=>{try{h(g.throw(j))}catch(L){D(L)}},h=j=>j.done?$(j.value):Promise.resolve(j.value).then(V,x);h((g=g.apply(p,a)).next())});import{j as e,C as M}from"./notifications-BKoDXu8u.js";import{u as Rt,r as c,L as Qt}from"./react-vendor-BQ7pSkNi.js";import{a as Pt,b as Me,u as Ve}from"./react-query-B7OIdD7u.js";import{x as At,L as Tt,D as Dt,B as Ft,N as de,an as Oe,b as U,ag as $t,K as Lt,g as ue,C as me,aO as Ke,S as It,u as xe,d as he,o as Bt,m as He,O as Et,Q as Mt,V as Vt,a6 as Ot,z as i,W as Kt,Y as Ht,Z as Yt}from"./ui-vendor-DLnrzDYx.js";import{r as w}from"./registrationService-ldf1zcZw.js";import{u as qt,s as C,K as T,L as zt,h as Gt,f as J,i as Ut,e as Jt}from"./customers-DE4GlQu6.js";import"./charts-CREYXqqm.js";import"./socket-BFcXWKeu.js";import"./forms-Dmkgx8TD.js";const ns=()=>{var _e,Re,Qe,Pe,Ae,Te,De,Fe,$e,Le;const p=Rt(),a=Pt(),{user:g,isAdmin:$,isSupervisor:D,isCustomerService:V}=qt(),[x,h]=c.useState(1),[j,L]=c.useState(10),[r,ge]=c.useState(null),[Ye,pe]=c.useState(!1),[l,y]=c.useState(null),[I,O]=c.useState(""),[W,X]=c.useState(""),[Z,ee]=c.useState(""),[B,qe]=c.useState("created_at"),[E,je]=c.useState("DESC"),[be,ve]=c.useState(!1),[m,R]=c.useState({search:"",status:"",dateFilter:""}),[v,P]=c.useState([]),[ze,A]=c.useState(!1),[te,fe]=c.useState(null),[Ge,K]=c.useState(!1),[S,H]=c.useState(null),[Ue,se]=c.useState(!1),[Je,ae]=c.useState(!1),[We,re]=c.useState(!1),[Xe,ie]=c.useState(!1),[d,f]=c.useState(null),[le,Y]=c.useState(""),[ne,ye]=c.useState(new Date().toISOString().split("T")[0]),Ze=t=>t?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):"-",{data:o,isLoading:Ne}=Me(["registrations",m,x,j,B,E],()=>w.getAll(k(N({},m),{page:x,limit:j,sort_by:B,sort_order:E})),{keepPreviousData:!0}),{data:et}=Me("registration-stats",()=>w.getStats(),{select:t=>t.data}),oe=Ve(({id:t,data:s})=>w.updateStatus(t,s),{onSuccess:t=>{var s;a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),y(null),O(""),X(""),ee(""),(s=t==null?void 0:t.data)!=null&&s.registration&&ge(t.data.registration),i.success("Status berhasil diupdate")},onError:t=>{var s,n;i.error(((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Gagal update status")}}),q=Ve(t=>w.createCustomer(t),{onSuccess:t=>{a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),i.success("Customer dan ticket instalasi berhasil dibuat!"),pe(!1),ge(null)},onError:t=>{var s,n;i.error(((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Gagal membuat customer")}}),tt=()=>{if(!r)return;let t={status:l,notes:I};if(l==="rejected"){if(!W.trim()){i.error("Alasan penolakan wajib diisi");return}t.rejection_reason=W}if(l==="survey_scheduled"){if(!Z){i.error("Tanggal survey wajib diisi");return}t.survey_scheduled_date=Z}if(l==="survey_completed"){if(!I.trim()){i.error("Hasil survey wajib diisi");return}t.notes=I}oe.mutate({id:r.id,data:t})},st=t=>{H(t),K(!0)},at=()=>{S&&(q.mutate(S.id),K(!1),H(null))},z=t=>{B===t?je(E==="ASC"?"DESC":"ASC"):(qe(t),je("DESC")),h(1)},G=t=>B!==t?e.jsx(Kt,{className:"h-4 w-4 text-gray-400"}):E==="ASC"?e.jsx(Ht,{className:"h-4 w-4 text-blue-600"}):e.jsx(Yt,{className:"h-4 w-4 text-blue-600"}),ke=t=>{const s={pending_verification:{label:"Pending",color:"bg-yellow-100 text-yellow-800"},verified:{label:"Verified",color:"bg-blue-100 text-blue-800"},survey_scheduled:{label:"Survey Scheduled",color:"bg-indigo-100 text-indigo-800"},survey_completed:{label:"Survey Done",color:"bg-purple-100 text-purple-800"},approved:{label:"Approved",color:"bg-green-100 text-green-800"},customer_created:{label:"Customer Created",color:"bg-emerald-100 text-emerald-800"},rejected:{label:"Rejected",color:"bg-red-100 text-red-800"}},n=s[t]||s.pending_verification;return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${n.color}`,children:n.label})},rt=()=>Q(void 0,null,function*(){var t;try{ve(!0);const n=((t=(yield w.getAll(k(N({},m),{page:1,limit:1e4,sort_by:B,sort_order:E}))).data)==null?void 0:t.registrations)||[];if(n.length===0){i.error("Tidak ada data untuk di-export");return}const b=u=>({pending_verification:"Pending",verified:"Verified",survey_scheduled:"Survey Scheduled",survey_completed:"Survey Done",approved:"Approved",customer_created:"Customer Created",rejected:"Rejected",cancelled:"Cancelled"})[u]||u,F=n.map((u,Ie)=>({No:Ie+1,"Registration Number":u.registration_number,"Tanggal Daftar":J(u.created_at),"Nama Lengkap":u.full_name,Email:u.email||"-",WhatsApp:u.phone||"-","Alamat Lengkap":u.address||"-",Kota:u.city||"-",Package:u.package_name||"-","Harga Bulanan":Ut(u.monthly_price),Status:b(u.status),"Verified Date":u.verified_at?J(u.verified_at):"-","Survey Scheduled":u.survey_scheduled_date?J(u.survey_scheduled_date):"-","Approved Date":u.approved_at?J(u.approved_at):"-","Rejection Reason":u.rejection_reason||"-","Preferred Install Date":u.preferred_installation_date?Gt(u.preferred_installation_date):"-"})),Nt=Jt(F,"Registrations_Export","Registrations Data");i.success(`✅ ${Nt.rows} registrations berhasil di-export!`)}catch(s){console.error("Export error:",s),i.error("Gagal export data. Silakan coba lagi.")}finally{ve(!1)}}),it=t=>{t.target.checked?(P(Se.map(s=>s.id)),A(!0)):(P([]),A(!1))},lt=t=>{if(v.includes(t))P(v.filter(s=>s!==t)),A(!1);else{const s=[...v,t];P(s),s.length===Se.length&&A(!0)}},nt=()=>Q(void 0,null,function*(){if(v.length===0){i.error("Pilih registration terlebih dahulu");return}if(window.confirm(`Verify ${v.length} registration yang dipilih?`))try{let t=0,s=0;for(const n of v)try{yield w.updateStatus(n,"verified",{notes:"Bulk verified"}),t++}catch(b){s++,console.error(`Failed to verify registration ${n}:`,b)}t>0?(i.success(`✅ ${t} registration berhasil di-verify${s>0?`, ${s} gagal`:""}`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),P([]),A(!1)):i.error("Gagal verify registration")}catch(t){console.error("Bulk verify error:",t),i.error("Terjadi kesalahan saat verify registration")}}),ot=()=>Q(void 0,null,function*(){if(v.length===0){i.error("Pilih registration terlebih dahulu");return}const t=window.prompt("Alasan reject (akan diterapkan ke semua):");if(t&&window.confirm(`⚠️ Reject ${v.length} registration?`))try{let s=0,n=0;for(const b of v)try{yield w.updateStatus(b,"rejected",{rejection_reason:t,notes:"Bulk rejected"}),s++}catch(F){n++,console.error(`Failed to reject registration ${b}:`,F)}s>0?(i.success(`✅ ${s} registration berhasil di-reject${n>0?`, ${n} gagal`:""}`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),P([]),A(!1)):i.error("Gagal reject registration")}catch(s){console.error("Bulk reject error:",s),i.error("Terjadi kesalahan saat reject registration")}}),ce=(t,s)=>{navigator.clipboard.writeText(t).then(()=>{fe(s),i.success(`${s} berhasil di-copy!`),setTimeout(()=>fe(null),2e3)}).catch(n=>{i.error("Gagal copy ke clipboard"),console.error("Copy error:",n)})},ct=(t,s)=>{t.stopPropagation(),f(s),se(!0)},dt=()=>Q(void 0,null,function*(){if(d)try{yield w.updateStatus(d.id,"verified",{notes:"Quick verified"}),i.success(`Registration ${d.registration_number} verified`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),se(!1),f(null)}catch(t){i.error("Failed to verify registration"),console.error("Quick verify error:",t)}}),ut=(t,s)=>{t.stopPropagation(),f(s),Y(""),ae(!0)},mt=()=>Q(void 0,null,function*(){if(d){if(!le.trim()){i.error("Alasan reject wajib diisi");return}try{yield w.updateStatus(d.id,"rejected",{rejection_reason:le,notes:"Quick rejected"}),i.success(`Registration ${d.registration_number} rejected`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),ae(!1),f(null),Y("")}catch(t){i.error("Failed to reject registration"),console.error("Quick reject error:",t)}}}),xt=(t,s)=>{t.stopPropagation(),window.location.href=`tel:${s}`},ht=(t,s)=>{t.stopPropagation(),window.location.href=`mailto:${s}`},gt=(t,s)=>{t.stopPropagation(),H(s),K(!0)},pt=(t,s)=>{t.stopPropagation(),f(s),re(!0)},jt=()=>Q(void 0,null,function*(){if(d)try{yield w.updateStatus(d.id,"approved",{notes:"Quick approved"}),i.success(`Registration ${d.registration_number} approved`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),re(!1),f(null)}catch(t){i.error("Failed to approve registration"),console.error("Quick approve error:",t)}}),bt=(t,s)=>{t.stopPropagation(),f(s),ye(new Date().toISOString().split("T")[0]),ie(!0)},vt=()=>Q(void 0,null,function*(){if(d){if(!ne){i.error("Tanggal survey wajib diisi");return}try{yield w.updateStatus(d.id,"survey_scheduled",{survey_date:ne,notes:"Survey scheduled via quick action"}),i.success(`Survey scheduled for ${d.registration_number}`),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),ie(!1),f(null)}catch(t){i.error("Failed to schedule survey"),console.error("Quick schedule survey error:",t)}}}),ft=$||D||V,we=$||D||V,Ce=$||D,_=et||{},yt=((Re=(_e=o==null?void 0:o.data)==null?void 0:_e.pagination)==null?void 0:Re.total)||0,Se=((Qe=o==null?void 0:o.data)==null?void 0:Qe.registrations)||[];return c.useEffect(()=>{const t=b=>{console.log("🔄 Registration update received:",b),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),i.success("Data registrasi telah diperbarui!")},s=b=>{var F;console.log("✨ New registration received:",b),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats"),i.success(`Pendaftaran baru dari ${((F=b.registration)==null?void 0:F.full_name)||"customer"}!`,{duration:4e3,icon:"🎉"})},n=b=>{console.log("👤 Customer created:",b),a.invalidateQueries(["registrations"]),a.invalidateQueries("registration-stats")};return C.on("new_registration",s),C.on("registration-updated",t),C.on("registration_updated",t),C.on("customer-created",n),C.on("registration_status_changed",t),console.log("📡 Socket.IO listeners registered for registrations"),()=>{C.off("new_registration",s),C.off("registration-updated",t),C.off("registration_updated",t),C.off("customer-created",n),C.off("registration_status_changed",t),console.log("📡 Socket.IO listeners cleaned up")}},[a]),ft?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pendaftaran Customer"}),e.jsx("p",{className:"text-gray-600",children:"Kelola pendaftaran customer baru dari public form"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:rt,disabled:be||Ne,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors inline-flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:be?e.jsxs(e.Fragment,{children:[e.jsx(Tt,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Export to Excel"]})}),e.jsxs(Qt,{to:"/registration-analytics",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Ft,{className:"-ml-1 mr-2 h-5 w-5"}),"Analytics"]}),e.jsxs("a",{href:"/register",target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Form Pendaftaran"]})]})]}),v.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[v.length," registration dipilih"]}),e.jsx("button",{onClick:()=>{P([]),A(!1)},className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:"Batal Pilihan"})]}),e.jsxs("div",{className:"flex gap-2",children:[we&&e.jsxs("button",{onClick:nt,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm inline-flex items-center",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"Verify"]}),Ce&&e.jsxs("button",{onClick:ot,className:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm inline-flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(T,{icon:$t,title:"Total Pendaftaran",value:_.total_registrations||0,color:"blue"}),e.jsx(T,{icon:Lt,title:"Need Review",value:(parseInt(_.pending_verification)||0)+(parseInt(_.verified)||0),color:"yellow",onClick:()=>{const t=m.status==="pending_verification"||m.status==="verified";R(k(N({},m),{status:t?"":"pending_verification",dateFilter:""})),h(1)}}),e.jsx(T,{icon:ue,title:"Survey",value:(parseInt(_.survey_scheduled)||0)+(parseInt(_.survey_completed)||0),color:"indigo",onClick:()=>{const t=m.status==="survey_scheduled"||m.status==="survey_completed";R(k(N({},m),{status:t?"":"survey_scheduled",dateFilter:""})),h(1)}}),e.jsx(T,{icon:me,title:"Approved",value:_.approved||0,color:"green",onClick:()=>{R(k(N({},m),{status:m.status==="approved"?"":"approved",dateFilter:""})),h(1)}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(T,{icon:Ke,title:"Customer Created",value:_.customer_created||0,color:"emerald",onClick:()=>{R(k(N({},m),{status:m.status==="customer_created"?"":"customer_created",dateFilter:""})),h(1)}}),e.jsx(T,{icon:U,title:"Rejected",value:_.rejected||0,color:"red",onClick:()=>{R(k(N({},m),{status:m.status==="rejected"?"":"rejected",dateFilter:""})),h(1)}}),e.jsx(T,{icon:ue,title:"Today's New",value:_.today_registrations||0,color:"orange",onClick:()=>{R(k(N({},m),{status:"",dateFilter:m.dateFilter==="today"?"":"today"})),h(1)}})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(It,{className:"h-4 w-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari nama, email, nomor...",className:"form-input pl-10",value:m.search,onChange:t=>R(k(N({},m),{search:t.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"form-input",value:m.status,onChange:t=>R(k(N({},m),{status:t.target.value})),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"pending_verification",children:"Pending Verification"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"survey_scheduled",children:"Survey Scheduled"}),e.jsx("option",{value:"survey_completed",children:"Survey Completed"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"customer_created",children:"Customer Created"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["All Registrations",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",yt," total)"]})]})}),e.jsxs("div",{className:"card-body p-0",children:[Ne?e.jsx("div",{className:"py-12",children:e.jsx(zt,{className:"mx-auto"})}):((Pe=o==null?void 0:o.data)==null?void 0:Pe.registrations.length)===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(de,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada pendaftaran"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Pendaftaran akan muncul setelah customer mengisi form pendaftaran"}),e.jsxs("a",{href:"/register",target:"_blank",rel:"noopener noreferrer",className:"btn-primary inline-flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Buka Form Pendaftaran"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell w-12",children:e.jsx("input",{type:"checkbox",checked:ze,onChange:it,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Pilih Semua"})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>z("registration_number"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Nomor Registrasi"}),G("registration_number")]})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>z("full_name"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Customer"}),G("full_name")]})}),e.jsx("th",{className:"table-header-cell",children:"Paket"}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>z("status"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Status"}),G("status")]})}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>z("created_at"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tanggal"}),G("created_at")]})}),e.jsx("th",{className:"table-header-cell",children:"Quick Actions"})]})}),e.jsx("tbody",{className:"table-body",children:(Ae=o==null?void 0:o.data)==null?void 0:Ae.registrations.map(t=>e.jsxs("tr",{onClick:()=>p(`/registrations/${t.id}`),className:"group cursor-pointer hover:bg-blue-50 hover:shadow-md hover:border-l-4 hover:border-l-green-500 transition-all duration-200",title:"Klik untuk lihat detail registrasi",children:[e.jsx("td",{className:"table-cell",onClick:s=>s.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:v.includes(t.id),onChange:()=>lt(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsxs("td",{className:"table-cell",children:[e.jsxs("div",{className:"font-medium text-blue-600 flex items-center gap-1",children:[e.jsx("span",{children:t.registration_number}),e.jsx("button",{onClick:s=>{s.stopPropagation(),ce(t.registration_number,"Registration Number")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Registration Number",children:te==="Registration Number"?e.jsx(xe,{className:"h-3 w-3 text-green-600"}):e.jsx(he,{className:"h-3 w-3 text-gray-500"})})]}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("id-ID")})]}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.full_name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1 gap-1",children:[e.jsx(Bt,{className:"h-3 w-3"}),e.jsx("span",{children:t.phone}),e.jsx("button",{onClick:s=>{s.stopPropagation(),ce(t.phone,"Phone")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Phone",children:te==="Phone"?e.jsx(xe,{className:"h-3 w-3 text-green-600"}):e.jsx(he,{className:"h-3 w-3 text-gray-500"})})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 gap-1",children:[e.jsx(He,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:t.email}),e.jsx("button",{onClick:s=>{s.stopPropagation(),ce(t.email,"Email")},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 rounded transition-opacity",title:"Copy Email",children:te==="Email"?e.jsx(xe,{className:"h-3 w-3 text-green-600"}):e.jsx(he,{className:"h-3 w-3 text-gray-500"})})]})]}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"font-medium",children:t.package_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[Ze(t.monthly_price),"/bln"]})]}),e.jsx("td",{className:"table-cell",children:ke(t.status)}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleDateString("id-ID")}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleTimeString("id-ID")})]}),e.jsx("td",{className:"table-cell",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.phone&&e.jsx("button",{onClick:s=>xt(s,t.phone),className:"p-1.5 hover:bg-green-100 rounded transition-colors",title:"Call Customer",children:e.jsx(Et,{className:"h-4 w-4 text-green-600"})}),t.email&&e.jsx("button",{onClick:s=>ht(s,t.email),className:"p-1.5 hover:bg-blue-100 rounded transition-colors",title:"Email Customer",children:e.jsx(He,{className:"h-4 w-4 text-blue-600"})}),we&&t.status==="pending_verification"&&e.jsx("button",{onClick:s=>ct(s,t),className:"p-1.5 hover:bg-blue-100 rounded transition-colors",title:"Quick Verify",children:e.jsx(Oe,{className:"h-4 w-4 text-blue-600"})}),Ce&&!["customer_created","rejected","cancelled"].includes(t.status)&&e.jsx("button",{onClick:s=>ut(s,t),className:"p-1.5 hover:bg-red-100 rounded transition-colors",title:"Quick Reject",children:e.jsx(U,{className:"h-4 w-4 text-red-600"})}),t.status==="verified"&&e.jsx("button",{onClick:s=>pt(s,t),className:"p-1.5 hover:bg-green-100 rounded transition-colors",title:"Quick Approve",children:e.jsx(me,{className:"h-4 w-4 text-green-600"})}),t.status==="verified"&&e.jsx("button",{onClick:s=>bt(s,t),className:"p-1.5 hover:bg-orange-100 rounded transition-colors",title:"Quick Schedule Survey",children:e.jsx(ue,{className:"h-4 w-4 text-orange-600"})}),t.status==="approved"&&!t.customer_id&&e.jsx("button",{onClick:s=>gt(s,t),className:"p-1.5 hover:bg-purple-100 rounded transition-colors",title:"Quick Create Customer",children:e.jsx(Ke,{className:"h-4 w-4 text-purple-600"})})]})})]},t.id))})]})}),((De=(Te=o==null?void 0:o.data)==null?void 0:Te.registrations)==null?void 0:De.length)>0&&((Fe=o==null?void 0:o.data)==null?void 0:Fe.pagination)&&e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>h(Math.max(1,x-1)),disabled:x===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>h(Math.min(o.data.pagination.pages,x+1)),disabled:x===o.data.pagination.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Show"}),e.jsxs("select",{value:j,onChange:t=>{L(parseInt(t.target.value)),h(1)},className:"form-input py-1 px-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"rows"})]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(x-1)*j+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(x*j,o.data.pagination.total)})," ","of ",e.jsx("span",{className:"font-medium",children:o.data.pagination.total})," results"]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>h(Math.max(1,x-1)),disabled:x===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Mt,{className:"h-5 w-5"})}),Array.from({length:Math.min(o.data.pagination.pages,10)},(t,s)=>{const n=o.data.pagination.pages;return n<=10||x<=5?s+1:x>=n-4?n-9+s:x-5+s}).map(t=>e.jsx("button",{onClick:()=>h(t),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${x===t?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:t},t)),e.jsx("button",{onClick:()=>h(Math.min(o.data.pagination.pages,x+1)),disabled:x===o.data.pagination.pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Vt,{className:"h-5 w-5"})})]})})]})]})})]}),Ye&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Detail Pendaftaran"}),e.jsx("button",{onClick:()=>pe(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(U,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:ke(r.status)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nomor Registrasi"}),e.jsx("p",{className:"text-lg font-bold text-blue-600 mt-1",children:r.registration_number})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Pribadi"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nama Lengkap"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"WhatsApp"}),e.jsxs("p",{className:"font-medium text-green-600 flex items-center",children:[r.phone,e.jsx(Ot,{className:"h-4 w-4 ml-1",title:"Verified"})]})]}),r.id_card_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nomor KTP"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.id_card_number})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alamat"}),e.jsx("p",{className:"text-gray-900",children:r.address}),(r.rt||r.rw)&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["RT ",r.rt||"-"," / RW ",r.rw||"-"]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[r.kelurahan,", ",r.kecamatan,", ",r.city," ",r.postal_code]}),r.address_notes&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2 italic",children:["Catatan: ",r.address_notes]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Paket"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:r.package_name}),e.jsxs("p",{className:"text-lg text-gray-600 mt-1",children:[r.bandwidth_down," Mbps"]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:["Rp ",($e=r.monthly_price)==null?void 0:$e.toLocaleString("id-ID"),"/bulan"]})]})]}),!["rejected"].includes(r.status)&&r.status!=="customer_created"&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r.status==="approved"&&!r.customer_id?"Create Customer":"Available Actions"}),r.status==="pending_verification"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="verified"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"verified",checked:l==="verified",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Verify - Verifikasi Data"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data sudah diperiksa dan valid"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tolak Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data tidak valid atau tidak memenuhi syarat"})]})]})]})}),r.status==="verified"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="approved"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"approved",checked:l==="approved",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Approve - Setujui Langsung"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Skip survey, langsung create customer (Fast Track)"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-indigo-50 transition-colors",style:{borderColor:l==="survey_scheduled"?"#6366f1":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"survey_scheduled",checked:l==="survey_scheduled",onChange:t=>y(t.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"📅 Schedule Survey"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Jadwalkan survey lokasi terlebih dahulu"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tolak Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Data tidak memenuhi syarat"})]})]})]})}),r.status==="survey_scheduled"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 border-2 border-indigo-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-900",children:"📅 Survey Scheduled"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Survey telah dijadwalkan. Setelah survey dilakukan, update status di bawah ini."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="survey_completed"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"survey_completed",checked:l==="survey_completed",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Survey Completed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Survey sudah selesai, lokasi feasible untuk instalasi"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tidak Feasible"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi tidak memungkinkan untuk instalasi"})]})]})]})]}),r.status==="survey_completed"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"✅ Survey Completed"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Survey sudah selesai. Pilih tindakan selanjutnya di bawah ini."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-green-50 transition-colors",style:{borderColor:l==="approved"?"#10b981":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"approved",checked:l==="approved",onChange:t=>y(t.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"✅ Approve - Setujui Pendaftaran"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi feasible, siap untuk create customer"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",style:{borderColor:l==="rejected"?"#ef4444":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"action",value:"rejected",checked:l==="rejected",onChange:t=>y(t.target.value),className:"h-4 w-4 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"❌ Reject - Tidak Feasible"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Hasil survey menunjukkan lokasi tidak layak"})]})]})]})]}),r.status==="approved"&&!r.customer_id&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"🎉 Registration Approved!"}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Pendaftaran sudah disetujui. Klik tombol di bawah untuk membuat data customer dan ticket instalasi."})]}),e.jsx("button",{onClick:()=>st(r),disabled:q.isLoading,className:"w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 transition-colors inline-flex items-center justify-center",children:q.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(HomeIcon,{className:"h-5 w-5 mr-2"}),"Buat Customer & Ticket Instalasi"]})})]}),l&&r.status!=="approved"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[l==="survey_scheduled"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Survey ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:Z,onChange:t=>ee(t.target.value),className:"form-input",min:new Date().toISOString().slice(0,16)})]}),l==="survey_completed"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Hasil Survey ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:4,value:I,onChange:t=>O(t.target.value),className:"form-input",placeholder:"Contoh: Survey completed successfully. ODP distance: 50m. Cable needed: 60m. No obstacles found. Location is feasible for installation."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"💡 Tips: Sebutkan jarak ODP, panjang kabel needed, hambatan (jika ada), dan kesimpulan kelayakan instalasi."})]}),l==="rejected"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alasan Penolakan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:3,value:W,onChange:t=>X(t.target.value),className:"form-input",placeholder:"Jelaskan alasan penolakan secara detail..."})]}),l!=="survey_completed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan (Opsional)"}),e.jsx("textarea",{rows:2,value:I,onChange:t=>O(t.target.value),className:"form-input",placeholder:"Tambahkan catatan tambahan..."})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{y(null),O(""),X(""),ee("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Batal"}),e.jsx("button",{onClick:tt,disabled:oe.isLoading,className:`
                              px-6 py-2 rounded-lg text-white transition-colors inline-flex items-center
                              ${l==="rejected"?"bg-red-600 hover:bg-red-700":l==="survey_scheduled"?"bg-indigo-600 hover:bg-indigo-700":"bg-green-600 hover:bg-green-700"}
                              disabled:bg-gray-400 disabled:cursor-not-allowed
                            `,children:oe.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-5 w-5 mr-2"}),"Konfirmasi"]})})]})]})]})]})]})})]}),e.jsx(M,{isOpen:Ge,onClose:()=>{K(!1),H(null)},onConfirm:at,title:"🏠 Buat Customer & Ticket Instalasi",message:S?`Apakah Anda yakin ingin membuat customer dan ticket instalasi untuk "${S.full_name}"?`:"",confirmText:"Ya, Buat Customer",cancelText:"Batal",type:"success",isLoading:q.isLoading,children:S&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2",children:[e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Nama:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.full_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"No. HP:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.phone||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Paket:"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.service_package||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Alamat:"}),e.jsxs("span",{className:"font-medium text-gray-900 text-right ml-2",children:[(Le=S.installation_address)==null?void 0:Le.substring(0,40),"..."]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["✅ Customer baru akan dibuat",e.jsx("br",{}),"🎫 Ticket instalasi akan otomatis dibuatkan",e.jsx("br",{}),"📧 Notifikasi akan dikirim"]})})]})}),e.jsx(M,{isOpen:Ue,onClose:()=>{se(!1),f(null)},onConfirm:dt,title:"✅ Verifikasi Data",message:d?`Verifikasi data pendaftaran dari "${d.full_name}"?`:"",confirmText:"Ya, Verifikasi",cancelText:"Batal",type:"info",children:d&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["✅ Status akan berubah menjadi ",e.jsx("span",{className:"font-semibold text-blue-900",children:'"Verified"'}),e.jsx("br",{}),"📋 Data sudah diperiksa dan valid"]})})}),e.jsx(M,{isOpen:We,onClose:()=>{re(!1),f(null)},onConfirm:jt,title:"✅ Approve Registrasi",message:d?`Setujui pendaftaran dari "${d.full_name}"?`:"",confirmText:"Ya, Approve",cancelText:"Batal",type:"success",children:d&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-2",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["✅ Status akan berubah menjadi ",e.jsx("span",{className:"font-semibold text-green-900",children:'"Approved"'}),e.jsx("br",{}),"🎉 Pendaftaran disetujui"]})})}),e.jsx(M,{isOpen:Xe,onClose:()=>{ie(!1),f(null)},onConfirm:vt,title:"📅 Jadwalkan Survey",message:d?`Jadwalkan survey untuk "${d.full_name}"`:"",confirmText:"Ya, Jadwalkan",cancelText:"Batal",type:"warning",children:d&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Survey *"}),e.jsx("input",{type:"date",value:ne,onChange:t=>ye(t.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})}),e.jsx(M,{isOpen:Je,onClose:()=>{ae(!1),f(null),Y("")},onConfirm:mt,title:"❌ Reject Registrasi",message:d?`Tolak pendaftaran dari "${d.full_name}"?`:"",confirmText:"Ya, Reject",cancelText:"Batal",type:"danger",children:d&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alasan Reject *"}),e.jsx("textarea",{value:le,onChange:t=>Y(t.target.value),rows:3,placeholder:"Tuliskan alasan reject...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none"})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96",children:[e.jsx(At,{className:"h-24 w-24 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access Registrations."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Required role: Admin, Supervisor, or Customer Service"})]})};export{ns as default};
//# sourceMappingURL=RegistrationsPage-Dc643fhp.js.map

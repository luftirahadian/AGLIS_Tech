var de=Object.defineProperty,xe=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var O=(o,n,l)=>n in o?de(o,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[n]=l,C=(o,n)=>{for(var l in n||(n={}))ue.call(n,l)&&O(o,l,n[l]);if(J)for(var l of J(n))he.call(n,l)&&O(o,l,n[l]);return o},S=(o,n)=>xe(o,me(n));import{j as e}from"./notifications-BKoDXu8u.js";import{u as be,r as b}from"./react-vendor-BQ7pSkNi.js";import{a as ge,b as V,u as pe}from"./react-query-B7OIdD7u.js";import{t as A}from"./tickets-CpRh8N1L.js";import{L as je,K as j,a as T,w as ve}from"./customers-DE4GlQu6.js";import{ab as ye,I as fe,D as Ne,N as K,J as Q,C as E,K as W,b as v,a7 as Z,S as we,aB as _e,aC as D,U as ke,o as Ce,m as Se,p as R,g as Ae,E as Te,Q as Ee,V as De,w as Le,z as w,W as Be,Y as $e,Z as Fe,ad as Me,ak as Y}from"./ui-vendor-DLnrzDYx.js";import"./charts-CREYXqqm.js";import"./forms-Dmkgx8TD.js";import"./socket-BFcXWKeu.js";const Ze=()=>{var I,P;const o=be(),n=ge(),[l,L]=b.useState({search:"",employment_status:"",availability_status:"",skill_level:"",work_zone:"",specialization:""}),[c,m]=b.useState(1),[y,q]=b.useState("created_at"),[f,B]=b.useState("DESC"),[p,H]=b.useState(10),[N,$]=b.useState("table"),{data:u,isLoading:X,refetch:G}=V(["technicians",l,c,p,y,f],()=>A.getTechnicians(S(C({},l),{page:c,limit:p,sort_by:y,sort_order:f})),{keepPreviousData:!0}),{data:_}=V("technician-stats",()=>A.getTechnicianStats()),ee=pe(({id:s,status:a})=>A.updateAvailability(s,{availability_status:a}),{onSuccess:()=>{w.success("Status updated successfully"),G(),n.invalidateQueries("technician-stats")},onError:s=>{var a,t;w.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to update status")}}),x=(s,a)=>{L(t=>S(C({},t),{[s]:a})),m(1)},F=()=>{o("/users?create=true&role=technician"),w.info('Create a user account with role "Technician"')},k=s=>{o(`/technicians/${s.id}`)},se=s=>{o(`/users?id=${s}`)},ae=(s,a)=>{ee.mutate({id:s,status:a})},M=s=>{y===s?B(f==="ASC"?"DESC":"ASC"):(q(s),B("DESC")),m(1)},te=()=>{const s=h.map(r=>{var U;return{"Employee ID":r.employee_id,"Full Name":r.full_name,Username:r.username||"N/A",Phone:r.phone,Email:r.email||"","Skill Level":r.skill_level,"Work Zone":(U=r.work_zone)==null?void 0:U.replace("_"," "),"Employment Status":r.employment_status,Availability:r.availability_status,"Active Tickets":`${r.active_tickets||0}/${r.max_daily_tickets||8}`,Rating:r.avg_customer_rating?parseFloat(r.avg_customer_rating).toFixed(1):"N/A","Completed Tickets":r.total_tickets_completed||0,"Hire Date":r.hire_date?new Date(r.hire_date).toLocaleDateString("id-ID"):"","Created At":new Date(r.created_at).toLocaleDateString("id-ID")}}),a=T.json_to_sheet(s),t=T.book_new();T.book_append_sheet(t,a,"Technicians"),a["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:15},{wch:25},{wch:12},{wch:15},{wch:15},{wch:12},{wch:15},{wch:8},{wch:15},{wch:12},{wch:12}];const i=`technicians-export-${new Date().toISOString().split("T")[0]}.xlsx`;ve(t,i),w.success(`Exported ${s.length} technicians to ${i}`)},z=s=>y!==s?e.jsx(Be,{className:"h-4 w-4 text-gray-400"}):f==="ASC"?e.jsx($e,{className:"h-4 w-4 text-blue-600"}):e.jsx(Fe,{className:"h-4 w-4 text-blue-600"}),le=s=>{const a={available:{color:"bg-green-100 text-green-800",icon:E,label:"Available"},busy:{color:"bg-yellow-100 text-yellow-800",icon:W,label:"Busy"},break:{color:"bg-blue-100 text-blue-800",icon:Y,label:"Break"},offline:{color:"bg-gray-100 text-gray-800",icon:v,label:"Offline"}},t=a[s]||a.offline,i=t.icon;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:[e.jsx(i,{className:"h-3 w-3 mr-1"}),t.label]})},ie=s=>{const a={active:{color:"bg-green-100 text-green-800",icon:E,label:"Active"},inactive:{color:"bg-gray-100 text-gray-800",icon:Y,label:"Inactive"},suspended:{color:"bg-red-100 text-red-800",icon:v,label:"Suspended"},terminated:{color:"bg-red-100 text-red-800",icon:v,label:"Terminated"}},t=a[s]||a.active,i=t.icon;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:[e.jsx(i,{className:"h-3 w-3 mr-1"}),t.label]})},re=s=>{const a={junior:{color:"bg-blue-100 text-blue-800",label:"Junior"},senior:{color:"bg-purple-100 text-purple-800",label:"Senior"},expert:{color:"bg-orange-100 text-orange-800",label:"Expert"},specialist:{color:"bg-red-100 text-red-800",label:"Specialist"}},t=a[s]||a.junior;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),t.label]})},ne=s=>{if(!s)return e.jsx("span",{className:"text-xs text-gray-400",children:"Never"});const a=new Date(s),i=Math.floor((new Date-a)/(1e3*60*60*24));return i===0?e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Today"}):i<=7?e.jsxs("span",{className:"text-xs text-yellow-600",children:[i,"d ago"]}):i<=30?e.jsxs("span",{className:"text-xs text-orange-600",children:[i,"d ago"]}):e.jsx("span",{className:"text-xs text-red-600",children:">30d ago"})},ce=s=>{if(!s)return"N/A";const a=new Date(s),i=(new Date-a)/(1e3*60*60*24*365.25);return i<1?`${Math.floor(i*12)}mo`:`${i.toFixed(1)}y`},oe=({current:s,max:a})=>{const t=s/a*100,i=t>=80?"bg-red-500":t>=50?"bg-yellow-500":"bg-green-500";return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[s,"/",a]}),e.jsxs("span",{className:`text-xs font-semibold ${t>=80?"text-red-600":t>=50?"text-yellow-600":"text-green-600"}`,children:[t.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`${i} h-2 rounded-full transition-all duration-300`,style:{width:`${Math.min(t,100)}%`}})})]})},h=((I=u==null?void 0:u.data)==null?void 0:I.technicians)||[],d=((P=u==null?void 0:u.data)==null?void 0:P.pagination)||{},g=(_==null?void 0:_.data)||{};return b.useEffect(()=>{const s=()=>{n.invalidateQueries(["technicians"]),n.invalidateQueries("technician-stats")};return window.addEventListener("technician-created",s),window.addEventListener("technician-updated",s),window.addEventListener("technician-status-changed",s),()=>{window.removeEventListener("technician-created",s),window.removeEventListener("technician-updated",s),window.removeEventListener("technician-status-changed",s)}},[n]),X&&!u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(je,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[e.jsx(ye,{className:"h-7 w-7 text-blue-600"}),e.jsx("span",{children:"Technician Management"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Kelola teknisi lapangan dan monitor performa"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsxs("div",{className:"hidden lg:flex items-center px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(fe,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-xs text-blue-900",children:'Create technician via Users page with role="Technician"'})]}),e.jsxs("button",{onClick:te,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center space-x-2",title:"Export to Excel",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs("button",{onClick:F,className:"btn-primary flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Technician User"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(j,{icon:Q,title:"Total Teknisi",value:g.total_technicians||0,color:"blue"}),e.jsx(j,{icon:E,title:"Available",value:g.available_technicians||0,color:"green",onClick:()=>{x("availability_status",l.availability_status==="available"?"":"available")}}),e.jsx(j,{icon:W,title:"Busy",value:g.busy_technicians||0,color:"yellow",onClick:()=>{x("availability_status",l.availability_status==="busy"?"":"busy")}}),e.jsx(j,{icon:v,title:"Offline",value:g.offline_technicians||0,color:"gray",onClick:()=>{x("availability_status",l.availability_status==="offline"?"":"offline")}}),e.jsx(j,{icon:Z,title:"Avg Rating",value:g.avg_customer_rating?parseFloat(g.avg_customer_rating).toFixed(1):"0.0",format:"decimal",suffix:"/5.0",color:"orange"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"h-4 w-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",className:"form-input pl-10",placeholder:"Cari teknisi...",value:l.search,onChange:s=>x("search",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Availability Status"}),e.jsxs("select",{className:"form-input",value:l.availability_status,onChange:s=>x("availability_status",s.target.value),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"busy",children:"Busy"}),e.jsx("option",{value:"break",children:"On Break"}),e.jsx("option",{value:"offline",children:"Offline"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employment Status"}),e.jsxs("select",{className:"form-input",value:l.employment_status,onChange:s=>x("employment_status",s.target.value),children:[e.jsx("option",{value:"",children:"Semua"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"terminated",children:"Terminated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skill Level"}),e.jsxs("select",{className:"form-input",value:l.skill_level,onChange:s=>x("skill_level",s.target.value),children:[e.jsx("option",{value:"",children:"Semua Level"}),e.jsx("option",{value:"junior",children:"Junior"}),e.jsx("option",{value:"senior",children:"Senior"}),e.jsx("option",{value:"expert",children:"Expert"}),e.jsx("option",{value:"specialist",children:"Specialist"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Zone"}),e.jsxs("select",{className:"form-input",value:l.work_zone,onChange:s=>x("work_zone",s.target.value),children:[e.jsx("option",{value:"",children:"Semua Zone"}),e.jsx("option",{value:"Karawang",children:"Karawang"}),e.jsx("option",{value:"Jakarta_Pusat",children:"Jakarta Pusat"}),e.jsx("option",{value:"Jakarta_Selatan",children:"Jakarta Selatan"}),e.jsx("option",{value:"Jakarta_Utara",children:"Jakarta Utara"}),e.jsx("option",{value:"Jakarta_Timur",children:"Jakarta Timur"}),e.jsx("option",{value:"Jakarta_Barat",children:"Jakarta Barat"}),e.jsx("option",{value:"Bogor",children:"Bogor"}),e.jsx("option",{value:"Depok",children:"Depok"}),e.jsx("option",{value:"Tangerang",children:"Tangerang"}),e.jsx("option",{value:"Bekasi",children:"Bekasi"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),e.jsxs("select",{className:"form-input",value:l.specialization,onChange:s=>x("specialization",s.target.value),children:[e.jsx("option",{value:"",children:"Semua Spesialisasi"}),e.jsx("option",{value:"fiber_optic",children:"Fiber Optic"}),e.jsx("option",{value:"wireless",children:"Wireless"}),e.jsx("option",{value:"networking",children:"Networking"}),e.jsx("option",{value:"installation",children:"Installation"}),e.jsx("option",{value:"troubleshooting",children:"Troubleshooting"})]})]})]}),Object.values(l).some(s=>s)&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),Object.entries(l).map(([s,a])=>a?e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full flex items-center space-x-1",children:[e.jsxs("span",{children:[s,": ",a]}),e.jsx("button",{onClick:()=>x(s,""),className:"hover:text-blue-900",children:"Ã—"})]},s):null),e.jsx("button",{onClick:()=>{L({search:"",employment_status:"",availability_status:"",skill_level:"",work_zone:"",specialization:""}),m(1)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear all"})]})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>$("table"),className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${N==="table"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx("span",{children:"Table View"})]}),e.jsxs("button",{onClick:()=>$("map"),className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${N==="map"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:"Map View"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[h.length," technician",h.length!==1?"s":""," displayed"]})]})}),N==="table"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["All Technicians",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",d.total||0," total)"]})]})}),e.jsx("div",{className:"card-body p-0",children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No technicians found"}),e.jsx("p",{className:"mt-1 text-gray-500 mb-4",children:'Create a user account with role "Technician" to get started'}),e.jsxs("button",{onClick:F,className:"btn-primary",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create Technician User"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>M("full_name"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Technician"}),z("full_name")]})}),e.jsx("th",{className:"table-header-cell",children:"User Account"}),e.jsx("th",{className:"table-header-cell",children:"Contact"}),e.jsx("th",{className:"table-header-cell",children:"Skills & Zone"}),e.jsx("th",{className:"table-header-cell",children:"Employment"}),e.jsx("th",{className:"table-header-cell cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>M("availability_status"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Availability"}),z("availability_status")]})}),e.jsx("th",{className:"table-header-cell",children:"Capacity"}),e.jsx("th",{className:"table-header-cell",children:"Performance"}),e.jsx("th",{className:"table-header-cell",children:"Service"}),e.jsx("th",{className:"table-header-cell text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"table-body",children:h.map(s=>{var a;return e.jsxs("tr",{onClick:()=>k(s),className:"group cursor-pointer hover:bg-blue-50 hover:shadow-md hover:border-l-4 hover:border-l-blue-500 transition-all duration-200",title:"Klik untuk lihat detail technician",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(ke,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.full_name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.employee_id})]})]})}),e.jsx("td",{className:"table-cell",children:s.username?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>se(s.user_id),className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:["@",s.username]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ne(s.last_login)})]}):e.jsxs("span",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),"No account"]})}),e.jsxs("td",{className:"table-cell",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Ce,{className:"h-3 w-3 mr-1 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.phone})]}),s.email&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(Se,{className:"h-3 w-3 mr-1 text-gray-400"}),s.email]})]}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"space-y-2",children:[re(s.skill_level),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),(a=s.work_zone)==null?void 0:a.replace("_"," ")]})]})}),e.jsx("td",{className:"table-cell",children:ie(s.employment_status)}),e.jsx("td",{className:"table-cell",onClick:t=>t.stopPropagation(),children:e.jsx("div",{className:"space-y-2",children:e.jsxs("select",{value:s.availability_status,onChange:t=>ae(s.id,t.target.value),disabled:s.employment_status!=="active",className:`text-xs font-medium rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500 w-full ${s.availability_status==="available"?"bg-green-100 text-green-800":s.availability_status==="busy"?"bg-yellow-100 text-yellow-800":s.availability_status==="break"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"} ${s.employment_status!=="active"?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"busy",children:"Busy"}),e.jsx("option",{value:"break",children:"Break"}),e.jsx("option",{value:"offline",children:"Offline"})]})})}),e.jsx("td",{className:"table-cell",children:e.jsx(oe,{current:parseInt(s.active_tickets)||0,max:s.max_daily_tickets||8})}),e.jsxs("td",{className:"table-cell",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Z,{className:"h-4 w-4 mr-1 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:s.avg_customer_rating?parseFloat(s.avg_customer_rating).toFixed(1):"N/A"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Completed: ",s.total_tickets_completed||0]})]}),e.jsxs("td",{className:"table-cell",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[e.jsx(Ae,{className:"h-3 w-3 mr-1"}),ce(s.hire_date)]}),s.hire_date&&e.jsx("div",{className:"text-xs text-gray-400",children:new Date(s.hire_date).toLocaleDateString("id-ID",{month:"short",year:"numeric"})})]}),e.jsx("td",{className:"table-cell",onClick:t=>t.stopPropagation(),children:e.jsx("div",{className:"flex justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:t=>{t.stopPropagation(),k(s)},className:"inline-flex items-center justify-center w-8 h-8 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors",title:"View Details",children:e.jsx(Te,{className:"h-4 w-4"})})})})]},s.id)})})]})}),d.total>0&&e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>m(Math.max(1,c-1)),disabled:c===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>m(Math.min(d.pages,c+1)),disabled:c===d.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Show"}),e.jsxs("select",{value:p,onChange:s=>{H(parseInt(s.target.value)),m(1)},className:"form-input py-1 px-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"rows"})]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(c-1)*p+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(c*p,d.total)})," ","of ",e.jsx("span",{className:"font-medium",children:d.total})," results"]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>m(Math.max(1,c-1)),disabled:c===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ee,{className:"h-5 w-5"})}),Array.from({length:Math.min(d.pages,10)},(s,a)=>d.pages<=10||c<=5?a+1:c>=d.pages-4?d.pages-9+a:c-5+a).map(s=>e.jsx("button",{onClick:()=>m(s),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${c===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:s},s)),e.jsx("button",{onClick:()=>m(Math.min(d.pages,c+1)),disabled:c===d.pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(De,{className:"h-5 w-5"})})]})})]})]})})]})})]}),N==="map"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Technician Locations"})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg p-8 text-center",children:[e.jsx(D,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Map View"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Interactive map showing technician locations and work zones"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto text-left",children:h.filter(s=>s.current_latitude&&s.current_longitude).map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.full_name}),le(s.availability_status)]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),s.work_zone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),s.active_tickets||0,"/",s.max_daily_tickets||8," tickets"]}),s.current_latitude&&s.current_longitude&&e.jsxs("div",{className:"text-blue-600",children:["ðŸ“ ",parseFloat(s.current_latitude).toFixed(4),", ",parseFloat(s.current_longitude).toFixed(4)]})]}),e.jsx("button",{onClick:()=>k(s),className:"mt-3 w-full px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"View Details"})]},s.id))}),h.filter(s=>s.current_latitude&&s.current_longitude).length===0&&e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"No technicians with location data available"})]})})]})]})};export{Ze as default};
//# sourceMappingURL=TechniciansPage-C0PcvFq_.js.map

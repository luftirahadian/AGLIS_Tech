var m=(r,d,t)=>new Promise((c,l)=>{var i=a=>{try{n(t.next(a))}catch(s){l(s)}},o=a=>{try{n(t.throw(a))}catch(s){l(s)}},n=a=>a.done?c(a.value):Promise.resolve(a.value).then(i,o);n((t=t.apply(r,d)).next())});import{j as e,a as p}from"./notifications-Dggueh-l.js";import{r as u}from"./react-vendor-BQ7pSkNi.js";import{b as j}from"./react-query-B7OIdD7u.js";import{F as h,g as b,a as g,D as N,z as w,N as y,C as f}from"./ui-vendor-CO1ReX4_.js";import{C as v}from"./CustomerPortalLayout-0dW5kJg3.js";import"./charts-CREYXqqm.js";const $=()=>{var a;const[r,d]=u.useState("all"),{data:t,isLoading:c}=j(["customer-invoices",r],()=>m(void 0,null,function*(){const s=localStorage.getItem("customerToken"),x=r!=="all"?`?status=${r}`:"";return(yield p.get(`/customer-portal/invoices${x}`,{headers:{Authorization:`Bearer ${s}`}})).data})),l=((a=t==null?void 0:t.data)==null?void 0:a.invoices)||[],i=s=>({paid:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",overdue:"bg-red-100 text-red-700",cancelled:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700",o=s=>({paid:e.jsx(f,{className:"h-4 w-4"}),pending:e.jsx(y,{className:"h-4 w-4"}),overdue:e.jsx(g,{className:"h-4 w-4"})})[s],n=s=>{w.success("Downloading invoice...")};return e.jsx(v,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx(h,{className:"h-7 w-7 mr-2 text-blue-600"}),"Invoice & Tagihan"]}),e.jsx("p",{className:"text-gray-600",children:"Lihat dan download invoice Anda"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","overdue","paid"].map(s=>e.jsx("button",{onClick:()=>d(s),className:`px-4 py-2 rounded-lg transition-colors ${r===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s==="all"?"Semua":s.charAt(0).toUpperCase()+s.slice(1)},s))})}),c?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"})}):l.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(h,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Belum ada invoice"})]}):e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.invoice_number}),e.jsxs("span",{className:`px-3 py-1 text-sm rounded-full flex items-center space-x-1 ${i(s.status)}`,children:[o(s.status),e.jsx("span",{children:s.status})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),new Date(s.invoice_date).toLocaleDateString("id-ID")]}),s.due_date&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"Jatuh tempo: ",new Date(s.due_date).toLocaleDateString("id-ID")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["Rp ",(s.total_amount||0).toLocaleString("id-ID")]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("p",{children:["Period: ",s.period_start?new Date(s.period_start).toLocaleDateString("id-ID"):"-"," - ",s.period_end?new Date(s.period_end).toLocaleDateString("id-ID"):"-"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>n(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Download PDF"})]})})]})})]},s.id))})]})})};export{$ as default};
//# sourceMappingURL=CustomerInvoicesPage-BOMJV5oE.js.map

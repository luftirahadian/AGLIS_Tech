var P=Object.defineProperty,S=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var j=(n,r,a)=>r in n?P(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a,d=(n,r)=>{for(var a in r||(r={}))E.call(r,a)&&j(n,a,r[a]);if(h)for(var a of h(r))_.call(r,a)&&j(n,a,r[a]);return n},o=(n,r)=>S(n,L(r));var g=(n,r,a)=>new Promise((l,i)=>{var m=s=>{try{c(a.next(s))}catch(x){i(x)}},p=s=>{try{c(a.throw(s))}catch(x){i(x)}},c=s=>s.done?l(s.value):Promise.resolve(s.value).then(m,p);c((a=a.apply(n,r)).next())});import{j as e,a as y}from"./notifications-Dggueh-l.js";import{r as f}from"./react-vendor-BQ7pSkNi.js";import{a as A,b as I,u as M}from"./react-query-B7OIdD7u.js";import{U as B,c as D,p as N,m as v,q as w,X as K,u as z,r as $,z as k}from"./ui-vendor-CO1ReX4_.js";import{C}from"./CustomerPortalLayout-BDC5S9f2.js";import"./charts-CREYXqqm.js";const F=()=>{const n=A(),[r,a]=f.useState(!1),[l,i]=f.useState({}),{data:m,isLoading:p}=I("customer-profile",()=>g(void 0,null,function*(){const t=localStorage.getItem("customerToken");return(yield y.get("/customer-portal/profile",{headers:{Authorization:`Bearer ${t}`}})).data}),{onSuccess:t=>{i(t.data)}}),c=M(t=>g(void 0,null,function*(){const u=localStorage.getItem("customerToken");return y.put("/customer-portal/profile",t,{headers:{Authorization:`Bearer ${u}`}})}),{onSuccess:()=>{k.success("Profil berhasil diperbarui!"),a(!1),n.invalidateQueries("customer-profile")},onError:t=>{var u,b;k.error(((b=(u=t.response)==null?void 0:u.data)==null?void 0:b.message)||"Gagal memperbarui profil")}}),s=(m==null?void 0:m.data)||{},x=t=>{t.preventDefault(),c.mutate({email:l.email,phone:l.phone,address:l.address,city:l.city,province:l.province})};return p?e.jsx(C,{children:e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"})})}):e.jsx(C,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx(B,{className:"h-7 w-7 mr-2 text-blue-600"}),"Profil Saya"]}),e.jsx("p",{className:"text-gray-600",children:"Kelola informasi profil Anda"})]}),!r&&e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Profil"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:r?e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer ID"}),e.jsx("input",{type:"text",value:s.customer_id,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:s.name,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Hubungi CS untuk mengubah nama"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(N,{className:"inline h-4 w-4 mr-1"}),"WhatsApp"]}),e.jsx("input",{type:"tel",value:l.phone||"",onChange:t=>i(o(d({},l),{phone:t.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(v,{className:"inline h-4 w-4 mr-1"}),"Email"]}),e.jsx("input",{type:"email",value:l.email||"",onChange:t=>i(o(d({},l),{email:t.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(w,{className:"inline h-4 w-4 mr-1"}),"Alamat Lengkap"]}),e.jsx("textarea",{value:l.address||"",onChange:t=>i(o(d({},l),{address:t.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kota/Kabupaten"}),e.jsx("input",{type:"text",value:l.city||"",onChange:t=>i(o(d({},l),{city:t.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provinsi"}),e.jsx("input",{type:"text",value:l.province||"",onChange:t=>i(o(d({},l),{province:t.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[e.jsxs("button",{type:"button",onClick:()=>{a(!1),i(s)},className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Batal"})]}),e.jsxs("button",{type:"submit",disabled:c.isLoading,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:c.isLoading?"Menyimpan...":"Simpan Perubahan"})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Customer ID"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.customer_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Nama Lengkap"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"WhatsApp"}),e.jsxs("p",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2 text-gray-400"}),s.phone]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),e.jsxs("p",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx(v,{className:"h-4 w-4 mr-2 text-gray-400"}),s.email||"-"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Alamat"}),e.jsxs("p",{className:"font-semibold text-gray-900 flex items-start",children:[e.jsx(w,{className:"h-4 w-4 mr-2 text-gray-400 mt-1"}),e.jsx("span",{children:s.address})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kota/Kabupaten"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.city||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Provinsi"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.province||"-"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Layanan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Paket"}),e.jsxs("p",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx($,{className:"h-4 w-4 mr-2 text-gray-400"}),s.package_name||"-"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Bandwidth"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.bandwidth_down?`${s.bandwidth_down} Mbps`:"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Harga Bulanan"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["Rp ",(s.monthly_price||0).toLocaleString("id-ID")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Status Layanan"}),e.jsx("p",{className:`font-semibold ${s.account_status==="active"?"text-green-600":"text-gray-600"}`,children:s.account_status||"-"})]})]})]})]})})]})})};export{F as default};
//# sourceMappingURL=CustomerProfilePage-Ch_GxbFY.js.map
